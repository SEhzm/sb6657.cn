import{h as u,A as f,M as d}from"./index.DCEjuJl1.js";async function i(r,t){var s,a;try{const e=await u.get(r);return(a=(s=e==null?void 0:e.data)==null?void 0:s[0])!=null&&a.barrage?e.data.map(n=>({tags:n.tags,content:n.barrage,category:n.tableName,id:`${n.barrageId}`,copyCount:n.cnt,likes:n.likes})):(console.log(`获取${t}烂梗失败`,e),!1)}catch(e){return console.log(`获取${t}烂梗失败`,e),!1}}function p(){return i(f.GET_HOT_MEME_24h,"24h热门")}function E(){return i(f.GET_HOT_MEME_7D,"七天热门")}async function h(r){if(console.log(`搜索词: ${r}`),r==null||r=="")return!1;try{const t=await u.post(f.SEARCH_MEME,{barrage:r});return t.data.length===0?(console.log("未搜索到烂梗"),"notfound"):t.data.map(a=>({tags:a.tags,content:a.barrage,category:"allbarrage",id:a.id,copyCount:+a.cnt,likes:+a.likes}))}catch(t){return console.log("搜索烂梗失败",t),!1}}async function b(r,t,s,a){var e,l,n;console.log(`请求烂梗分类: ${r}, 页数: ${t}, 每页烂梗数: ${s}`);try{const c=(e=d.find(o=>o.category===r))==null?void 0:e.api;if(!c)throw new Error("未找到此分类");const g=await u.get(c,{params:{tags:a,pageNum:t,pageSize:s}});if(((n=(l=g.data)==null?void 0:l.list)==null?void 0:n.length)<=0)throw new Error("请求到的烂梗列表为空");return{memeArr:g.data.list.map(o=>({tags:o.tags,content:o.barrage,id:o.id,category:r,copyCount:+o.cnt,likes:+o.likes})),total:g.data.total}}catch(c){return console.error("请求烂梗列表失败",c),!1}}export{E as a,b,p as g,h as s};
