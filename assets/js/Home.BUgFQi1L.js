const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/wordCloud.U5ucZPiF.js","assets/js/echarts.D13McHMB.js","assets/js/zrender.B_NAtvFA.js","assets/js/tslib.BDyQ-Jie.js","assets/js/echarts-wordcloud.tk4DMxWl.js","assets/js/index.zhuzcZ9F.js","assets/js/@vue.BltuATdo.js","assets/js/pinia.DfSVr1RC.js","assets/js/axios.ngrFHoWO.js","assets/js/js-cookie.Cz0CWeBA.js","assets/js/element-plus.DQRrSmQa.js","assets/js/lodash-es.CDeyng3v.js","assets/js/@vueuse.7i1SIcsD.js","assets/js/@element-plus.BgPfl9pw.js","assets/js/@popperjs.D_chPuIy.js","assets/js/@ctrl.r5W6hzzQ.js","assets/js/dayjs.BKG3DVjA.js","assets/js/async-validator.9PlIezaS.js","assets/js/memoize-one.BdPwpGay.js","assets/js/normalize-wheel-es.BQoi3Ox2.js","assets/js/@floating-ui.D0iZPv2f.js","assets/js/vue-router.oDprkwHL.js","assets/css/index.C0sUvfrJ.css","assets/css/wordCloud.qpx4COKE.css"])))=>i.map(i=>d[i]);
import{_ as se,C as oe,h as w,A as U,b as le}from"./index.zhuzcZ9F.js";import{h as m,l as ne,f as re,al as f,c as i,o as n,aU as de,a,R as s,J as l,u as _,E as ie,P as p,L as N,Q as S,a6 as A,O as u,W as ce,I as B,aV as ue,aI as me}from"./@vue.BltuATdo.js";import{S as O,T as q,F as W}from"./@element-plus.BgPfl9pw.js";import{f as ve,t as pe}from"./flip-num.DDs6YnfC.js";import{c as be,a as fe,p as j,l as _e,b as he}from"./setMeme.DRqJd2tp.js";import{b as h}from"./element-plus.DQRrSmQa.js";import"./pinia.DfSVr1RC.js";import"./axios.ngrFHoWO.js";import"./js-cookie.Cz0CWeBA.js";import"./vue-router.oDprkwHL.js";import"./lodash-es.CDeyng3v.js";import"./@vueuse.7i1SIcsD.js";import"./@popperjs.D_chPuIy.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.BKG3DVjA.js";import"./async-validator.9PlIezaS.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.BQoi3Ox2.js";import"./@floating-ui.D0iZPv2f.js";const ge={class:"home"},ye={class:"card third-card"},ke={class:"random-barrage-header"},Ce={class:"refresh-controls"},De={key:0,class:"modern-barrage-container"},Ee={class:"barrage-main-content"},we={class:"barrage-text-wrapper"},xe={class:"barrage-text"},Te={class:"barrage-meta-info"},Me={key:0,class:"tags-container"},Ve=["src"],Re={class:"tag-label"},Ue={class:"submit-time"},Ne={class:"meme-id"},Se={class:"copy-count"},Ae={key:1,class:"no-data"},Be={class:"card fifth-card"},Ie={class:"preset-tags-container"},ze={class:"preset-tags"},Le={class:"tag-icon-wrapper"},Pe=["src"],$e={class:"tag-text"},Fe={class:"added-tags"},Oe={class:"match-association-container"},qe={class:"match-section-home"},We={key:0,class:"match-details-box-home"},je={class:"match-info-row-home"},Ge=["src","alt"],He={class:"match-name-home"},Je={class:"match-time-home"},Qe={key:1,class:"no-match-info-home"},Ke={class:"wordCloudDiv"},Xe={class:"word-cloud-title"},Ye={__name:"Home",setup(Ze){const k=m(!0),M=m(!1),r=ne({tableData:[]}),V=m([]),G=()=>{w.get("/machine/dictList").then(t=>{t.code===200&&(V.value=t.data,C.value=t.data.map(e=>({iconUrl:e.iconUrl,label:e.dictLabel,value:e.dictValue})))}).catch(t=>{console.error("è·å–å­—å…¸æ•°æ®å¤±è´¥",t)})},I=t=>{if(!t||t.trim()==="")return[];const e=Array.from(new Set(t.split(",").map(v=>v.trim())));if(!V.value)return e.map(()=>({label:"",iconUrl:""}));const c=new Map(V.value.map(v=>[String(v.dictValue).trim(),v]));return e.map(v=>{const y=c.get(v);return y?{label:y.dictLabel,iconUrl:y.iconUrl}:{label:"",iconUrl:""}})};G();const g=m(""),C=m([]),D=m([]),b=m([]),d=m(null),x=m(!1);function H(){w.get("/machine/InProgressMatch").then(t=>{t.code===200&&t.data?d.value=t.data:d.value=null,console.log("Fetched match data:",d.value)}).catch(t=>{console.error("Failed to fetch in progress match:",t),d.value=null})}re(()=>{H()});const z=t=>{D.value=D.value.filter(e=>e.value!==t.value),b.value=b.value.filter(e=>e!==t.value),C.value.push(t)},L=t=>{if(b.value.length>=5){h.info("æœ€å¤š5ä¸ªæ ‡ç­¾");return}D.value.some(e=>e.value===t.value)||(D.value.push(t),b.value.push(t.value),C.value=C.value.filter(e=>e.value!==t.value))},J=()=>{if(b.value.length===0||g.value===""||g.value===null)h.error("è¯·é€‰æ‹©æ ‡ç­¾æˆ–è¾“å…¥å¼¹å¹•");else{if(b.value.length>5){h.error("æœ€å°‘ä¸€ä¸ªæ ‡ç­¾ï¼Œæœ€å¤šäº”ä¸ªæ ‡ç­¾ã€‚");return}const t={tags:b.value.join(","),barrage:g.value};x.value&&d.value&&(t.matchId=d.value.id),w.post(U.SUBMIT_MEME,t).then(e=>{g.value="",x.value=!1,e.code===200?h.success("æŠ•ç¨¿æˆåŠŸï¼Œå¾…å®¡æ ¸(ä¸€å¤©å†…)"):e.code===500?h.error("çƒ‚æ¢—å·²ç»æœ‰äº†ï¼Œå‹¿é‡å¤æäº¤"):h.error("è¯·æ±‚å¤±è´¥")}).catch(e=>{console.error("æŠ•ç¨¿å¤±è´¥",e),h.error("è¯·æ±‚å¤±è´¥")})}},Q=()=>{w.get(U.GET_RAND_ONE_MEME).then(t=>{r.tableData=[t.data],k.value=!1}).catch(t=>{console.error("éšæœºå¤±è´¥")})},P=async()=>{if(!k.value){M.value=!0,k.value=!0;try{await w.get(U.GET_RAND_ONE_MEME).then(t=>{r.tableData=[t.data],k.value=!1})}catch{console.error("éšæœºå¤±è´¥"),k.value=!1}setTimeout(()=>{M.value=!1},600)}},K=pe(he,_e,2e3);async function $(t){const e=K(t.barrage);if(!(!e||e==="limitedSuccess")){be();try{await fe("",t.id)?r.tableData[0].cnt=`${+r.tableData[0].cnt+1}`:j()}catch(c){console.error("æ›´æ–°å¤åˆ¶è®¡æ•°å¤±è´¥:",c),j()}}}Q();const F=m(null),X=ue(()=>le(()=>import("./wordCloud.U5ucZPiF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])));function Y(){var t,e;(e=(t=F.value)==null?void 0:t.getData)==null||e.call(t)}const Z=t=>t?t.replace("T"," ").split(".")[0]:"";return(t,e)=>{const c=f("el-icon"),T=f("el-popover"),v=f("el-button"),y=f("el-tag"),ee=f("el-input"),te=f("el-checkbox"),ae=f("el-backtop");return n(),i("div",ge,[e[22]||(e[22]=de('<div class="boomouder" data-v-d6b847d4><img src="https://gcore.jsdelivr.net/gh/9WiSHao/AnythingStorage/img/6657boom.webp" alt="6657boom" class="boom6657" data-v-d6b847d4></div><div class="card first-card" data-v-d6b847d4><div data-v-d6b847d4><b data-v-d6b847d4><p class="announcement" data-v-d6b847d4> å› ä¸ºGreasyForkè¢«å¢™ï¼Œä½ å¯ä»¥ <a href="https://cdn.hguofichp.cn/sb6657.cn%E6%96%97%E9%B1%BC%E7%8E%A9%E6%9C%BA%E5%99%A8%E7%83%82%E6%A2%97%E6%94%B6%E9%9B%86.user.js" target="_blank" data-v-d6b847d4>ç‚¹å‡»æˆ‘ä¸‹è½½æœ€æ–°çš„æ²¹çŒ´æ’ä»¶</a> ï¼Œä½ åªéœ€è¦å°†ä¸‹è½½çš„æ–‡ä»¶æ‹–å…¥æ²¹çŒ´ç®¡ç†é¢æ¿å³å¯ </p></b></div></div><div class="card second-card" data-v-d6b847d4><p data-v-d6b847d4> è¿™æ˜¯ä¸€ä¸ªæ”¶é›†6657çƒ‚æ¢—çš„ç½‘ç«™: <span class="dgq63136" data-v-d6b847d4><a href="https://sb6657.cn" data-v-d6b847d4>sb6657.cn</a></span> å°½æƒ…æ¬£èµä½ ä»¬çš„çƒ‚æ¢—å§ã€‚ <b data-v-d6b847d4>å¼€æ”¾æ³¨å†ŒåŠŸèƒ½ï¼Œå¯èƒ½ä¼šå‡ºç°æ”¶ä¸åˆ°é‚®ä»¶çš„æƒ…å†µã€‚</b><b data-v-d6b847d4>ç›®å‰å·²æ”¯æŒç©æœºå™¨ç›´æ’­é—´å¼€æ’­æé†’</b></p></div>',3)),a("div",ye,[a("div",ke,[e[5]||(e[5]=a("h3",{class:"random-barrage-title"},"éšæœºä¸€æ¡çƒ‚æ¢—",-1)),a("div",Ce,[a("span",{class:"refresh-text",onClick:P},"æ¢ä¸€æ¢"),s(c,{class:ie(["refresh-icon",{rotating:M.value}]),onClick:P,size:"18"},{default:l(()=>[s(_(O))]),_:1},8,["class"])])]),r.tableData&&r.tableData.length>0?(n(),i("div",De,[a("div",{class:"modern-barrage-card",onClick:e[1]||(e[1]=o=>$(r.tableData[0]))},[a("div",Ee,[a("div",we,[a("span",xe,p(r.tableData[0].barrage),1)]),a("div",Te,[I(r.tableData[0].tags).length>0?(n(),i("div",Me,[(n(!0),i(S,null,A(I(r.tableData[0].tags),(o,E)=>(n(),i("div",{key:E,class:"modern-tag"},[o.iconUrl?(n(),i("img",{key:0,src:o.iconUrl,class:"tag-icon"},null,8,Ve)):N("",!0),a("span",Re,p(o.label),1)]))),128))])):N("",!0),a("div",Ue,[a("span",Ne,"#"+p(r.tableData[0].id),1),u(p(Z(r.tableData[0].submitTime)),1)])])]),a("div",{class:"modern-copy-button",onClick:e[0]||(e[0]=ce(o=>$(r.tableData[0]),["stop"]))},[e[6]||(e[6]=a("div",{class:"copy-text"},"å¤åˆ¶",-1)),e[7]||(e[7]=a("div",{class:"copy-icon"},"ğŸ“‹",-1)),a("div",Se,[s(ve,{num:r.tableData[0].cnt||0},null,8,["num"])]),e[8]||(e[8]=a("div",{class:"copy-ripple"},null,-1))])])])):(n(),i("div",Ae,"æš‚æ— å¼¹å¹•æ•°æ®"))]),a("div",Be,[a("div",null,[a("span",null,[e[15]||(e[15]=u(" å¯é€‰æ ‡ç­¾ ",-1)),s(T,{width:300},{reference:l(()=>[s(c,{size:"16"},{default:l(()=>[s(_(q))]),_:1})]),default:l(()=>[e[9]||(e[9]=u(" ä¸ºè§£å†³çƒ‚æ¢—åˆ†æ ä¸è¶³å’Œåˆ†ç±»ä¸æ¸…æ™°é—®é¢˜ã€‚ ",-1)),e[10]||(e[10]=a("br",null,null,-1)),e[11]||(e[11]=a("b",null,"ç‚¹å‡»æ ‡ç­¾å³å¯æ·»åŠ ",-1))]),_:1}),s(v,{link:"",type:"success",class:"submit-tag-button"},{default:l(()=>[e[14]||(e[14]=u(" æŠ•ç¨¿æ ‡ç­¾ ",-1)),s(T,{width:300},{reference:l(()=>[s(c,{size:"16"},{default:l(()=>[s(_(W))]),_:1})]),default:l(()=>[e[12]||(e[12]=a("b",null,"è¯·åœ¨ä¸Šæ–¹(å»ºè®®/æäº¤)é—®å·æŠ•ç¨¿ã€‚",-1)),e[13]||(e[13]=a("br",null,null,-1))]),_:1})]),_:1})]),a("div",Ie,[a("div",ze,[(n(!0),i(S,null,A(C.value,(o,E)=>(n(),B(y,{round:"",key:E,closable:"",onClose:R=>L(o),onClick:R=>L(o),class:"preset-tag",type:"primary"},{default:l(()=>[a("div",Le,[o.iconUrl?(n(),i("img",{key:0,src:o.iconUrl,class:"tag-icon"},null,8,Pe)):N("",!0),a("span",$e,p(o.label),1)])]),_:2},1032,["onClose","onClick"]))),128))])]),a("span",null,[e[17]||(e[17]=u(" å·²é€‰æ ‡ç­¾ ",-1)),s(T,{width:250},{reference:l(()=>[s(c,{size:"16"},{default:l(()=>[s(_(q))]),_:1})]),default:l(()=>[e[16]||(e[16]=a("b",null,"æœ€å°‘ä¸€ä¸ªæ ‡ç­¾ï¼Œæœ€å¤šäº”ä¸ªæ ‡ç­¾ã€‚",-1))]),_:1})]),a("div",Fe,[(n(!0),i(S,null,A(D.value,(o,E)=>(n(),B(y,{round:"",key:E,closable:"",onClick:R=>z(o),onClose:R=>z(o),class:"added-tag",effect:"dark"},{default:l(()=>[u(p(o.label),1)]),_:2},1032,["onClick","onClose"]))),128))]),s(ee,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=o=>g.value=o),maxlength:"255",autocomplete:"off",autosize:{minRows:2,maxRows:4},"show-word-limit":"",type:"textarea",placeholder:" çƒ‚æ¢—...."},null,8,["modelValue"]),a("div",Oe,[a("div",qe,[s(te,{modelValue:x.value,"onUpdate:modelValue":e[3]||(e[3]=o=>x.value=o),disabled:!d.value,class:"match-checkbox-home"},{default:l(()=>[e[18]||(e[18]=u(" å…³è”èµ›äº‹åº“ ",-1)),s(c,{color:"#3db302ff",size:"16"},{default:l(()=>[s(_(W))]),_:1})]),_:1},8,["modelValue","disabled"]),d.value?(n(),i("div",We,[a("div",je,[a("img",{src:d.value.matchesImg,class:"match-image-home",alt:d.value.matchesName},null,8,Ge),a("span",He,p(d.value.matchesName),1)]),a("div",Je,p(d.value.startTime)+" è‡³ "+p(d.value.endTime),1)])):(n(),i("div",Qe,"å½“å‰æ— æ­£åœ¨è¿›è¡Œçš„å¤§å‹èµ›äº‹")),s(v,{class:"saveBnt",type:"primary",onClick:J},{default:l(()=>[...e[19]||(e[19]=[u("æŠ•ç¨¿",-1)])]),_:1})])])]),s(ae,{right:50,bottom:50})]),s(oe,{class:"ChatRoom card"}),e[23]||(e[23]=a("div",{class:"card sixth-card"},[u(" å‹æƒ…é“¾æ¥ "),a("a",{href:"https://dgq63136.cn",target:"_blank"},"dgq63136.cn"),u(" Â Â Â  "),a("a",{href:"https://sb6657.cn/#/Starrysky",target:"_blank"},"æ˜Ÿç©ºèƒŒæ™¯")],-1)),a("div",Ke,[a("span",Xe,[e[20]||(e[20]=u(" æœç´¢è¯äº‘ ",-1)),s(c,{size:"20",class:"word-cloud-refresh-icon",onClick:e[4]||(e[4]=o=>Y())},{default:l(()=>[s(_(O))]),_:1})]),(n(),B(me,null,{default:l(()=>[s(_(X),{ref_key:"wordCloudRef",ref:F},null,512)]),fallback:l(()=>[...e[21]||(e[21]=[a("div",{class:"word-cloud-loading"},"è¯äº‘åŠ è½½ä¸­...",-1)])]),_:1}))])])}}},gt=se(Ye,[["__scopeId","data-v-d6b847d4"]]);export{gt as default};
