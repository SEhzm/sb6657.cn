import{_ as $,h as b}from"./index.BBfoH8pv.js";import{b as _}from"./element-plus.DQRrSmQa.js";import{l as B,al as a,c as i,o as r,a as l,R as s,Q as f,a6 as C,L as S,J as m,O as p,P as u}from"./@vue.BltuATdo.js";import"./pinia.DfSVr1RC.js";import"./axios.ngrFHoWO.js";import"./js-cookie.Cz0CWeBA.js";import"./vue-router.oDprkwHL.js";import"./@element-plus.BgPfl9pw.js";import"./lodash-es.CDeyng3v.js";import"./@vueuse.7i1SIcsD.js";import"./@popperjs.D_chPuIy.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.BKG3DVjA.js";import"./async-validator.9PlIezaS.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.BQoi3Ox2.js";import"./@floating-ui.D0iZPv2f.js";const U={class:"image-list"},A={style:{"text-align":"center",padding:"0 0 5px 0"}},E={key:0,class:"comment-list"},T={class:"comment-content"},q={class:"comment-content"},H={class:"comment-date"},J={class:"dialog-footer"},M={__name:"image",setup(P){(()=>{_({type:"success",dangerouslyUseHTMLString:!0,title:"照片可以评论喔",offset:100,duration:1500})})();const o=B({outerImg:[],id:"",imageId:"",Commentname:"",douyuId:"",dialogFormVisible:!1}),g=()=>{b.get("/machine/showImage",{}).then(t=>{o.outerImg=t.data||[]}).catch(t=>{console.error("加载数据失败:",t)})};g();const x=t=>{t.showComments=!t.showComments},y=t=>new Date(t).toLocaleString(),v={Commentname:[{required:!0,message:"请输入评论",trigger:"blur"}]},k=t=>{console.log(t),o.imageId=t.id,_({title:"温馨提醒",message:"请注意你的行为，不要上传违反法律的内容，后台能监控到你",type:"warning"}),o.douyuID="",o.Commentname="",o.dialogFormVisible=!0},h=t=>{t.Commentname===""?_.error("请输入评论"):b.post("/machine/addCommentname",{id:"",imageId:o.imageId,douyuID:t.douyuID,createdAt:"",commentname:t.Commentname}).then(e=>{g(),_.success("评论成功"),o.dialogFormVisible=!1}).catch(e=>{console.error("加载数据失败:",e)})};return(t,e)=>{const w=a("el-image"),d=a("el-button"),V=a("el-input"),I=a("el-form-item"),z=a("el-form"),D=a("el-dialog"),F=a("el-backtop");return r(),i(f,null,[e[7]||(e[7]=l("div",{class:"outer"},[l("span",null,"主播相册"),l("span",{style:{"font-size":"16px"}},"(点击放大图片)"),l("em",{style:{"font-size":"14px"}},"如侵权，请右上角联系删除")],-1)),l("div",U,[(r(!0),i(f,null,C(o.outerImg,(n,N)=>(r(),i("div",{key:N,class:"image-block"},[s(w,{"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"hide-on-click-modal":!0,src:n.url,"preview-src-list":[n.url],fit:"cover",lazy:"",style:{width:"250px",height:"300px"}},null,8,["src","preview-src-list"]),l("div",A,[s(d,{style:{width:"230px","font-size":"16px","white-space":"normal","word-break":"break-word"}},{default:m(()=>[p(u(n.date),1)]),_:2},1024)]),s(d,{onClick:c=>x(n),style:{"font-size":"18px","margin-left":"15px","box-sizing":"border-box"}},{default:m(()=>[p(u(n.showComments?"隐藏评论":"显示评论("+n.comments.length+")"),1)]),_:2},1032,["onClick"]),n.showComments?(r(),i("div",E,[(r(!0),i(f,null,C(n.comments,(c,L)=>(r(),i("div",{key:L,class:"comment-item"},[l("span",T,u(c.douyuID)+" :",1),l("span",q,u(c.commentname),1),l("span",H,u(y(c.createdAt)),1)]))),128))])):S("",!0),s(d,{type:"success",plain:"",onClick:c=>k(n),style:{"font-size":"18px","box-sizing":"border-box"}},{default:m(()=>[...e[4]||(e[4]=[p(" 我要评论 ",-1)])]),_:1},8,["onClick"])]))),128))]),s(D,{modelValue:o.dialogFormVisible,"onUpdate:modelValue":e[3]||(e[3]=n=>o.dialogFormVisible=n),draggable:"",title:"评论"},{footer:m(()=>[l("div",J,[s(d,{onClick:e[1]||(e[1]=n=>o.dialogFormVisible=!1)},{default:m(()=>[...e[5]||(e[5]=[p("关闭",-1)])]),_:1}),s(d,{type:"primary",onClick:e[2]||(e[2]=n=>h(o))},{default:m(()=>[...e[6]||(e[6]=[p(" 评论并关闭 ",-1)])]),_:1})])]),default:m(()=>[s(z,{model:o,"label-width":"100px",rules:v,"label-position":"right"},{default:m(()=>[s(I,{label:"评论内容",prop:"Commentname"},{default:m(()=>[s(V,{modelValue:o.Commentname,"onUpdate:modelValue":e[0]||(e[0]=n=>o.Commentname=n),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),s(F,{right:20,bottom:50})],64)}}},ie=$(M,[["__scopeId","data-v-9024b04a"]]);export{ie as default};
