import{d as f}from"./pinia.DfSVr1RC.js";import{M as h,h as m,A as l,p as d}from"./index.uyXwXNh9.js";import{h as p}from"./@vue.BltuATdo.js";async function u(t,r){var a,n;try{const e=await m.get(t);return(n=(a=e==null?void 0:e.data)==null?void 0:a[0])!=null&&n.barrage?e.data.map(s=>({tags:s.tags,content:s.barrage,id:`${s.barrageId}`,copyCount:s.cnt,submitTime:s.submitTime})):(console.log(`获取${r}烂梗失败`,e),!1)}catch(e){return console.log(`获取${r}烂梗失败`,e),!1}}function _(){return u(l.GET_HOT_MEME_24h,"24h热门")}function $(){return u(l.GET_HOT_MEME_7D,"七天热门")}async function y(t){return console.log(`搜索词: ${t.barrage}, 标签: ${t.tags}, 投稿时间: ${t.submitTime}, 排序: ${t.sort}, 每页烂梗数: ${t.pageSize}, 页数: ${t.pageNum}`),await d({url:l.SEARCH_MEME,data:t})}async function A(t,r,a,n){var e,c,s;console.log(`请求烂梗分类: ${t}, 页数: ${r}, 每页烂梗数: ${a}`);try{const i=(e=h.find(o=>o.category===t))==null?void 0:e.api;if(!i)throw new Error("未找到此分类");const g=await m.get(i,{params:{tags:n,pageNum:r,pageSize:a}});if(((s=(c=g.data)==null?void 0:c.list)==null?void 0:s.length)<=0)throw new Error("请求到的烂梗列表为空");return{memeArr:g.data.list.map(o=>({tags:o.tags,content:o.barrage,id:o.id,category:t,copyCount:+o.cnt,likes:+o.likes,submitTime:o.submitTime})),total:g.data.total}}catch(i){return console.error("请求烂梗列表失败",i),!1}}async function M(){const t=await m.get(l.GET_MEME_TAGS);if(t.code!==200)throw new Error(t.msg);return t.data}const w="data:image/svg+xml,%3csvg%20width='10'%20height='10'%20viewBox='0%200%2010%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5_205)'%3e%3cpath%20d='M9.1875%205.09375L4.8125%200.71875C4.75%200.65625%204.6875%200.625%204.59375%200.625H1.21875C0.90625%200.625%200.625%200.90625%200.625%201.21875V4.59375C0.625%204.6875%200.65625%204.75%200.71875%204.8125L5.09375%209.1875C5.21875%209.3125%205.375%209.375%205.53125%209.375C5.6875%209.375%205.84375%209.3125%205.96875%209.1875L9.1875%205.9375C9.4375%205.71875%209.4375%205.3125%209.1875%205.09375ZM5.53125%208.75L1.25%204.46875V1.25H4.46875L8.75%205.53125L5.53125%208.75Z'%20fill='black'/%3e%3cpath%20d='M2.8125%201.875C2.28125%201.875%201.875%202.28125%201.875%202.8125C1.875%203.34375%202.28125%203.75%202.8125%203.75C3.34375%203.75%203.75%203.34375%203.75%202.8125C3.75%202.28125%203.34375%201.875%202.8125%201.875ZM2.8125%203.125C2.625%203.125%202.5%203%202.5%202.8125C2.5%202.625%202.625%202.5%202.8125%202.5C3%202.5%203.125%202.625%203.125%202.8125C3.125%203%203%203.125%202.8125%203.125Z'%20fill='black'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_5_205'%3e%3crect%20width='10'%20height='10'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",H=f("memeTags",()=>{const t=p([]);let r,a=null;r=new Promise(e=>{a=e});async function n(){const e=await M();e.forEach(c=>{c.iconUrl=c.iconUrl||w}),t.value=e,a==null||a()}return{memeTags:t,setMemeTags:n,tagsLoaded:r}});export{$ as a,A as b,_ as g,y as s,H as u};
