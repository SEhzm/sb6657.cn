import{h as m,A as d,M as h,_ as v}from"./index.BF1uTgsG.js";import{m as p}from"./element-plus.DVYLd97e.js";import{r as i,f as _,S as E,d as C,w as M,o as b,c as w,a as u,M as g,C as A}from"./@vue.BkZGu_Ap.js";async function y(t,e){var a,r;try{const n=await m.get(t);return(r=(a=n==null?void 0:n.data)==null?void 0:a[0])!=null&&r.barrage?n.data.map(o=>({tags:o.tags,content:o.barrage,category:o.tableName,id:`${o.barrageId}`,copyCount:o.cnt})):(console.log(`获取${e}烂梗失败`,n),!1)}catch(n){return console.log(`获取${e}烂梗失败`,n),!1}}function B(){return y(d.GET_HOT_MEME_24h,"24h热门")}function D(){return y(d.GET_HOT_MEME_7D,"七天热门")}async function k(t){console.log(`搜索词: ${t}`);try{const e=await m.post(d.SEARCH_MEME,{barrage:t});return e.data.length===0?(console.log("未搜索到烂梗"),"notfound"):e.data.map(r=>({tags:r.tags,content:r.barrage,category:"allbarrage",id:r.id,copyCount:+r.cnt}))}catch(e){return console.log("搜索烂梗失败",e),!1}}async function G(t,e,a,r){var n,s,o;console.log(`请求烂梗分类: ${t}, 页数: ${e}, 每页烂梗数: ${a}`);try{const c=(n=h.find(l=>l.category===t))==null?void 0:n.api;if(!c)throw new Error("未找到此分类");const f=await m.get(c,{params:{tags:r,pageNum:e,pageSize:a}});if(((o=(s=f.data)==null?void 0:s.list)==null?void 0:o.length)<=0)throw new Error("请求到的烂梗列表为空");return{memeArr:f.data.list.map(l=>({tags:l.tags,content:l.barrage,id:l.id,category:t,copyCount:+l.cnt})),total:f.data.total}}catch(c){return console.error("请求烂梗列表失败",c),!1}}function R(t,e,a){let r=null;return(...n)=>{if(r)return e();{const s=t(...n);return r=setTimeout(()=>{r=null},a),s}}}function N(t){p({title:"复制失败",message:`复制操作失败，请稍后重试。
                可能你的浏览器不支持被动写入剪贴板，请换用其他浏览器`,type:"error"}),console.error("复制失败:",t)}function U(){p({message:"复制成功",type:"success"})}function z(){return p({title:"请勿刷次数",message:"复制成功，但次数没有增加",type:"warning"}),"limitedSuccess"}function Q(t){const e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select();try{document.execCommand("Copy")}catch(a){return N(a),!1}return document.body.removeChild(e),!0}async function Y(t,e,a,r,n){try{const s=await m.get(d.INCREASE_COPY_COUNT+`/${e}`);return console.log("弹幕复制次数+1成功",s),!0}catch(s){return console.error("弹幕复制次数+1失败",s),!1}}function j(){p({title:"复制成功",message:"但是复制次数没有增加，可能是网络有问题",type:"warning"})}const $=t=>new Promise(e=>setTimeout(e,t));function q(){const t=i(!1);let e=null;function a(r){t.value=r.matches}return _(()=>{e=window.matchMedia("(max-width: 600px)"),t.value=e.matches,e.addEventListener("change",a)}),E(()=>{e&&e.removeEventListener("change",a)}),t}const T={class:"container"},x={class:"place-holder"},S=C({__name:"flip-num",props:{num:{}},setup(t){const e=t,a=i(e.num),r=i(e.num);let n=!1;const s=i("normal");return M(()=>e.num,async(o,c)=>{if(a.value=c,r.value=o,n){a.value=o,r.value=o;return}n=!0,s.value=o<c?"end flex-start":"end",await $(500),a.value=o,r.value=o,s.value="normal",n=!1}),(o,c)=>(b(),w("span",T,[u("div",x,g(r.value),1),u("div",{class:A(`flip ${s.value}`)},[u("div",null,g(a.value),1),u("div",null,g(r.value),1)],2)]))}}),F=v(S,[["__scopeId","data-v-3fee0ed6"]]);export{Y as a,Q as b,U as c,D as d,G as e,F as f,B as g,z as l,j as p,k as s,R as t,q as u};
