import{h as g,A as u,M as m}from"./index.BXJMGjwm.js";import{n as p}from"./element-plus.K7C1HgYT.js";async function f(t,r){var o,a;try{const e=await g.get(t);return(a=(o=e==null?void 0:e.data)==null?void 0:o[0])!=null&&a.barrage?e.data.map(n=>({tags:n.tags,content:n.barrage,category:n.tableName,id:`${n.barrageId}`,copyCount:n.cnt,likes:n.likes})):(console.log(`获取${r}烂梗失败`,e),!1)}catch(e){return console.log(`获取${r}烂梗失败`,e),!1}}function M(){return f(u.GET_HOT_MEME_24h,"24h热门")}function h(){return f(u.GET_HOT_MEME_7D,"七天热门")}async function A(t){if(console.log(`搜索词: ${t}`),t==null||t=="")return!1;try{const r=await g.post(u.SEARCH_MEME,{barrage:t});return r.data.length===0?(console.log("未搜索到烂梗"),"notfound"):r.data.map(a=>({tags:a.tags,content:a.barrage,category:"allbarrage",id:a.id,copyCount:+a.cnt,likes:+a.likes}))}catch(r){return console.log("搜索烂梗失败",r),!1}}async function b(t,r,o,a){var e,s,n;console.log(`请求烂梗分类: ${t}, 页数: ${r}, 每页烂梗数: ${o}`);try{const l=(e=m.find(c=>c.category===t))==null?void 0:e.api;if(!l)throw new Error("未找到此分类");const i=await g.get(l,{params:{tags:a,pageNum:r,pageSize:o}});if(((n=(s=i.data)==null?void 0:s.list)==null?void 0:n.length)<=0)throw new Error("请求到的烂梗列表为空");return{memeArr:i.data.list.map(c=>({tags:c.tags,content:c.barrage,id:c.id,category:t,copyCount:+c.cnt,likes:+c.likes})),total:i.data.total}}catch(l){return console.error("请求烂梗列表失败",l),!1}}async function w(t,r,o,a,e){try{const s=await g.get(u.INCREASE_COPY_COUNT+`/${r}`);return console.log("弹幕复制次数+1成功",s),!0}catch(s){return console.error("弹幕复制次数+1失败",s),!1}}function C(){p({title:"复制成功",message:"但是复制次数没有增加，可能是网络有问题",type:"warning"})}export{h as a,b,w as c,M as g,C as p,A as s};
