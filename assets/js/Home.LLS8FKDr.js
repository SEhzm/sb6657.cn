import{n as p,a as ce,b as pe,f as me,h as Ae,v as ve,o as W,E as fe,d as ge,e as ye,g as be,p as he}from"./element-plus.Dmms479u.js";import{o as d,c as m,r as A,X as _e,a as o,L as r,P as a,H as l,I as Y,G as S,u as F,a5 as Pe,K as V,O as k,a4 as M,M as _,V as xe,ag as Z}from"./@vue.BkZGu_Ap.js";import{_ as $,h as P,A as Ce,C as Te}from"./index.DMs2qEU8.js";import{M as we}from"./@element-plus.imH8POSc.js";import{f as ke,c as Ee,t as ze,l as Ie,a as Se}from"./flip-num.C8vFJ1d3.js";/* empty css                                                                 */import"./lodash-es.C-zDejYo.js";import"./@vueuse.B3BMR0ps.js";import"./@popperjs.D9SI2xQl.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.DW_GSUNX.js";import"./aplayer.Y0QqkN1l.js";import"./async-validator.DKvM95Vc.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.B6fDCfyv.js";import"./@floating-ui.8uccrNCM.js";import"./axios.CCb-kr4I.js";import"./vue-router.CJ_8Ucol.js";const Me="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAABERkX/hIqP/6q3x/+Xo7j/VmR9/yk2Uf8sOFP/MDpZ/zE4Vv8xNVH/JyxE/3V/kv+XoLf/Ulp4/05RaP+JnaP/YmJc/3Bzcv+Ikpv/eYCI/2pweP9TXm7/MD1X/zM9XP84P17/NjlX/yovR/9OVmj/tcPM/6Gvt/+0z9H/uPHm/zAvJP9PU1P/prHB/4yTm/9QT03/SUhM/z9FWv85QmH/ODxa/zAzT/8uMEj/KSxB/4igpv/g//3/1vnz/8Xo4f8uJyH/R0ZJ/3Z7iv9WWmL/ODc2/0JAQ/9BR2H/LzRQ/zk9Wf8/QVv/LCw//ykrPf9IT2H/rLO1/6Smpf+XmJb/HBQJ/yAYEf8jHBz/IB4f/yQhIP80NT//PkJf/zI0TP83O1X/NzlO/zQyRP81N0n/O0BS/52epf/T09L/0tLS/xYQBv8UCwf/GxEP/yEbGv8jHx7/Oz9R/0hPb/87Plr/QUZe/0BCV/84N0r/Rklb/z5AUf+pqK////////z8/P8uJyH/QT09/z06Ov8zMTL/RURE/01PW/9CTGX/QENb/0ZMY/9HS17/RUJU/05MXv9SUl7/x8jL///////6+vr/Ligf/0dEPP9HRDz/R0M8/1NMRP9DPD//QUFR/zs5Rv9DQlL/S0dY/09GUv9QSVD/amZq/+Hk5P///////f39/x4bEP8kIRX/KSQZ/ywnHP9COC7/OzIy/zw3Qv88NUH/SEFS/05HWf9QR1D/UUdL/351dP/a29r///////39/f8/OzT/S0c//05LQ/9jYl3/jo+L/05IR/82ND//QD1J/1FNXf9aV2f/UUtQ/1xSU/+CeHn/yMfH///////8/Pz/PTY0/zw0Mf9ucXT/y9zj/8vc4f9iX1z/KiIh/1JQYv9WVmb/WFZk/2BaY/9qYWP/cWZn/9rY2f///////Pz8/yAdGv8cFRH/Wl1i/8ri7P/E1d//iIqM/yYYEf85Kij/ST9E/1FISP9aTEr/ZVdX/6ihov///////f39//7+/v8iIB3/IhoX/05MTv/D1+T/wdPg/622uP9vbWz/Oy4o/0Q1Lv9ZS0P/ZVRP/390df/y8fH///////39/f/+/v7/Ih8b/yQdGv9APj3/uMrV/8TY5P+ptLX/qKuq/4mIh/9nXFX/dWZd/5KGgf+ooqH/8e/v///////+/f3//v7+/ywoJ/8xKib/NzQy/6e4wP/E2eP/qbS1/5+iof+SlJP/a2Jb/2pbU/+EeXD/nZiQ/+zr6v///////f39//7+/v8vMDX/MS0l/zAvKv+Uo6f/vtLa/6ewsv+foaD/j5GQ/2VcV/9nWFD/e3Bo/4R+dv+7xMv/9Pj7//7+/v/9/v7/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==",Qe={},Be={src:Me,alt:"",style:{width:"30px"}};function Re(K,D){return d(),m("img",Be)}const Ue=$(Qe,[["render",Re]]),Ve={class:"home"},De={class:"card third-card"},He=["onTouchstart","onTouchend"],Le={class:"barrage-text"},Xe={style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},qe=["src"],Oe={class:"card fourth-card"},je={style:{cursor:"pointer"}},Ne={class:"barrage-text"},Je={style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},We=["src"],Ye={class:"card fifth-card"},Fe={class:"preset-tags-container"},Ze={class:"preset-tags"},$e={class:"added-tags"},Ke="custom-popover",Ge={__name:"Home",setup(K){const D=()=>{const t=document.getElementById("diaocha");t?t.click():console.error('Element with id "diaocha" not found')},E=A(!0),Q=A(!1),x=_e({getRandOne:[],filteredItems:[],tableData:[],table:"",barrage:""});(()=>{sessionStorage.getItem("firstOpening")||P.get("https://api.vvhan.com/api/visitor.info").then(t=>{const e=t;localStorage.setItem("ip",t.ip),p({icon:Ue,dangerouslyUseHTMLString:!0,title:"你好",message:`
            <p>
                欢迎来自<b>${e.location||"地球"}</b>的朋友<br/>  
                ${e.system||"外星操作系统"} ${e.browser||"牛逼浏览器"}<br/>
                IP: ${e.ip||"地球"}
            </p>
            `,offset:50,customClass:"myClass",duration:1e3}),sessionStorage.setItem("firstOpening",1)})})();const B=A([]),G=()=>{P.get("/dgq/dictList").then(t=>{t.code==="200"&&(B.value=t.data,C.value=t.data.map(e=>({label:e.dictLabel,value:e.dictValue})))}).catch(t=>{console.error("获取字典数据失败",t)})},H=t=>{if(!t||t.trim()==="")return[];const e=Array.from(new Set(t.split(",").map(s=>s.trim())));if(!B.value)return e.map(()=>({label:"",iconUrl:""}));const i=new Map(B.value.map(s=>[String(s.dictValue).trim(),s]));return e.map(s=>{const c=i.get(s);return c?{label:c.dictLabel,iconUrl:c.iconUrl}:{label:"",iconUrl:""}})};G();const z=A(""),b=A(""),C=A([]),T=A([]),v=A([]),L=t=>{T.value=T.value.filter(e=>e.value!==t.value),v.value=v.value.filter(e=>e!==t.value),C.value.push(t)},X=t=>{if(v.value.length>=5){p.info("最多5个标签");return}T.value.some(e=>e.value===t.value)||(T.value.push(t),v.value.push(t.value),C.value=C.value.filter(e=>e.value!==t.value))},ee=()=>{if(v.value.length===0||b.value===""||b.value===null)p.error("请选择标签或输入弹幕");else{if(v.value.length>5){p.error("最少一个标签，最多五个标签。");return}P.post(Ce.SUBMIT_MEME,{tags:v.value.join(","),barrage:b.value}).then(t=>{b.value="",t.code==="200"?p.success("投稿成功，待审核(一天内)"):t.code==="500"?p.error("烂梗已经有了，勿重复提交"):p.error("请求失败")}).catch(t=>{console.error("投稿失败",t),p.error("请求失败")})}},R=()=>{console.log(z.value),P.post("/dgq/Query",{barrage:z.value}).then(t=>{Q.value=!0,E.value=!1,x.filteredItems=t.data||[]})};var te=A("搜索烂梗...");const q=()=>{P.get("/dgq/getRandOne").then(t=>{x.tableData=[t.data],E.value=!1}).catch(t=>{console.error("随机失败")})};q();const oe=()=>{W({message:"复制成功",type:"success"})},le=()=>{W({message:"复制失败，请检查浏览器是否禁用navigator.clipboard对象或手动复制,请勿使用夸克浏览器",type:"error"})};let U=0,w=null,I=0;const O=t=>{const e=new Date().getTime(),i={x:event.clientX,y:event.clientY};if(w&&w.x===i.x&&w.y===i.y?(I++,console.log(I),I>4&&fe.alert("😡😡😡你在刷次数😡😡😡","请勿使用连点器",{confirmButtonText:"好吧，我错了"})):I=0,e-U<1500){p({title:"请勿刷次数",message:"复制成功，但次数没有增加",type:"warning"});const c=t.barrage;let g=document.createElement("input");g.value=c,document.body.appendChild(g),g.select();try{document.execCommand("Copy")}catch(h){p({title:"复制失败",message:"复制操作失败，请稍后重试",type:"error"}),console.error("复制失败:",h)}document.body.removeChild(g),U=e,w=i;return}w=i,U=e;const f=t.barrage;let s=document.createElement("input");s.value=f,document.body.appendChild(s),s.select();try{document.execCommand("Copy"),oe(),console.log("内容已复制到剪贴板"),P.get(`/dgq/addCnt/${t.id}`).then(()=>{})}catch(c){p({title:"复制失败",message:"复制操作失败，请稍后重试",type:"error"}),console.error("复制失败:",c),le()}document.body.removeChild(s)},ae=()=>{x.filteredItems=[],Q.value=!1},ne=t=>{t.touchStartTime=Date.now()},re=t=>{Date.now()-t.touchStartTime>200&&(t.popoverVisible=!0,setTimeout(()=>{t.popoverVisible=!1},1500))},se=ze(Se,Ie,2e3);async function ie(t){const e=t.content,i=se(e);!i||i==="limitedSuccess"||(Ee(),await R())}return(t,e)=>{const i=ce,f=ge,s=pe,c=ye,g=me,h=be,j=Ae,N=Z("Warning"),ue=Z("QuestionFilled"),de=he,J=ve;return d(),m(k,null,[e[25]||(e[25]=o("div",{class:"boomouder"},[o("img",{src:"https://pic1.imgdb.cn/item/67c4818fd0e0a243d40a35d1.jpg",alt:"6657boom",class:"boom6657"})],-1)),o("div",Ve,[e[23]||(e[23]=o("div",{class:"card first-card"},[o("div",null,[o("b",null,[o("p",{class:"announcement"}," 新增时光相册(可评论)，新增在线投稿弹幕。冬瓜强帅照可以在上方上传照片上传至相册,最新推出了油猴Tampermonkey插件，可以在直播间直接搜索进行复制和一键发送 ")])])],-1)),o("div",{class:"card second-card"},[o("p",null,[e[4]||(e[4]=r(" 这是一个收集63136弹幕的网站: ")),e[5]||(e[5]=o("span",{class:"dgq63136"},[o("a",{href:"https://dgq63136.cn"},"dgq63136.cn")],-1)),e[6]||(e[6]=r(" 尽情欣赏你们的烂梗吧。 ")),e[7]||(e[7]=o("br",null,null,-1)),o("b",null,[e[2]||(e[2]=r("为了更深入了解用户的需求以及作者需编写论文，特开展 dgq36136.cn 用户调研 ")),o("a",{style:{color:"blue",cursor:"pointer"},onClick:D},"点击我参加"),e[3]||(e[3]=r(" 为了感谢您抽出宝贵的时间参与调研."))])])]),o("div",De,[o("div",null,[a(i,{type:"primary",onClick:q},{default:l(()=>e[8]||(e[8]=[r("点我随机一条弹幕")])),_:1}),Y((d(),S(g,{data:x.tableData,class:"barrage-table",onRowClick:O},{default:l(()=>[a(c,{prop:"barrage"},{default:l(n=>[a(s,{placement:"top",width:"auto",trigger:"hover",visible:n.row.popoverVisible},{reference:l(()=>[o("div",{style:{cursor:"pointer"},onTouchstart:u=>ne(n.row),onTouchend:u=>re(n.row)},[o("span",Le,_(n.row.barrage),1)],40,He)]),default:l(()=>[o("div",Xe,[(d(!0),m(k,null,M(H(n.row.tags),(u,y)=>(d(),m("div",{key:y,style:{"margin-right":"8px"}},[a(f,{round:"",effect:"dark",style:{fontSize:"16px",cursor:"pointer"}},{default:l(()=>[u.iconUrl?(d(),m("img",{key:0,src:u.iconUrl,style:{width:"16px",height:"16px","object-fit":"cover","vertical-align":"middle"}},null,8,qe)):V("",!0),r(" "+_(u.label),1)]),_:2},1024)]))),128))])]),_:2},1032,["visible"])]),_:1}),a(c,{label:"",align:"center",width:"85"},{default:l(()=>[a(i,{type:"primary"},{default:l(()=>e[9]||(e[9]=[r("复制")])),_:1})]),_:1})]),_:1},8,["data"])),[[J,E.value]])])]),o("div",Oe,[o("div",null,[a(j,{modelValue:z.value,"onUpdate:modelValue":e[0]||(e[0]=n=>z.value=n),placeholder:F(te),onKeydown:Pe(R,["enter"]),clearable:"",class:"search-input",onInput:ae},{append:l(()=>[a(i,{type:"primary",onClick:R},{default:l(()=>[a(h,null,{default:l(()=>[a(F(we))]),_:1})]),_:1})]),_:1},8,["modelValue","placeholder"]),Q.value?Y((d(),S(g,{key:0,data:x.filteredItems,stripe:"",onRowClick:O,"cell-style":{cursor:"Pointer",fontSize:"large"}},{default:l(()=>[a(c,{prop:"barrage"},{default:l(n=>[a(s,{placement:"top",width:"auto",trigger:"hover","popper-class":Ke},{reference:l(()=>[o("div",je,[o("span",Ne,_(n.row.barrage),1)])]),default:l(()=>[o("div",Je,[(d(!0),m(k,null,M(H(n.row.tags),(u,y)=>(d(),m("div",{key:y,style:{"margin-right":"8px"}},[a(f,{round:"",effect:"dark",style:{fontSize:"16px",cursor:"pointer"}},{default:l(()=>[u.iconUrl?(d(),m("img",{key:0,src:u.iconUrl,style:{width:"16px",height:"16px","object-fit":"cover","vertical-align":"middle"}},null,8,We)):V("",!0),r(" "+_(u.label),1)]),_:2},1024)]))),128))])]),_:2},1024)]),_:1}),a(c,{align:"center",width:"100"},{default:l(n=>[a(i,{type:"primary",class:"copy-btn",onClick:xe(u=>ie(n.row),["stop"])},{default:l(()=>[e[10]||(e[10]=r("复制 🎈")),a(ke,{num:n.row.cnt},null,8,["num"])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[J,E.value]]):V("",!0)])]),o("div",Ye,[o("div",null,[o("span",null,[e[18]||(e[18]=r("可选标签 ")),e[19]||(e[19]=o("span",null,"———可以选择1~5个标签————",-1)),a(s,{width:300},{reference:l(()=>[a(h,{size:"16"},{default:l(()=>[a(N)]),_:1})]),default:l(()=>[e[11]||(e[11]=r(" 为解决烂梗分栏不足和分类不清晰问题。")),e[12]||(e[12]=o("br",null,null,-1)),e[13]||(e[13]=o("b",null,"点击标签即可添加",-1))]),_:1}),a(i,{link:"",type:"success",style:{"margin-left":"50%"}},{default:l(()=>[e[17]||(e[17]=r("投稿标签 ")),a(s,{width:300},{reference:l(()=>[a(h,{size:"16"},{default:l(()=>[a(ue)]),_:1})]),default:l(()=>[e[14]||(e[14]=o("b",null,"功能待完善(后续更新将添加)，请在上方(建议/提交)问卷投稿，sry。",-1)),e[15]||(e[15]=o("br",null,null,-1)),e[16]||(e[16]=o("b",null,"审核巨严格，(重复，相似等)将不通过",-1))]),_:1})]),_:1})]),o("div",Fe,[o("div",Ze,[(d(!0),m(k,null,M(C.value,(n,u)=>(d(),S(f,{round:"",key:u,closable:"",onClose:y=>X(n),onClick:y=>X(n),style:{padding:"15px",cursor:"pointer","font-size":"16px"},type:"primary"},{default:l(()=>[r(_(n.label),1)]),_:2},1032,["onClose","onClick"]))),128))])]),o("span",null,[e[21]||(e[21]=r("已选标签 ")),a(s,{width:250},{reference:l(()=>[a(h,{size:"16"},{default:l(()=>[a(N)]),_:1})]),default:l(()=>[e[20]||(e[20]=o("b",null,"最少一个标签，最多五个标签。",-1))]),_:1})]),o("div",$e,[(d(!0),m(k,null,M(T.value,(n,u)=>(d(),S(f,{round:"",key:u,closable:"",onClick:y=>L(n),onClose:y=>L(n),style:{padding:"15px",cursor:"pointer","font-size":"16px"},effect:"dark"},{default:l(()=>[r(_(n.label),1)]),_:2},1032,["onClick","onClose"]))),128))]),a(j,{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=n=>b.value=n),maxlength:"255",autocomplete:"off",autosize:{minRows:2,maxRows:4},"show-word-limit":"",type:"textarea",placeholder:" 烂梗...."},null,8,["modelValue"]),a(i,{class:"saveBnt",type:"primary",onClick:ee},{default:l(()=>e[22]||(e[22]=[r("投稿")])),_:1})]),a(de,{right:50,bottom:50})]),a(Te,{class:"ChatRoom card"}),e[24]||(e[24]=o("div",{class:"card sixth-card"},[r(" 友情链接 "),o("a",{href:"https://sb6657.cn",target:"_blank"},"sb6657.cn"),r("    "),o("a",{href:"https://dgq63136.cn/#/Starrysky",target:"_blank"},"星空背景")],-1))])],64)}}},bt=$(Ge,[["__scopeId","data-v-9314334c"]]);export{bt as default};
