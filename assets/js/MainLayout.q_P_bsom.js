var ot=Object.defineProperty;var lt=(A,n,s)=>n in A?ot(A,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):A[n]=s;var $=(A,n,s)=>lt(A,typeof n!="symbol"?n+"":n,s);import{e as J,f as xe,g as Ve,h as ke,d as Me,c as Z,v as at,j as ce,k as ne,l as Ae,m as De,n as re,a as F,E as G,o as st,p as Be,q as Te,r as Se,s as nt,t as rt,b as it,u as ut,w as dt}from"./element-plus.Td0FvVtG.js";import{d as le,bk as de,bK as Ue,r as d,c as k,o as C,R as e,J as t,K as N,I as L,O as S,P as Q,a as l,Q as X,a6 as se,L as oe,W as ie,C as ct,w as Ie,a4 as P,u as w,l as At,S as ee,k as we,al as te,j as W,i as Re,aU as mt,T as pt,E as ft}from"./@vue.kiFpFjC4.js";import{g as gt,s as vt,a as ht,b as wt}from"./getMeme.DkzLUt_F.js";import{R as Ke,j as Qe,M as _e}from"./@element-plus.CD6l22se.js";import{f as ze,t as Fe,u as me}from"./flip-num.B3UMpeBm.js";import{c as Ye,l as He,a as qe}from"./clipboard.D4cBlbDa.js";import{c as Pe,p as Oe}from"./setMeme.DUTxOFUJ.js";import{h as z,_ as q,s as _t,u as Et,r as bt,M as Ee,a as yt}from"./index.bsQbWADw.js";import{d as Le,s as Ct}from"./pinia.C1jrEj6N.js";import{a as H}from"./js-cookie.Cz0CWeBA.js";import{J as Je}from"./jsencrypt.BceYZi2u.js";import{C as xt}from"./CommunityNorms.CUOXHbp7.js";import{u as Ne,b as Vt}from"./vue-router.DfLJYrxF.js";import"./lodash-es.S0Y0Up6J.js";import"./@vueuse.DR1wJ5Y1.js";import"./@popperjs.D_chPuIy.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.BKG3DVjA.js";import"./async-validator.9PlIezaS.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.BQoi3Ox2.js";import"./@floating-ui.D0iZPv2f.js";import"./axios.NIGUFBhG.js";const kt="/favicon.ico",Mt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAA1xJREFUWEfFl0uMDFEUhv9zp+eWR8LCQiKqeojWVSQSkQhigYVHwkZibCSIMAssiYUEsfBYSohMhAmxQMTCI0YiZkMsSJDQ1Qymq82IRyzGI/qWqUNNjHT31DtE77ruf87/3XPvOdVN+M8fyuJfzmurPPZ0y3E7s8TXx2QCKBmtxwi0E8BDAEdMR13KCpIJwDbkAwDz6kzbs0JkBfgOQKvfNTOtsKq1W2krkRqglM8tIhZ3RxkRnkihlk9/jXdpIFID2Lo8CMLeIBNmPm5V3R3/FiAvH4MxJ8SkH2OVZZbxOSlEqgqUdG05EXdHJidsMCvq/D8BsHXtFIi3xCQ/bzpqw18HKOnaCiK+mSDxJ9NRk3zdC0POKjjqWVRMoiPwEw0B1wG0JQAAe97SnBDvPeAiiHYXK7UbYXGxAKWpuSUkxJ0kxiMaH4CE8E3HgvkDt7TMt/q+9wXliATIYh7cnrhiVdXaVAC+OYS4TsC4NLuP0K43HXWxeT2wAqW2MW3EXjcYM/+SOQC6azq1xYkAyoY8w8CmWHPmHhAtidX9FhB4Y9Fxz9brR1WgpLduIqIzMUk/C0aHB96WCoBxpdh0F0YBlHV5mQmBF2YYirmHPdFh9dee23rrnTQAfrjpqAbPhi8DUzBuMCe/Ruy+TD/U4uIAPvqaLF3CQkyrb8kGgFI+t5BY3AsFIN5iVtzT9euxFWtK5s8I682PnpHHDQB2fsw0sPcqBKDbdNTKoDXbkP64tZJcxkiAx5MxXtPkl5CBsb/oqANhJrYhOQnAkOC5s/vcR4EV8B+WDdnFwMbmZAK0ZqZTuxZlYhvSHzTrwjQM9FqOKkS2oZ3PLQOL281JmksXZPLc0FZ74KthAES8tVhxT0UC+Iu2IS8AaK8XJgF4Oguy5YushRxhV9FRm5vXQl9GtqGdBLjjz1kxby9W3RNRRzA8wj3vdYBm0HTUxBCw8JTPDHlUALuGFcw9ZtVdGgXwIp9bODS6jUO7x88V/3sg37qDmHYD0Jl5s1V1u8IgyoY8xMCe3+sDBHRGdU4igBGzsiH3/arDPsFUKFRrL0Pmgf9XbSIB5zTKdbZVvr2Na83YCjQn8EGEVIcLvWi4bP5zZjx6UlXX2oGhOOPQOZA0sF53fwYmLOjFYJbYn3WiRDAd4qVAAAAAAElFTkSuQmCC",Dt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAcpJREFUWEftlk1uwkAMhe3CJSoFCZbAIQq75BQNJyk9CXCKsCscgmbZSETqJUpdOcykMyaTECX8LMiKiMT+7HnPDsKNL7xxfngA3EcH0t16AQjhFfWQENGq+wRLTD/XHwAwuWLyPBURvTMAGcmTDtL0eRgklwD6jqP+gXBhFJxIAM57EQiV/EsWlgN0kAYHQj6OPkMQ0qw3DDZtdGIfRxM8xs4K5Nj6PgfwRj4qyn8IolVvHMybQBQl58L00VsAnKhNiDSOQjieOV8bb+RPdTFOAA3x8wshIr7xPau1bif2u2iu35fJOWYpQFMIa64QLL2xP5PHWAmgX7AqcQQzg5tzpaxzZwNwcNHOxBv5A1nRiceRZt4wWLoEXA/AttHJrCgaMFU2PhtA2kjNiaOfiVb8wxBbpnY16bL/XeI9C0Akz2zkmmh6wHQBEsNBTohKAMvDQnwMoZK8KJtuZaWmborEWApgia5CTGVTsgzCCWB6mJCmTfeB2UmzE4UAlodbSK67Y+lGHecJgKXeFjehgMgXnXYTLyPe0byC81XZtO0uXYhFlz2GYso12by1380+yQxLvRqdqB2s5gv5fLiPz/Ka9K0+/ujAzTvwBwY/rnW+YWzQAAAAAElFTkSuQmCC",Bt="data:image/png;base64,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",Tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB/lBMVEUAAAACAAAEAAAGAAADAAAFAAAKAAAHAAAQAAABAAACAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAAAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAADAAAEAAAEAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAABAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAADAAADAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAD///+W3QZCAAAAqHRSTlMAAAAAAAAAAAAAAQoWHBsBEjt6vtTd1bx8QBUPWMTy9MhcAS6w+Pm1MwJI2d5RAknk5wEy2+jO6f7r0OU1ELP8cJnh0crL0+PmnWsRVfc8BigiFCMqB2LC9kVKEj77aFJGzx6/lwG7eVvtMS/sIRvcJtJEEwu5BAOLCnaW8wXaw6DH/Yg0OZBee7fwHvH6c2XJkjbGFhlPUzjgOp8tK+rWuDUOxR0pzW3NoAbKAAAAAWJLR0SpJw8GBAAAAAd0SU1FB+gCEwk0EkntIW4AAAIlSURBVDjLY2AgATBycfPw8vFw8zNhk2XiFxAUEhYRFRUTl5CUwlDDxCQtIyu3AgrkFRQFmFlQ5JWUVVRXIAE1dQ0uJBVMmlraK9CAjq4e3BomVn2DFRjAUNcIagYLk7HJihWmZuYWMDkLSyvrFStEbZgYIQbY2q1YYe8greFo7eTs4urm7uFpY+sFVC3uzQIxwMcX6HA/Jhb/gMAgW1up4JBQJiYtoJt9w1hBKpgEwoGmRkSi+JwpSg0oqBANVhAD8n9sHKqCeJACuQSgIAuzEMhdiUmoCqSSQaIpqSwMTNxpIHens6KEHAtTRixQOJmbCajWDcjKzEILfKbsHKCwiBRQAa8OkGUQjK4g1x0oLMrHxMCSlw9keRSgKwgwBArn84GsKATFXwK6gqIIoLBVMVBBSSnIvZ5lqI4srwCJJleyMLCwVoGYHjHI3mBhS7AEiVYrAQ1mkqwBsZ0lyxDRW6tfB044+kzgoK5fkdPQ2GTe3CJVzgIynae1LRMcq67FTOAwaVeT7yjoXGHRJQ4KTpbu0h5IxPf2sYOtZRLoXOHbHzJBzX5iOchKTQlowhAWYIIG6yTRFZOnTJ02fQpEw4wesPzMWdAEw8DCMc3QfvacYmlNiIK55iD5eTIMcH8x6U0TtZg3f8FUJoQCJx89pLBjZFjYqbrCKQmuQE18lhJq/LMs6l/svASiYGn+suW2LOh5i4XTdm4oWJClsiWIi4WBagAAZejSV585JrMAAAAASUVORK5CYII=",St="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1745163196952'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='2577'%20data-spm-anchor-id='a313x.search_index.0.i2.58913a81ag2QCw'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='32'%20height='32'%3e%3cpath%20d='M898.96%20765.38h-77.17V418.11c0-154.94-114.87-283.22-263.85-305.05%200.11-1.26%200.73-2.35%200.73-3.63%200-25.16-20.4-45.56-45.56-45.56-25.16%200-45.56%2020.4-45.56%2045.56%200%201.29%200.63%202.37%200.73%203.63-148.98%2021.83-263.85%20150.11-263.85%20305.05v347.26h-77.17c-21.31%200-38.58%2017.28-38.58%2038.59s17.28%2038.59%2038.58%2038.59h252.75c9.46%2065.27%2065.25%20115.75%20133.1%20115.75s123.64-50.48%20133.1-115.75h252.75c21.31%200%2038.58-17.28%2038.58-38.59s-17.27-38.58-38.58-38.58zM513.11%20881.13c-25.15%200-46.61-16.13-54.58-38.58h109.16c-7.97%2022.45-29.43%2038.58-54.58%2038.58z%20m231.51-115.75H281.6V418.11c0-127.66%20103.85-231.51%20231.51-231.51s231.51%20103.85%20231.51%20231.51v347.27z'%20fill='%23e3d5b8'%20p-id='2578'%3e%3c/path%3e%3c/svg%3e",Ut=["onTouchstart","onTouchend"],It={class:"barrage-text"},Rt={style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},Kt=["src"],Qt={style:{"vertical-align":"middle"}},zt=le({__name:"meme-dialog",props:de({memeArr:{},loading:{type:Boolean},emptyText:{}},{modelValue:{},modelModifiers:{}}),emits:de(["refresh"],["update:modelValue"]),setup(A,{emit:n}){const s=Ue(A,"modelValue"),i=n,a=Fe(qe,He,2e3);async function b(p){const _=p.content,m=a(_);if(!(!m||m==="limitedSuccess")){if(Ye(),await Pe(p.category,p.id)){i("refresh");return}Oe()}}const y=d([]),f=()=>{z.get("/machine/dictList").then(p=>{p.code===200&&(y.value=p.data)}).catch(p=>{console.error("获取字典数据失败",p)})},h=p=>{if(!p||p.trim()==="")return[];const _=Array.from(new Set(p.split(",").map(g=>g.trim())));if(!y.value)return _.map(()=>({label:"",iconUrl:""}));const m=new Map(y.value.map(g=>[String(g.dictValue).trim(),g]));return _.map(g=>{const E=m.get(g);return E?{label:E.dictLabel,iconUrl:E.iconUrl}:{label:"",iconUrl:""}})};f();const M=p=>{p.touchStartTime=Date.now()},T=p=>{Date.now()-p.touchStartTime>100&&(p.popoverVisible=!0,setTimeout(()=>{p.popoverVisible=!1},1500))};return(p,_)=>{const m=ke,U=Ve,g=Me,E=Z,V=xe,v=J,u=at;return C(),k("div",null,[e(v,{draggable:"",modelValue:s.value,"onUpdate:modelValue":_[0]||(_[0]=o=>s.value=o),class:"dialog-main"},{header:t(()=>[ct(p.$slots,"default",{},void 0,!0)]),default:t(()=>[N((C(),L(V,{data:p.memeArr,stripe:"","empty-text":p.emptyText,"cell-class-name":"hover-pointer",onRowClick:b},{default:t(()=>[e(U,{align:"center",width:"60"},{default:t(o=>[e(m,{round:"",effect:"plain"},{default:t(()=>[S(Q(o.$index+1),1)]),_:2},1024)]),_:1}),e(U,{prop:"content"},{default:t(o=>[e(g,{placement:"top",width:"auto",trigger:"hover",visible:o.row.popoverVisible},{reference:t(()=>[l("div",{style:{cursor:"pointer"},onTouchstart:r=>M(o.row),onTouchend:r=>T(o.row)},[l("span",It,Q(o.row.content),1)],40,Ut)]),default:t(()=>[l("div",Rt,[(C(!0),k(X,null,se(h(o.row.tags),(r,x)=>(C(),k("div",{key:x,style:{"margin-right":"8px"}},[e(m,{round:"",effect:"dark",style:{fontSize:"16px",cursor:"pointer"}},{default:t(()=>[r.iconUrl?(C(),k("img",{key:0,src:r.iconUrl,style:{width:"16px",height:"16px","object-fit":"cover","vertical-align":"middle"}},null,8,Kt)):oe("",!0),l("span",Qt,Q(r.label),1)]),_:2},1024)]))),128))])]),_:2},1032,["visible"])]),_:1}),e(U,{align:"center",width:"100"},{default:t(o=>[e(E,{type:"primary",class:"copy-btn",onClick:ie(r=>b(o.row),["stop"])},{default:t(()=>[_[1]||(_[1]=S("复制 (",-1)),e(ze,{num:o.row.copyCount},null,8,["num"]),_[2]||(_[2]=S(")",-1))]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","empty-text"])),[[u,p.loading]])]),_:3},8,["modelValue"])])}}}),be=q(zt,[["__scopeId","data-v-4da6efc1"]]),We=Le("memeTags",()=>{const A=d([]);async function n(){const s=await gt();A.value=s}return{memeTags:A,setMemeTags:n}}),Ft=["innerHTML"],Yt={class:"popover-details"},Ht={class:"tag-list"},qt={class:"tag-icon-wrapper"},Pt=["src"],Ot={class:"tag-label"},Lt={class:"submit-time"},Jt=le({__name:"search-dialog",props:de({searchKey:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(A){const n=We(),{memeTags:s}=Ct(n),i=Ue(A,"modelValue"),a=A,b=d([]),y=d(!1),f=d("正在搜索中...坐和放宽...");async function h(g,E,V){const v=await vt(g,E,V);!v||v==="notfound"?(b.value=[],f.value="没有找到搜索结果。想要补充更多烂梗？请去首页投稿！"):b.value=v}Ie(()=>a.searchKey,async g=>{g===null||g===""||(y.value=!0,await h(a.searchKey),y.value=!1)},{immediate:!0});const M=Fe(qe,He,2e3);async function T(g){const E=M(g.content);if(!E||E==="limitedSuccess")return;Ye(),await Pe("",g.id)?await h(a.searchKey):Oe()}function p(g){if(!g||g.trim()==="")return[];const V=g.split(",").map(o=>o.trim()),v=[...new Set(V)];if(!s.value)return v.map(o=>({label:o,iconUrl:""}));const u=new Map(s.value.map(o=>[String(o.dictValue).trim(),o]));return v.map(o=>{const r=u.get(o);return r?{label:r.dictLabel,iconUrl:r.iconUrl}:{label:"未知标签",iconUrl:""}})}function _(g){return g?g.replace("T"," ").split(".")[0]:""}function m(g){return g.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function U(g,E){if(!g||!E)return"";const V=new RegExp(m(E),"gi");return g.replace(V,v=>`<span style="background-color: yellow">${v}</span>`)}return(g,E)=>{const V=ke,v=Ve,u=Me,o=Z,r=xe,x=J;return C(),k("div",null,[e(x,{draggable:"",modelValue:i.value,"onUpdate:modelValue":E[0]||(E[0]=D=>i.value=D),class:"dialog-main"},{header:t(()=>[...E[1]||(E[1]=[l("span",{class:"search-tips"},"烂梗搜索结果:",-1)])]),default:t(()=>[e(r,{data:b.value,stripe:"","empty-text":f.value,"cell-class-name":"hover-pointer"},{default:t(()=>[e(v,{align:"center",width:"60"},{default:t(D=>[e(V,{round:"",effect:"plain"},{default:t(()=>[S(Q(D.$index+1),1)]),_:2},1024)]),_:1}),e(v,{prop:"content"},{default:t(D=>[e(u,{placement:"top",width:"auto",trigger:"hover"},{reference:t(()=>[l("div",{class:"barrage-text",innerHTML:U(D.row.content,a.searchKey)},null,8,Ft)]),default:t(()=>[l("div",Yt,[l("div",Ht,[(C(!0),k(X,null,se(p(D.row.tags),I=>(C(),k("div",{key:I.label},[e(V,{round:"",effect:"dark",class:"tag-item"},{default:t(()=>[l("div",qt,[I.iconUrl?(C(),k("img",{key:0,src:I.iconUrl,class:"tag-icon"},null,8,Pt)):oe("",!0),l("span",Ot,Q(I.label),1)])]),_:2},1024)]))),128))]),l("div",Lt,"投稿时间: "+Q(_(D.row.submitTime)),1)])]),_:2},1024)]),_:1}),e(v,{align:"center",width:"100"},{default:t(D=>[e(o,{type:"primary",class:"copy-btn",onClick:ie(I=>T(D.row),["stop"])},{default:t(()=>[E[2]||(E[2]=S(" 复制 (",-1)),e(ze,{num:D.row.copyCount},null,8,["num"]),E[3]||(E[3]=S(") ",-1))]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","empty-text"])]),_:1},8,["modelValue"])])}}}),Nt=q(Jt,[["__scopeId","data-v-2a619bec"]]),Ge="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1569580729849'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='1939'%20width='200'%20height='200'%3e%3cdefs%3e%3cstyle%20type='text/css'%3e%3c/style%3e%3c/defs%3e%3cpath%20d='M513.3%20958.5c-142.2%200-397.9-222.1-401.6-440.5V268c1.7-39.6%2031.7-72.3%2071.1-77.3%2049-4.6%2097.1-16.5%20142.7-35.3%2047.8-14%2091.9-38.3%20129.4-71.1%2030.3-24.4%2072.9-26.3%20105.3-4.6%2039.9%2030.7%2083.8%2055.9%20130.5%2074.6%2048.6%2014.7%2098.2%2025.9%20148.4%2033.7%2038.5%207.6%2067.1%2040.3%2069.5%2079.5%203.3%2084.9%202.5%20169.9-2.6%20254.7-33.7%20281.6-253.7%20436.4-392.7%20436.3z%20m-0.1-813.7c-7.2-0.2-14.3%202-20%206.4-39.7%2035.2-86.8%2061.1-137.7%2075.7-46.8%2019.2-96.2%2031-146.6%2035.2-11%203.2-18.8%2013-19.5%2024.4v230.1c3.5%20180.3%20223.3%20361%20323.9%20361s287.3-120.2%20317.6-360.5c7.3-142.7%200-228.6%200-229.6-1.3-13.3-11-24.3-24-27.3-49.6-7.7-98.6-19-146.5-33.7-46.3-19.5-89.7-45.3-129-76.7-5.8-3.8-12.7-5.5-19.5-4.9l1.3-0.1z'%20fill='%23C6CCDA'%20p-id='1940'%3e%3c/path%3e%3cpath%20d='M750.1%20428L490.7%20673.2c-11.7%2011.1-29.5%2012.9-43.1%204.2l-6.8-5.8-141.2-149.4c-9.3-9.3-12.7-22.9-9-35.5%203.8-12.6%2014.1-22.1%2027-24.8%2012.9-2.7%2026.1%201.9%2034.6%2011.9L469%20597.5l233.7-221c14.6-12.8%2036.8-11.6%2049.9%202.7%2013.2%2014.2%2011.5%2035.3-2.5%2048.8'%20fill='%23C6CCDA'%20p-id='1941'%3e%3c/path%3e%3c/svg%3e",Wt=`MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAKoR8mX0rGKLqzcWmOzbfj64K8ZIgOdH
nzkXSOVOZbFu/TJhZ7rFAN+eaGkl3C4buccQd/EjEsj9ir7ijT7h96MCAwEAAQ==`,Gt=`MIIBVAIBADANBgkqhkiG9w0BAQEFAASCAT4wggE6AgEAAkEAqhHyZfSsYourNxaY
7Nt+PrgrxkiA50efORdI5U5lsW79MmFnusUA355oaSXcLhu5xxB38SMSyP2KvuKN
PuH3owIDAQABAkAfoiLyL+Z4lf4Myxk6xUDgLaWGximj20CUf+5BKKnlrK+Ed8gA
kM0HqoTt2UZwA5E2MzS4EI2gjfQhz5X28uqxAiEA3wNFxfrCZlSZHb0gn2zDpWow
cSxQAgiCstxGUoOqlW8CIQDDOerGKH5OmCJ4Z21v+F25WaHYPxCFMvwxpcw99Ecv
DQIgIdhDTIqD2jfYjPTY8Jj3EDGPbH2HHuffvflECt3Ek60CIQCFRlCkHpi7hthh
YhovyloRYsM+IS9h/0BzlEAuO0ktMQIgSPT3aFAgJYwKpqRYKlLDVcflZFCKY7u3
UP8iWi1Qw0Y=`;function Xt(A){const n=new Je;return n.setPublicKey(Wt),n.encrypt(A)}function Zt(A){const n=new Je;return n.setPrivateKey(Gt),n.decrypt(A)}const jt={key:0},$t={key:1},eo={class:"slider-container"},to={class:"slider-button"},oo={__name:"resetPassword",props:{closeDialog:{type:Function,required:!0}},setup(A){const n=A,s=d(),i=d({username:"",password:"",confirmPassword:"",emailCode:""}),b={username:[{required:!0,message:"请输入邮箱",trigger:"blur"},{pattern:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/,message:"请输入有效的邮箱地址",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入新密码"},{min:6,max:20,message:"密码长度必须介于 6 和 20 之间，且数字和英文混合",trigger:"blur"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,20}$/,message:"密码必须是数字和英文混合",trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:"请再次输入新密码"},{required:!0,validator:(v,u,o)=>{i.value.password!==u?o(new Error("两次输入的密码不一致")):o()},trigger:"blur"}],emailCode:[{required:!0,trigger:"change",message:"请输入邮箱验证码"}]},y=d(!1),f=d("发送邮箱验证码"),h=d(!1);let M=null;const T=d(!1),p=d(0),_=d(!1),m=d(!1);function U(){if(!i.value.username){F.info("请先输入邮箱");return}T.value=!0,p.value=0,_.value=!1,m.value=!1}function g(v){v===100&&(_.value=!0,m.value=!0,setTimeout(()=>{T.value=!1,E()},500))}function E(){if(!i.value.username){F.info("请先输入邮箱");return}h.value=!0;let v=10;f.value=`${v}分钟 后重试`,M=setInterval(()=>{v--,v<=0?(clearInterval(M),h.value=!1,f.value="发送邮箱验证码"):f.value=`邮箱中已有验证码，或请 ${v}分钟 后重试`},1e3*60*10),z.get("/login/getMailCode",{params:{toEMail:i.value.username}}).then(u=>{u.code===200?F.success("验证码已发送，请查收邮箱"):(G.alert(u.msg||"邮箱不存在！或其他错误，请联系开发者","系统提示",{confirmButtonText:"OK"}),clearInterval(M),h.value=!1,f.value="发送邮箱验证码")}).catch(()=>{clearInterval(M),h.value=!1,f.value="发送邮箱验证码"})}function V(){s.value.validate(v=>{v&&(y.value=!0,z.post("/resetPassword",i.value).then(u=>{u.code===200?G.alert("密码重置成功！请使用新密码登录","系统提示",{type:"success"}).then(()=>{n.closeDialog()}).catch(()=>{}):(F.error(u.msg),y.value=!1)}).catch(u=>{G.alert(u.message,"系统提示",{type:"success"}),y.value=!1}))})}return(v,u)=>{const o=Z,r=ne,x=ce,D=Ae,I=re,O=De,Y=J;return C(),k("div",null,[e(D,{ref_key:"resetPasswordRef",ref:s,model:i.value,rules:b,class:"reset-form"},{default:t(()=>[u[7]||(u[7]=l("h3",{class:"title"},"重置密码",-1)),e(x,{prop:"username"},{default:t(()=>[e(r,{modelValue:i.value.username,"onUpdate:modelValue":u[0]||(u[0]=B=>i.value.username=B),type:"text",size:"large",clearable:"","prefix-icon":"Avatar","auto-complete":"off",placeholder:"请输入注册邮箱"},{append:t(()=>[e(o,{type:"primary",disabled:h.value,size:"small",style:{padding:"0","font-weight":"500"},onClick:U},{default:t(()=>[...u[6]||(u[6]=[S("发送邮箱验证码",-1)])]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),e(x,{prop:"emailCode"},{default:t(()=>[e(r,{modelValue:i.value.emailCode,"onUpdate:modelValue":u[1]||(u[1]=B=>i.value.emailCode=B),type:"text",maxlength:"4",size:"large",clearable:"",placeholder:"请输入邮箱验证码"},null,8,["modelValue"])]),_:1}),e(x,{prop:"password"},{default:t(()=>[e(r,{modelValue:i.value.password,"onUpdate:modelValue":u[2]||(u[2]=B=>i.value.password=B),type:"password",size:"large","show-password":"","prefix-icon":"Lock","auto-complete":"off",placeholder:"新密码",onKeyup:P(V,["enter"])},null,8,["modelValue"])]),_:1}),e(x,{prop:"confirmPassword"},{default:t(()=>[e(r,{modelValue:i.value.confirmPassword,"onUpdate:modelValue":u[3]||(u[3]=B=>i.value.confirmPassword=B),type:"password",size:"large","show-password":"","prefix-icon":"Lock","auto-complete":"off",placeholder:"确认新密码",onKeyup:P(V,["enter"])},null,8,["modelValue"])]),_:1}),e(x,{style:{width:"100%"}},{default:t(()=>[e(o,{loading:y.value,size:"large",type:"primary",style:{width:"100%"},onClick:ie(V,["prevent"])},{default:t(()=>[y.value?(C(),k("span",$t,"重置中...")):(C(),k("span",jt,"重置密码"))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),e(Y,{modelValue:T.value,"onUpdate:modelValue":u[5]||(u[5]=B=>T.value=B),title:"安全验证",width:"300px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},{default:t(()=>[l("div",eo,[u[8]||(u[8]=l("div",{class:"slider-text"},"请滑动至最右侧完成验证",-1)),e(O,{modelValue:p.value,"onUpdate:modelValue":u[4]||(u[4]=B=>p.value=B),min:0,max:100,step:1,"show-tooltip":!1,disabled:_.value,onChange:g},{button:t(()=>[l("div",to,[m.value?(C(),L(I,{key:1},{default:t(()=>[e(w(Qe))]),_:1})):(C(),L(I,{key:0},{default:t(()=>[e(w(Ke))]),_:1}))])]),_:1},8,["modelValue","disabled"])])]),_:1},8,["modelValue"])])}}},lo=q(oo,[["__scopeId","data-v-36784b01"]]),ao={class:"login-box"},so={class:"login-code"},no=["src"],ro={key:0},io={key:1},uo={__name:"login",props:{onRegister:{type:Function,required:!0},closeDialog:{type:Function,required:!0}},setup(A){const n=A,s=d(""),i=d(!1),a=d({username:"",password:"",rememberMe:!1,code:"",uuid:""}),b=At({username:[{required:!0,message:"请输入邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"change"}]}),y=d(),f=d(!1),h=me(),M=d("400px");function T(){h.value&&(M.value="95%")}T();function p(){y.value.validate(u=>{u&&(i.value=!0,a.value.rememberMe?(H.set("username",a.value.username,{expires:525600}),H.set("password",Xt(a.value.password),{expires:525600}),H.set("rememberMe",a.value.rememberMe,{expires:525600})):(H.remove("username"),H.remove("password"),H.remove("rememberMe")),z.post("/login",a.value).then(o=>{o.code===200?(F.success("登录成功"),_t(o.token,o.refreshToken,15*24*60*60),E()):(i.value=!1,F.error(o.msg))}).catch(()=>{i.value=!1,_.value&&m()}))})}const _=d(!0);function m(){z.get("/captchaImage").then(u=>{_.value=u.captchaEnabled===void 0?!0:u.captchaEnabled,_.value&&(s.value="data:image/gif;base64,"+u.img,a.value.uuid=u.uuid)})}function U(){const u=H.get("username"),o=H.get("password"),r=H.get("rememberMe");a.value={username:u===void 0?a.value.username:u,password:o===void 0?a.value.password:Zt(o),rememberMe:r===void 0?!1:!!r}}U(),m();function g(){typeof n.onRegister=="function"?n.onRegister():console.error("onRegister is not a function")}function E(){n.closeDialog()}function V(){f.value=!0}function v(){f.value=!1}return(u,o)=>{const r=ne,x=ce,D=st,I=Z,O=Ae,Y=J;return C(),k("div",null,[l("div",ao,[o[7]||(o[7]=l("div",{class:"title"},"登 录",-1)),e(O,{model:a.value,ref_key:"formRef",ref:y,rules:b},{default:t(()=>[e(x,{prop:"username"},{default:t(()=>[e(r,{"prefix-icon":"Avatar",size:"large",clearable:"",modelValue:a.value.username,"onUpdate:modelValue":o[0]||(o[0]=B=>a.value.username=B),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),e(x,{prop:"password"},{default:t(()=>[e(r,{"show-password":"",size:"large","prefix-icon":"Lock",modelValue:a.value.password,"onUpdate:modelValue":o[1]||(o[1]=B=>a.value.password=B),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),e(x,{prop:"code"},{default:t(()=>[e(r,{modelValue:a.value.code,"onUpdate:modelValue":o[2]||(o[2]=B=>a.value.code=B),size:"large",clearable:"","auto-complete":"off",placeholder:"请输入验证码",style:{width:"63%"}},{prefix:t(()=>[...o[5]||(o[5]=[l("img",{src:Ge,style:{width:"16px"}},null,-1)])]),_:1},8,["modelValue"]),l("div",so,[l("img",{src:s.value,onClick:m,class:"login-code-img",onKeyup:P(p,["enter"])},null,40,no)])]),_:1}),e(D,{modelValue:a.value.rememberMe,"onUpdate:modelValue":o[3]||(o[3]=B=>a.value.rememberMe=B),style:{margin:"0px 0px 5px 0px"}},{default:t(()=>[...o[6]||(o[6]=[S("记住密码",-1)])]),_:1},8,["modelValue"]),l("span",{style:{"margin-left":"35%",cursor:"pointer",color:"blue"},onClick:g},"还没有账号？去注册 >"),l("span",{style:{"margin-left":"75%",cursor:"pointer",color:"blue"},onClick:V},"重置密码 >"),e(x,null,{default:t(()=>[e(I,{loading:i.value,type:"primary",style:{width:"100%"},onClick:p},{default:t(()=>[i.value?(C(),k("span",io,"登 录 中...")):(C(),k("span",ro,"登 录"))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]),e(Y,{"align-center":!0,modelValue:f.value,"onUpdate:modelValue":o[4]||(o[4]=B=>f.value=B),draggable:!0,width:M.value,modal:!1,"append-to-body":!0},{default:t(()=>[N(e(lo,{closeDialog:v},null,512),[[ee,f.value]])]),_:1},8,["modelValue","width"])])}}},co=q(uo,[["__scopeId","data-v-099e7136"]]),Ao={class:"register-code"},mo=["src"],po={key:0},fo={key:1},go={class:"slider-container"},vo={class:"slider-button"},ho={__name:"register",setup(A){const n=d(),s=d({username:"",nickName:"",password:"",confirmPassword:"",code:"",uuid:"",emailCode:""}),a={username:[{required:!0,message:"请输入邮箱",trigger:"blur"},{pattern:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/,message:"请输入有效的邮箱地址",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"},{min:6,max:20,message:"用户密码长度必须介于 6 和 20 之间，且数字和英文混合",trigger:"blur"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,20}$/,message:"密码必须是数字和英文混合",trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:"请再次输入您的密码"},{required:!0,validator:(o,r,x)=>{s.value.password!==r?x(new Error("两次输入的密码不一致")):x()},trigger:"blur"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}],emailCode:[{required:!0,trigger:"change",message:"请输入邮箱验证码"}]},b=d(""),y=d(!1),f=d(!0),h=d("发送邮箱验证码"),M=d(!1);let T=null;const p=d(!1),_=d(0),m=d(!1),U=d(!1);function g(){if(!s.value.username){F.info("请先输入邮箱");return}p.value=!0,_.value=0,m.value=!1,U.value=!1}function E(o){o===100&&(m.value=!0,U.value=!0,setTimeout(()=>{p.value=!1,V()},500))}function V(){if(!s.value.username){F.info("请先输入邮箱");return}M.value=!0;let o=10;h.value=`${o}分钟 后重试`,T=setInterval(()=>{o--,o<=0?(clearInterval(T),M.value=!1,h.value="发送邮箱验证码"):h.value=`邮箱中已有验证码，或请 ${o}分钟 后重试`},1e3*60*10),z.get("/login/getMailCode",{params:{toEMail:s.value.username}}).then(r=>{r.code===200?F.success("验证码已发送，请查收邮箱"):(G.alert(r.msg||"邮箱不存在！ 或其他错误，请联系开发者","系统提示",{confirmButtonText:"OK"}),clearInterval(T),M.value=!1,h.value="发送邮箱验证码")}).catch(()=>{clearInterval(T),M.value=!1,h.value="发送邮箱验证码"})}function v(){n.value.validate(o=>{o&&(y.value=!0,z.post("/register",s.value).then(r=>{const x=s.value.username;r.code===200?G.alert("<font color='red'>恭喜你，您的账号 "+x+" 注册成功！</font>","系统提示",{dangerouslyUseHTMLString:!0,type:"success"}).then(()=>{}).catch(()=>{}):(F.error(r.msg),y.value=!1,f&&u())}).catch(()=>{y.value=!1,f&&u()}))})}function u(){z.get("/captchaImage").then(o=>{f.value=o.captchaEnabled===void 0?!0:o.captchaEnabled,f.value&&(b.value="data:image/gif;base64,"+o.img,s.value.uuid=o.uuid)})}return u(),(o,r)=>{const x=Z,D=ne,I=ce,O=Ae,Y=re,B=De,R=J;return C(),k("div",null,[e(O,{ref_key:"registerRef",ref:n,model:w(s),rules:a,class:"register-form"},{default:t(()=>[r[10]||(r[10]=l("h3",{class:"title"},"注册",-1)),e(I,{prop:"username"},{default:t(()=>[e(D,{modelValue:w(s).username,"onUpdate:modelValue":r[0]||(r[0]=c=>w(s).username=c),type:"text",size:"large",clearable:"","prefix-icon":"Avatar","auto-complete":"off",placeholder:"邮箱-用于登录"},{append:t(()=>[e(x,{type:"primary",disabled:w(M),size:"small",style:{padding:"0","font-weight":"500"},onClick:g},{default:t(()=>[...r[8]||(r[8]=[S("发送邮箱验证码",-1)])]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),e(I,null,{default:t(()=>[e(D,{modelValue:w(s).nickName,"onUpdate:modelValue":r[1]||(r[1]=c=>w(s).nickName=c),type:"text",maxlength:"10",size:"large",clearable:"",placeholder:"昵称--平台昵称--后续不可更改"},null,8,["modelValue"])]),_:1}),e(I,{prop:"emailCode"},{default:t(()=>[e(D,{modelValue:w(s).emailCode,"onUpdate:modelValue":r[2]||(r[2]=c=>w(s).emailCode=c),type:"text",maxlength:"4",size:"large",clearable:"",placeholder:"请输入邮箱验证码"},null,8,["modelValue"])]),_:1}),e(I,{prop:"password"},{default:t(()=>[e(D,{modelValue:w(s).password,"onUpdate:modelValue":r[3]||(r[3]=c=>w(s).password=c),type:"password",size:"large","show-password":"","prefix-icon":"Lock","auto-complete":"off",placeholder:"密码",onKeyup:P(v,["enter"])},null,8,["modelValue"])]),_:1}),e(I,{prop:"confirmPassword"},{default:t(()=>[e(D,{modelValue:w(s).confirmPassword,"onUpdate:modelValue":r[4]||(r[4]=c=>w(s).confirmPassword=c),type:"password",size:"large","show-password":"","prefix-icon":"Lock","auto-complete":"off",placeholder:"确认密码",onKeyup:P(v,["enter"])},null,8,["modelValue"])]),_:1}),w(f)?(C(),L(I,{key:0,prop:"code"},{default:t(()=>[e(D,{size:"large",modelValue:w(s).code,"onUpdate:modelValue":r[5]||(r[5]=c=>w(s).code=c),"auto-complete":"off",clearable:"",placeholder:"请输入右侧验证码",style:{width:"63%"},onKeyup:P(v,["enter"])},{prefix:t(()=>[...r[9]||(r[9]=[l("img",{src:Ge,style:{width:"16px"}},null,-1)])]),_:1},8,["modelValue"]),l("div",Ao,[l("img",{src:w(b),onClick:u,class:"register-code-img"},null,8,mo)])]),_:1})):oe("",!0),e(I,{style:{width:"100%"}},{default:t(()=>[e(x,{loading:w(y),size:"large",type:"primary",style:{width:"100%"},onClick:ie(v,["prevent"])},{default:t(()=>[w(y)?(C(),k("span",fo,"注 册 中...")):(C(),k("span",po,"注 册"))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),e(R,{modelValue:w(p),"onUpdate:modelValue":r[7]||(r[7]=c=>we(p)?p.value=c:null),title:"安全验证",width:"300px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},{default:t(()=>[l("div",go,[r[11]||(r[11]=l("div",{class:"slider-text"},"请滑动至最右侧完成验证",-1)),e(B,{modelValue:w(_),"onUpdate:modelValue":r[6]||(r[6]=c=>we(_)?_.value=c:null),min:0,max:100,step:1,"show-tooltip":!1,disabled:w(m),onChange:E},{button:t(()=>[l("div",vo,[w(U)?(C(),L(Y,{key:1},{default:t(()=>[e(w(Qe))]),_:1})):(C(),L(Y,{key:0},{default:t(()=>[e(w(Ke))]),_:1}))])]),_:1},8,["modelValue","disabled"])])]),_:1},8,["modelValue"])])}}},wo=q(ho,[["__scopeId","data-v-a2f56577"]]),_o={class:"avatar-wrapper"},Eo=["innerHTML"],bo={__name:"userHome",setup(A){const n=Et(),s=d(!1),i=d(!1),a=me(),b=d(!1);function y(){s.value=!0,i.value=!1}let f="400px";function h(){a.value&&(f="95%")}h();function M(){G.confirm("确定退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{bt()}).catch(()=>{})}function T(){s.value=!1,i.value=!0}function p(){s.value=!1}return Ie(()=>n.loginVisible,_=>{s.value=_}),(_,m)=>{const U=te("User"),g=re,E=te("caret-bottom"),V=Te,v=te("router-link"),u=Be,o=Se,r=J;return C(),k(X,null,[e(o,{onCommand:_.handleCommand,class:"right-menu-item hover-effect",trigger:"hover"},{dropdown:t(()=>[e(u,null,{default:t(()=>[e(v,{to:"/me-post"},{default:t(()=>[e(V,null,{default:t(()=>[...m[4]||(m[4]=[S("我的帖子",-1)])]),_:1})]),_:1}),e(v,{to:"/me-memes"},{default:t(()=>[e(V,null,{default:t(()=>[...m[5]||(m[5]=[S("我的投稿",-1)])]),_:1})]),_:1}),N(e(V,{command:"login",divided:""},{default:t(()=>[l("span",{onClick:y},"登录/注册")]),_:1},512),[[ee,!w(z)]]),e(v,{to:"/userInfo"},{default:t(()=>[e(V,null,{default:t(()=>[...m[6]||(m[6]=[S("个人中心",-1)])]),_:1})]),_:1}),e(V,{command:"login"},{default:t(()=>[l("span",{onClick:m[0]||(m[0]=x=>b.value=!0)},"隐私政策")]),_:1}),N(e(V,{divided:"",command:"logout"},{default:t(()=>[l("span",{onClick:M},"退出登录")]),_:1},512),[[ee,w(z)]])]),_:1})]),default:t(()=>[l("div",_o,[e(g,{size:"32"},{default:t(()=>[e(U)]),_:1}),e(g,null,{default:t(()=>[e(E)]),_:1})])]),_:1},8,["onCommand"]),e(r,{"align-center":!0,modelValue:s.value,"onUpdate:modelValue":m[1]||(m[1]=x=>s.value=x),draggable:!0,width:w(f),modal:!1,"append-to-body":!0},{default:t(()=>[N(e(co,{onRegister:T,closeDialog:p},null,512),[[ee,s.value]])]),_:1},8,["modelValue","width"]),e(r,{"align-center":!0,modelValue:i.value,"onUpdate:modelValue":m[2]||(m[2]=x=>i.value=x),draggable:!0,width:w(f),modal:!1,"append-to-body":!0},{default:t(()=>[N(e(wo,null,null,512),[[ee,i.value]])]),_:1},8,["modelValue","width"]),e(r,{modelValue:b.value,"onUpdate:modelValue":m[3]||(m[3]=x=>b.value=x),title:"社区规范与隐私政策",style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",margin:"auto"},width:w(f),modal:!1,"append-to-body":!0},{default:t(()=>[l("div",{innerHTML:w(xt)},null,8,Eo)]),_:1},8,["modelValue","width"])],64)}}},yo=q(bo,[["__scopeId","data-v-4dbc1f65"]]),Co={class:"header"},xo={class:"header-content"},Vo={class:"logo-link"},ko={class:"elinput-mobile"},Mo={class:"header-actions"},Do={class:"elinput"},Bo={class:"user-message"},To={class:"unread-badge"},So={class:"icon-img"},Uo={class:"dialog-header"},Io={class:"dialog-header"},ye="我还没有加载完喔~~",Ro="https://cdn.hguofichp.cn/power.png",Ko=le({__name:"header-bar",setup(A){const n=me(),s=Ne(),i=d(!1),a=d(!1),b=d([]),y=d(!0),f=d(!0);async function h(){const R=await ht();R&&(b.value=R,y.value=!1)}function M(){a.value=!0,T.value=!1,y.value=!0,h()}const T=d(!1),p=d([]),_=d(!0);async function m(){const R=await wt();R&&(p.value=R,_.value=!1)}function U(){a.value=!1,T.value=!0,_.value=!0,m()}const g=W(()=>!(n.value&&s.path!=="/home"));h();const E=d(0);setInterval(()=>{const R=b.value.length;E.value=(E.value+1)%R},5e3);const V=d(""),v=d(""),u=d(!1);function o(){u.value=!0,v.value=V.value}const r=W(()=>n.value?"100%":"35%");W(()=>n.value?"90%":"35%");const x=d(0),D=d(0),I=W(()=>x.value+D.value),O=d(!1);async function Y(){try{const R=await z.get("/machine/SysMessage/getMsgNum");R.code===200&&(x.value=R.data.likeAndStatementNum,D.value=R.data.commentNum,O.value=R.data.readFlag)}catch(R){console.error("获取消息数量失败:",R)}}Re(()=>{Y(),setInterval(()=>{Y()},10*60*1e3),setTimeout(()=>{i.value=!0,setInterval(()=>{i.value=!0},2*60*60*1e3)},60*60*1e3),setTimeout(()=>{f.value=!1},5e3)});const B=()=>{window.open("https://www.wjx.cn/vm/rQUgnS0.aspx#")};return d(!1),(R,c)=>{const pe=re,j=Z,fe=ne,ge=nt,Ze=rt,ve=Te,je=te("router-link"),$e=Be,et=Se,tt=J;return C(),k("div",Co,[l("div",xo,[l("div",Vo,[c[8]||(c[8]=l("a",{href:"https://www.douyu.com/6657",target:"_blank"},[l("img",{src:kt,alt:"大🐖头",class:"logo-img"}),l("p",{class:"header-title"},"斗鱼玩机器烂梗库")],-1)),l("div",ko,[e(fe,{modelValue:V.value,"onUpdate:modelValue":c[0]||(c[0]=K=>V.value=K),placeholder:"搜索烂梗",clearable:"",onKeydown:P(o,["enter"])},{append:t(()=>[e(j,{type:"primary",onClick:o},{default:t(()=>[e(pe,null,{default:t(()=>[e(w(_e))]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),l("div",Mo,[g.value?(C(),k("img",{key:0,src:Mt,alt:"热门",class:"hot-barrage-img",onClick:M})):oe("",!0),g.value?(C(),k("div",{key:1,onClick:M,class:"hot-barrage"},[e(pt,{name:"fade"},{default:t(()=>{var K,he;return[(C(),k("span",{key:E.value,class:"hot-barrage-span"},"热门："+Q(((he=(K=b.value)==null?void 0:K[E.value])==null?void 0:he.content)||""),1))]}),_:1})])):oe("",!0),l("div",Do,[e(fe,{modelValue:V.value,"onUpdate:modelValue":c[1]||(c[1]=K=>V.value=K),placeholder:"搜索烂梗",clearable:"",onKeydown:P(o,["enter"])},{append:t(()=>[e(j,{type:"primary",onClick:o},{default:t(()=>[e(pe,null,{default:t(()=>[e(w(_e))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e(j,{type:"primary",onClick:B,class:"complaint-button"},{default:t(()=>[...c[9]||(c[9]=[S(" 上传照片",-1),l("br",null,null,-1),S(" 建议/提交BUG ",-1)])]),_:1}),e(ge,{effect:"light",content:"接程序设计，广告，商务，详情联系邮箱 he20020928@foxmail.com",placement:"bottom"},{default:t(()=>[...c[10]||(c[10]=[l("img",{src:Dt,alt:"heihei",class:"icon-container icon-img"},null,-1)])]),_:1}),c[12]||(c[12]=mt('<a class="icon-container" href="https://sb6657.cn/#/Tampermonkey" data-v-6ccfaeec><img src="https://pic.imgdb.cn/item/6704f830d29ded1a8c738f70.png" alt="油猴" class="icon-img" data-v-6ccfaeec></a><a class="icon-container" href="https://yuba.douyu.com/feed/2639094748291342931" target="_blank" data-v-6ccfaeec><img src="'+Bt+'" alt="douyu" class="icon-img" data-v-6ccfaeec></a><a class="icon-container" href="https://github.com/SEhzm/sb6657/" target="_blank" data-v-6ccfaeec><img src="'+Tt+'" alt="github" class="icon-img" data-v-6ccfaeec></a>',3)),e(ge,{visible:f.value,"onUpdate:visible":c[3]||(c[3]=K=>f.value=K),content:"如果你喜欢这个网站，可以点我进行赞赏或GitHub点个star~",placement:"bottom",effect:"light"},{default:t(()=>[e(Ze,{class:"icon-container icon-img",src:Ro,fit:"cover",onClick:c[2]||(c[2]=K=>i.value=!0)})]),_:1},8,["visible"]),e(et,{trigger:"hover"},{dropdown:t(()=>[e($e,null,{default:t(()=>[e(je,{to:"/me-msg"},{default:t(()=>[e(ve,null,{default:t(()=>[S(" 评论 ("+Q(D.value)+") ",1)]),_:1}),e(ve,null,{default:t(()=>[S(" 赞和表态 ("+Q(x.value)+") ",1)]),_:1})]),_:1})]),_:1})]),default:t(()=>[l("div",Bo,[c[11]||(c[11]=l("div",{class:"message-icon"},[l("img",{src:St,alt:"msg"}),l("div",null,"消息")],-1)),l("span",To,Q(I.value||"0"),1)])]),_:1}),l("div",So,[e(yo)])])]),e(be,{modelValue:a.value,"onUpdate:modelValue":c[4]||(c[4]=K=>a.value=K),memeArr:b.value,loading:y.value,emptyText:ye,onRefresh:h},{default:t(()=>[l("div",Uo,[c[14]||(c[14]=l("div",null,"24h热门烂梗",-1)),l("div",null,[e(j,{onClick:U},{default:t(()=>[...c[13]||(c[13]=[S("查看近七天热门",-1)])]),_:1})])])]),_:1},8,["modelValue","memeArr","loading"]),e(be,{modelValue:T.value,"onUpdate:modelValue":c[5]||(c[5]=K=>T.value=K),memeArr:p.value,loading:_.value,emptyText:ye,onRefresh:m},{default:t(()=>[l("div",Io,[c[16]||(c[16]=l("div",null,"七天热门烂梗",-1)),l("div",null,[e(j,{onClick:M},{default:t(()=>[...c[15]||(c[15]=[S("查看近24h热门",-1)])]),_:1})])])]),_:1},8,["modelValue","memeArr","loading"]),e(Nt,{modelValue:u.value,"onUpdate:modelValue":c[6]||(c[6]=K=>u.value=K),searchKey:v.value},null,8,["modelValue","searchKey"]),e(tt,{modelValue:i.value,"onUpdate:modelValue":c[7]||(c[7]=K=>i.value=K),title:"谢谢你",width:r.value},{default:t(()=>[...c[17]||(c[17]=[l("img",{src:"http://cdn.hguofichp.cn/zfb.jpg",alt:"",width:"100%"},null,-1)])]),_:1},8,["modelValue","width"])])}}}),Qo=q(Ko,[["__scopeId","data-v-6ccfaeec"]]),zo={class:"footer"},Fo={class:"content"},Yo={class:"date-font"},Ho=le({__name:"footer-bar",setup(A){const n=d(0),s=new Date("2026-02-16"),i=new Date;n.value=Math.ceil((s.getTime()-i.getTime())/(1e3*3600*24));const a=new Date("2024-02-07"),b=W(()=>{const f=new Date().getTime()-a.getTime();return Math.floor(f/(1e3*60*60*24))});return(y,f)=>(C(),k("div",zo,[l("div",Fo,[l("div",Yo,[f[0]||(f[0]=S("距服务器到期还有",-1)),l("span",null,Q(n.value),1),f[1]||(f[1]=S("天",-1))]),l("div",null,[f[2]||(f[2]=l("a",{href:"https://ipw.cn/ipv6webcheck/?site=sb6657.cn",title:"",target:"_blank",style:{color:"black"}},[l("img",{style:{display:"inline-block","vertical-align":"middle",width:"150px"},alt:"",src:"https://static.ipw.cn/icon/ipv6-s5.svg"})],-1)),S(" 本站已运行"+Q(b.value)+"天 ",1)])])]))}}),qo=q(Ho,[["__scopeId","data-v-c95cf16c"]]),Xe=Le("guibin",{state:()=>({Oni:""}),actions:{updateOni(A){this.Oni=A}}}),Po=Xe();class Oo{constructor(n,s){$(this,"timer",null);$(this,"ws",null);$(this,"rid");$(this,"msgHandler");this.rid=n,this.msgHandler=s,"WebSocket"in window&&this.connect()}connect(){const n=Jo(2,5);this.ws=new WebSocket(`wss://danmuproxy.douyu.com:850${n}`),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{this.ws.send(ue(`type@=loginreq/roomid@=${this.rid}`)),this.ws.send(ue(`type@=joingroup/rid@=${this.rid}/gid@=-9999/`)),this.timer=window.setInterval(()=>{this.ws.send(ue("type@=mrkl/"))},4e4)},this.ws.onerror=()=>{this.close()},this.ws.onmessage=s=>{const i=new FileReader;i.onload=()=>{const a=String(i.result).split("\0");for(let b=0;b<a.length;b++)a[b].length>12&&this.msgHandler(a[b])},i.readAsText(new Blob([s.data]))},this.ws.onclose=()=>{this.close(),this.reconnect()}}reconnect(){setTimeout(()=>{this.connect()},3e3)}close(){this.timer!==null&&(clearInterval(this.timer),this.timer=null),this.ws&&(this.ws.close(),this.ws=null)}}function ue(A){let s=Lo(A);const i=s.length+4+4+2+1+1+1,a=new Uint8Array(i),b=new Uint8Array(s.length);for(let h=0;h<b.length;h++)b[h]=s[h];const y=new Uint32Array([s.length+4+2+1+1+1]),f=new Uint32Array([689]);return a.set(new Uint8Array(y.buffer),0),a.set(new Uint8Array(y.buffer),4),a.set(new Uint8Array(f.buffer),8),a.set(b,12),a}function Lo(A){const n=[],s=A.length;for(let i=0;i<s;i++){const a=A.charCodeAt(i);a>=65536&&a<=1114111?(n.push(a>>18&7|240),n.push(a>>12&63|128),n.push(a>>6&63|128),n.push(a&63|128)):a>=2048&&a<=65535?(n.push(a>>12&15|224),n.push(a>>6&63|128),n.push(a&63|128)):a>=128&&a<=2047?(n.push(a>>6&31|192),n.push(a&63|128)):n.push(a&255)}return n}function Jo(A,n){return Math.floor(Math.random()*(n-A+1))+A}function ae(A,n,s){const i=A.indexOf(n);if(i===-1)return"";const a=A.indexOf(s,i+n.length);return a===-1?"":A.substring(i+n.length,a)}function No(A){const n=A.match(/type@=(.*?)(\/|@)/),s=ae(A,"oni/vn@=","/");if(s&&Po.updateOni(s),n&&n[1]==="rss"){ae(A,"rid@=","/");const i=ae(A,"ss@=","/"),a=ae(A,"ivl@=","/");console.log(i),i==="1"&&a==="0"&&Wo()}}function Wo(){if(!("Notification"in window)){alert("当前浏览器不支持开播通知");return}Notification.permission!=="granted"?Notification.requestPermission().then(A=>{A==="granted"?Ce():alert("你拒绝了通知权限，无法收到开播通知，请在网址左侧打开权限")}):Ce()}function Ce(){const A=new Notification("来自sb6657.cn开播提醒",{body:"6657直播间已开播，快去观看吧！"});A.onclick=()=>{window.focus(),window.open("https://www.douyu.com/6657","_blank")}}const Go={class:"tab"},Xo={class:"tab-container"},Zo=["onClick"],jo={class:"main-content"},$o={class:"sidebar"},el={class:"sidebar-icon"},tl=["src"],ol={class:"content"},ll={href:"https://github.com/SEhzm/sb6657/blob/master/%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97.md",target:"_blank"},al={class:"version"},sl={class:"GuiBin"},nl=le({__name:"MainLayout",setup(A){const n=Ne(),s=Vt(),i=Xe();We().setMemeTags();const b=W(()=>i.Oni),y=d();Re(()=>{const h=document.querySelector("#global-loading");h&&(h.classList.add("fade-out"),setTimeout(()=>h.remove(),500)),y.value=new Oo(6979222,No),it({title:"来自sb6657.cn",dangerouslyUseHTMLString:!0,message:"现已推出造梗Ai（Demo），欢迎使用<br><b>Ai费用不低，请酌情使用~</b>",position:"bottom-left",type:"success",duration:1e4})});function f(h){s.push(h)}return(h,M)=>{const T=ut,p=dt,_=te("router-view");return C(),k(X,null,[l("div",null,[e(Qo),l("div",Go,[l("div",Xo,[(C(!0),k(X,null,se(w(Ee),(m,U)=>(C(),k("div",{class:ft(`tab1 ${m.path===w(n).path?"selected":"none"}`),key:m.path,onClick:g=>f(m.path)},Q(m.text),11,Zo))),128))])]),l("div",jo,[l("div",$o,[e(p,{router:"",class:"sidebar-el-menu","default-active":h.$route.path},{default:t(()=>[(C(!0),k(X,null,se(w(Ee),(m,U)=>(C(),L(T,{key:m.path,index:m.path},{default:t(()=>[l("div",el,[l("img",{src:m.icon,alt:""},null,8,tl)]),l("span",null,Q(m.text),1)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active"])]),l("div",ol,[e(_)])]),e(qo)]),l("a",ll,[l("span",al,"版本: "+Q(w(yt)),1)]),M[0]||(M[0]=l("div",{class:"GuangGaoWei"},[l("span",{style:{display:"flex","font-size":"large",color:"white"}},"广告位招租")],-1)),l("div",sl,"当前直播间贵宾数:"+Q(b.value),1)],64)}}}),Tl=q(nl,[["__scopeId","data-v-a1945dd1"]]);export{Tl as default};
