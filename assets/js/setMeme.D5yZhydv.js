import{h as u,A as l,M as d}from"./index.Bk4ZnkiT.js";import{k as i}from"./element-plus.C3kSHAgf.js";async function g(t,e){var o,r;try{const n=await u.get(t);return(r=(o=n==null?void 0:n.data)==null?void 0:o[0])!=null&&r.barrage?n.data.map(c=>({content:c.barrage,category:c.tableName,id:`${c.barrageId}`,copyCount:c.cnt})):(console.log(`获取${e}烂梗失败`,n),!1)}catch(n){return console.log(`获取${e}烂梗失败`,n),!1}}function E(){return g(l.GET_HOT_MEME_24h,"24h热门")}function C(){return g(l.GET_HOT_MEME_7D,"七天热门")}async function M(t){console.log(`搜索词: ${t}`);try{const e=await u.post(l.SEARCH_MEME,{QueryBarrage:t});return e.data.length===0?(console.log("未搜索到烂梗"),"notfound"):e.data.map(r=>({content:r.barrage,category:"allbarrage",id:r.id,copyCount:+r.cnt}))}catch(e){return console.log("搜索烂梗失败",e),!1}}async function b(t,e,o){var r,n,a;console.log(`请求烂梗分类: ${t}, 页数: ${e}, 每页烂梗数: ${o}`);try{const c=(r=d.find(s=>s.category===t))==null?void 0:r.api;if(!c)throw new Error("未找到此分类");const m=await u.get(c,{params:{pageNum:e,pageSize:o}});if(((a=(n=m.data)==null?void 0:n.list)==null?void 0:a.length)<=0)throw new Error("请求到的烂梗列表为空");return{memeArr:m.data.list.map(s=>({content:s.barrage,id:s.id,category:t,copyCount:+s.cnt})),total:m.data.total}}catch(c){return console.log("请求烂梗列表失败",c),!1}}function w(t,e,o){let r=null;return(...n)=>{if(r)return e();{const a=t(...n);return r=setTimeout(()=>{r=null},o),a}}}function p(t){i({title:"复制失败",message:`复制操作失败，请稍后重试。
                可能你的浏览器不支持被动写入剪贴板，请换用其他浏览器`,type:"error"}),console.error("复制失败:",t)}function A(){i({message:"复制成功",type:"success"})}function _(){return i({title:"请勿刷次数",message:"复制成功，但次数没有增加",type:"warning"}),"limitedSuccess"}function T(t){const e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select();try{document.execCommand("Copy")}catch(o){return p(o),!1}return document.body.removeChild(e),!0}async function $(t,e,o,r,n){try{const a=await u.post(l.INCREASE_COPY_COUNT,{table:t,id:e,...o?{PageNum:o}:{},...r?{PageSize:50}:{},...n?{sortOrder:n}:{}});return console.log("弹幕复制次数+1成功",a),!0}catch(a){return console.error("弹幕复制次数+1失败",a),!1}}function H(){i({title:"复制成功",message:"但是复制次数没有增加，可能是网络有问题",type:"warning"})}export{$ as a,T as b,A as c,C as d,b as e,E as g,_ as l,H as p,M as s,w as t};
