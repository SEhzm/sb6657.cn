import{y as S,f as L,A as b,B as w,C as M}from"./element-plus.DX6Kv4BD.js";import{h as P,_ as V}from"./index.BVYcCDf1.js";import{b as D}from"./vue-router.PTNpl1pN.js";import{d as H,b as r,f as I,o as s,c as _,P as v,G as l,H as c,O as A,a4 as F,a,M as n,L as d,K as G}from"./@vue.BqJqC78G.js";import"./lodash-es.C-zDejYo.js";import"./@vueuse.C-35htfh.js";import"./@element-plus.Du5FBV_q.js";import"./@popperjs.D9SI2xQl.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.D6RD0Zoz.js";import"./async-validator.DKvM95Vc.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.B6fDCfyv.js";import"./@floating-ui.8uccrNCM.js";import"./axios.CCb-kr4I.js";import"./js-cookie.Cz0CWeBA.js";const K={class:"message-container"},O={class:"item-header"},R={class:"nickname"},j={class:"time"},q={class:"item-type"},J={class:"item-content"},Q={class:"pagination"},U=H({__name:"test2",setup(W){const k=D(),i=r([]),p=r(1),g=r(10),y=r(0),m=r(!1),f=async()=>{m.value=!0;try{const e=(await P.get("/machine/SysMessage/getLikeMsgList",{params:{pageNum:p.value,pageSize:g.value}})).data;i.value=e.list,y.value=e.total||0}catch(o){console.error("消息获取失败",o)}finally{m.value=!1}},h=()=>{k.back()},C=o=>{p.value=o,f()},x=o=>new Date(o).toLocaleString();return I(()=>{f()}),(o,e)=>{const z=S,B=M,u=L,E=b,N=w;return s(),_("div",K,[v(z,{onBack:h,class:"card",content:"我的消息"}),!m.value&&i.value.length===0?(s(),l(B,{key:0,description:"暂无消息"})):(s(),l(E,{key:1,direction:"vertical",fill:""},{default:c(()=>[(s(!0),_(A,null,F(i.value,(t,T)=>(s(),_("div",{key:T,class:"card message-item"},[a("div",O,[a("span",R,"👤 "+n(t.fromNickname),1),a("span",j,"🕒 "+n(x(t.createTime)),1)]),a("div",q,[t.type==="like"?(s(),l(u,{key:0,size:"small",type:"success"},{default:c(()=>[e[0]||(e[0]=d(" 点赞了你的")),a("strong",null,n(t.targetType==="post"?"帖子":"评论"),1)]),_:2},1024)):t.type==="comment_like"?(s(),l(u,{key:1,size:"small",type:"info"},{default:c(()=>[e[1]||(e[1]=d(" 点赞了你的评论")),a("strong",null,n(t.targetType==="post"?"帖子":"评论"),1)]),_:2},1024)):t.type==="expression"?(s(),l(u,{key:2,size:"small",type:"warning"},{default:c(()=>[e[2]||(e[2]=d(" 表态了你的")),a("strong",null,n(t.targetType==="post"?"帖子":"评论"),1)]),_:2},1024)):G("",!0)]),a("div",J," 「"+n(t.targetContent)+"」 ",1)]))),128))]),_:1})),a("div",Q,[v(N,{background:"",layout:"prev, pager, next","current-page":p.value,"page-size":g.value,total:y.value,onCurrentChange:C},null,8,["current-page","page-size","total"])])])}}}),ue=V(U,[["__scopeId","data-v-4267875a"]]);export{ue as default};
