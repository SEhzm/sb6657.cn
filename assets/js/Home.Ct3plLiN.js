const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/wordCloud.Dly88k7g.js","assets/js/echarts.D13McHMB.js","assets/js/zrender.B_NAtvFA.js","assets/js/tslib.BDyQ-Jie.js","assets/js/echarts-wordcloud.tk4DMxWl.js","assets/js/index.Cj6V41Ui.js","assets/js/@vue.kiFpFjC4.js","assets/js/pinia.C1jrEj6N.js","assets/js/element-plus.Td0FvVtG.js","assets/js/lodash-es.S0Y0Up6J.js","assets/js/@vueuse.DR1wJ5Y1.js","assets/js/@element-plus.CD6l22se.js","assets/js/@popperjs.D_chPuIy.js","assets/js/@ctrl.r5W6hzzQ.js","assets/js/dayjs.BKG3DVjA.js","assets/js/async-validator.9PlIezaS.js","assets/js/memoize-one.BdPwpGay.js","assets/js/normalize-wheel-es.BQoi3Ox2.js","assets/js/@floating-ui.D0iZPv2f.js","assets/css/element-plus.B2yclwLd.css","assets/js/axios.NIGUFBhG.js","assets/js/js-cookie.Cz0CWeBA.js","assets/js/vue-router.DfLJYrxF.js","assets/css/index.Daukf7a0.css","assets/css/wordCloud.qpx4COKE.css"])))=>i.map(i=>d[i]);
import{_ as De,C as Ie,h as w,A as N,b as Ue}from"./index.Cj6V41Ui.js";import{c as Be,v as Pe,g as ze,d as Re,h as Ae,n as Ne,k as $e,o as Le,x as je,y as Fe,f as Qe,b as _,a as ce,E as Oe}from"./element-plus.Td0FvVtG.js";import{r as i,l as qe,i as ue,al as W,c as u,o as n,aU as We,a,R as l,K as Y,J as s,O as p,I as T,Q as V,a6 as M,L as z,P as v,u as H,a4 as Ye,S as He,W as Ke,aV as Ge,aI as Je}from"./@vue.kiFpFjC4.js";import{M as Xe}from"./@element-plus.CD6l22se.js";import{f as Ze,t as et}from"./flip-num.CwbM4THT.js";import{c as tt,l as at,a as ot}from"./clipboard.D23mOi9I.js";/* empty css                                                                 */import"./pinia.C1jrEj6N.js";import"./axios.NIGUFBhG.js";import"./js-cookie.Cz0CWeBA.js";import"./vue-router.DfLJYrxF.js";import"./lodash-es.S0Y0Up6J.js";import"./@vueuse.DR1wJ5Y1.js";import"./@popperjs.D_chPuIy.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.BKG3DVjA.js";import"./async-validator.9PlIezaS.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.BQoi3Ox2.js";import"./@floating-ui.D0iZPv2f.js";const lt={class:"home"},st={class:"card third-card"},nt=["onTouchstart","onTouchend"],rt={class:"barrage-text"},it={style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},dt={class:"tag-icon-wrapper"},ct=["src"],ut={style:{"vertical-align":"middle"}},pt={style:{position:"absolute",bottom:"0",right:"0","font-size":"11px","min-width":"170px"}},mt={class:"card fourth-card"},vt={style:{display:"flex"}},ft={class:"added-tags"},ht={class:"preset-tags-container"},_t={class:"preset-tags"},gt={class:"tag-icon-wrapper"},yt=["src"],bt={style:{"vertical-align":"middle"}},xt={style:{cursor:"pointer"}},Ct={class:"barrage-text"},kt={style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},wt={class:"tag-icon-wrapper"},Tt=["src"],Et={style:{"vertical-align":"middle"}},Vt={style:{position:"absolute",bottom:"0",right:"0","font-size":"11px","min-width":"170px"}},Mt={class:"card fifth-card"},St={class:"preset-tags-container"},Dt={class:"preset-tags"},It={class:"tag-icon-wrapper"},Ut=["src"],Bt={style:{"vertical-align":"middle"}},Pt={class:"added-tags"},zt={class:"match-association-container"},Rt={class:"match-section-home"},At={key:0,class:"match-details-box-home"},Nt={class:"match-info-row-home"},$t=["src","alt"],Lt={class:"match-name-home"},jt={class:"match-time-home"},Ft={key:1,class:"no-match-info-home"},Qt={class:"wordCloudDiv"},Ot={style:{"background-color":"white","border-radius":"25px",padding:"5px"}},qt="custom-popover",Wt={__name:"Home",setup(Yt){const K=i(!0),S=i(!1),$=i(!1),G=i("数据为空"),D=qe({getRandOne:[],filteredItems:[],tableData:[],table:"",barrage:""}),L=i([]),pe=()=>{w.get("/machine/dictList").then(t=>{t.code===200&&(L.value=t.data,g.value=t.data.map(e=>({iconUrl:e.iconUrl,label:e.dictLabel,value:e.dictValue})))}).catch(t=>{console.error("获取字典数据失败",t)})},J=t=>{if(!t||t.trim()==="")return[];const e=Array.from(new Set(t.split(",").map(d=>d.trim())));if(!L.value)return e.map(()=>({label:"",iconUrl:""}));const c=new Map(L.value.map(d=>[String(d.dictValue).trim(),d]));return e.map(d=>{const f=c.get(d);return f?{label:f.dictLabel,iconUrl:f.iconUrl}:{label:"",iconUrl:""}})};pe();const I=i(""),j=i(!1),R=i([]),E=i(""),g=i([]),U=i([]),x=i([]),C=i([]),B=i([]),m=i(null),A=i(!1);function me(){w.get("/machine/InProgressMatch").then(t=>{t.code===200&&t.data?m.value=t.data:m.value=null,console.log("Fetched match data:",m.value)}).catch(t=>{console.error("Failed to fetch in progress match:",t),m.value=null})}ue(()=>{me()});const X=t=>{U.value=U.value.filter(e=>e.value!==t.value),C.value=C.value.filter(e=>e!==t.value),g.value.push(t)},Z=t=>{if(C.value.length>=5){_.info("最多5个标签");return}U.value.some(e=>e.value===t.value)||(U.value.push(t),C.value.push(t.value),g.value=g.value.filter(e=>e.value!==t.value))},ve=()=>{if(C.value.length===0||E.value===""||E.value===null)_.error("请选择标签或输入弹幕");else{if(C.value.length>5){_.error("最少一个标签，最多五个标签。");return}const t={tags:C.value.join(","),barrage:E.value};A.value&&m.value&&(t.matchId=m.value.id),w.post(N.SUBMIT_MEME,t).then(e=>{E.value="",A.value=!1,e.code===200?_.success("投稿成功，待审核(一天内)"):e.code===500?_.error("烂梗已经有了，勿重复提交"):_.error("请求失败")}).catch(e=>{console.error("投稿失败",e),_.error("请求失败")})}},F=t=>{x.value=x.value.filter(e=>e.value!==t.value),B.value=B.value.filter(e=>e!==t.value),g.value.push(t)},ee=t=>{if(B.value.length>=5){_.info("最多5个标签");return}x.value.some(e=>e.value===t.value)||(x.value.push(t),B.value.push(t.value),g.value=g.value.filter(e=>e.value!==t.value))};function fe(){for(R.value=[];x.value.length>0;)F(x.value[0])}const he=t=>t.getTime()<new Date("2024-09-24").getTime(),Q=()=>{S.value=!0,(I==null||I.value=="")&&(G.value="请输入搜索词..."),w.post(N.SEARCH_MEME,{tags:B.value.join(","),barrage:I.value,submitTime:R.value}).then(t=>{$.value=!0,S.value=!1,D.filteredItems=t.data||[]}).catch(t=>{console.error("搜索失败",t),S.value=!1})};var _e=i("搜索烂梗...");const te=()=>{w.get(N.GET_RAND_ONE_MEME).then(t=>{D.tableData=[t.data],K.value=!1}).catch(t=>{console.error("随机失败")})};te();const ge=()=>{ce({message:"复制成功",type:"success"})},ye=()=>{ce({message:"复制失败，请检查浏览器是否禁用navigator.clipboard对象或手动复制,请勿使用夸克浏览器",type:"error"})};let O=0,P=null,q=0;const ae=t=>{const e=new Date().getTime(),c={x:event.clientX,y:event.clientY};if(P&&P.x===c.x&&P.y===c.y?(q++,q>4&&Oe.alert("😡😡😡你在刷次数😡😡😡","请勿使用连点器",{confirmButtonText:"好吧，我错了"})):q=0,e-O<1500){_({title:"请勿刷次数",message:"复制成功，但次数没有增加",type:"warning"});const f=t.barrage;let k=document.createElement("input");k.value=f,document.body.appendChild(k),k.select();try{document.execCommand("Copy")}catch(b){_({title:"复制失败",message:"复制操作失败，请稍后重试",type:"error"}),console.error("复制失败:",b)}document.body.removeChild(k),O=e,P=c;return}P=c,O=e;const y=t.barrage;let d=document.createElement("input");d.value=y,document.body.appendChild(d),d.select();try{document.execCommand("Copy"),ge(),console.log("内容已复制到剪贴板"),w.get(`/machine/addCnt/${t.id}`).then(()=>{})}catch(f){_({title:"复制失败",message:"复制操作失败，请稍后重试",type:"error"}),console.error("复制失败:",f),ye()}document.body.removeChild(d)},be=()=>{D.filteredItems=[],$.value=!1},xe=t=>{t.touchStartTime=Date.now()},Ce=t=>{Date.now()-t.touchStartTime>100&&(t.popoverVisible=!0,setTimeout(()=>{t.popoverVisible=!1},1500))},ke=et(ot,at,2e3);async function we(t){const e=t.barrage,c=ke(e);!c||c==="limitedSuccess"||(w.get(N.INCREASE_COPY_COUNT+"/"+t.id),tt(),Q())}const oe=i(null),Te=Ge(()=>Ue(()=>import("./wordCloud.Dly88k7g.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24])));function Ee(){var t,e;(e=(t=oe.value)==null?void 0:t.getData)==null||e.call(t)}const le=t=>t?t.replace("T"," ").split(".")[0]:"";return ue(()=>{}),(t,e)=>{const c=Be,y=Ae,d=Re,f=ze,k=Qe,b=Ne,se=$e,ne=Le,Ve=je,re=W("Warning"),ie=W("QuestionFilled"),Me=Fe,Se=W("Refresh"),de=Pe;return n(),u("div",lt,[e[24]||(e[24]=We('<div class="boomouder" data-v-e6aa89d5><img src="https://gcore.jsdelivr.net/gh/9WiSHao/AnythingStorage/img/6657boom.webp" alt="6657boom" class="boom6657" data-v-e6aa89d5></div><div class="card first-card" data-v-e6aa89d5><div data-v-e6aa89d5><b data-v-e6aa89d5><p class="announcement" data-v-e6aa89d5> 因为GreasyFork被墙，你可以<a href="https://cdn.hguofichp.cn/sb6657.cn%E6%96%97%E9%B1%BC%E7%8E%A9%E6%9C%BA%E5%99%A8%E7%83%82%E6%A2%97%E6%94%B6%E9%9B%86.user.js" target="_blank" data-v-e6aa89d5>点击我下载最新的油猴插件</a>，你只需要将下载的文件拖入油猴管理面板即可 </p></b></div></div><div class="card second-card" data-v-e6aa89d5><p data-v-e6aa89d5> 这是一个收集6657烂梗的网站: <span class="dgq63136" data-v-e6aa89d5><a href="https://sb6657.cn" data-v-e6aa89d5>sb6657.cn</a></span> 尽情欣赏你们的烂梗吧。 <b data-v-e6aa89d5>开放注册功能，可能会出现收不到邮件的情况。</b><b data-v-e6aa89d5>目前已支持玩机器直播间开播提醒</b></p></div>',3)),a("div",st,[a("div",null,[l(c,{type:"primary",onClick:te},{default:s(()=>[...e[6]||(e[6]=[p("点我随机一条弹幕",-1)])]),_:1}),Y((n(),T(k,{data:D.tableData,class:"barrage-table",onRowClick:ae},{default:s(()=>[l(f,{prop:"barrage"},{default:s(o=>[l(d,{placement:"top",width:"auto",trigger:"hover",visible:o.row.popoverVisible},{reference:s(()=>[a("div",{style:{cursor:"pointer"},onTouchstart:r=>xe(o.row),onTouchend:r=>Ce(o.row)},[a("span",rt,v(o.row.barrage),1)],40,nt)]),default:s(()=>[a("div",it,[(n(!0),u(V,null,M(J(o.row.tags),(r,h)=>(n(),u("div",{key:h,style:{"margin-right":"8px"}},[l(y,{round:"",effect:"dark",style:{fontSize:"16px",cursor:"pointer"}},{default:s(()=>[a("div",dt,[r.iconUrl?(n(),u("img",{key:0,src:r.iconUrl,style:{width:"22px",height:"22px","object-fit":"cover","vertical-align":"middle"}},null,8,ct)):z("",!0),a("span",ut,v(r.label),1)])]),_:2},1024)]))),128)),a("span",pt,"投稿时间: "+v(le(o.row.submitTime)),1)])]),_:2},1032,["visible"])]),_:1}),l(f,{label:"",align:"center",width:"85"},{default:s(()=>[l(c,{type:"primary"},{default:s(()=>[...e[7]||(e[7]=[p("复制",-1)])]),_:1})]),_:1})]),_:1},8,["data"])),[[de,K.value]])])]),a("div",mt,[a("div",null,[a("div",vt,[l(se,{modelValue:I.value,"onUpdate:modelValue":e[0]||(e[0]=o=>I.value=o),placeholder:H(_e),onKeydown:Ye(Q,["enter"]),clearable:"",class:"search-input",onInput:be},{append:s(()=>[l(c,{loading:S.value,type:"primary",onClick:Q},{default:s(()=>[l(b,null,{default:s(()=>[l(H(Xe))]),_:1})]),_:1},8,["loading"])]),_:1},8,["modelValue","placeholder"]),l(ne,{modelValue:j.value,"onUpdate:modelValue":e[1]||(e[1]=o=>j.value=o),label:"高级检索 >",onChange:fe,style:{"margin-left":"10px"}},null,8,["modelValue"])]),Y(a("div",null,[a("div",null,[e[8]||(e[8]=a("span",{style:{display:"block",color:"var(--el-text-color-secondary)","font-size":"14px"}},"烂梗收集时间范围(可选)",-1)),l(Ve,{modelValue:R.value,"onUpdate:modelValue":e[2]||(e[2]=o=>R.value=o),type:"daterange","range-separator":"到","value-format":"YYYY-MM-DD","start-placeholder":"起始","end-placeholder":"结束","disabled-date":he},null,8,["modelValue"]),e[9]||(e[9]=a("span",{style:{display:"block",color:"var(--el-text-color-secondary)","font-size":"14px"}},"烂梗包含标签(可选)",-1)),a("div",ft,[(n(!0),u(V,null,M(x.value,(o,r)=>(n(),T(y,{round:"",key:r,closable:"",onClick:h=>F(o),onClose:h=>F(o),style:{padding:"15px",cursor:"pointer","font-size":"16px"},effect:"dark"},{default:s(()=>[p(v(o.label),1)]),_:2},1032,["onClick","onClose"]))),128))])]),a("div",ht,[a("div",_t,[(n(!0),u(V,null,M(g.value,(o,r)=>(n(),T(y,{round:"",key:r,closable:"",onClose:h=>ee(o),onClick:h=>ee(o),style:{padding:"15px",cursor:"pointer","font-size":"16px"},type:"primary"},{default:s(()=>[a("div",gt,[o.iconUrl?(n(),u("img",{key:0,src:o.iconUrl,style:{width:"22px",height:"22px","object-fit":"cover","vertical-align":"middle"}},null,8,yt)):z("",!0),a("span",bt,v(o.label),1)])]),_:2},1032,["onClose","onClick"]))),128))])])],512),[[He,j.value]]),$.value?Y((n(),T(k,{key:0,data:D.filteredItems,stripe:"",onRowClick:ae,"empty-text":G.value,"cell-style":{cursor:"Pointer",fontSize:"large"}},{default:s(()=>[l(f,{prop:"barrage"},{default:s(o=>[l(d,{placement:"top",width:"auto",trigger:"hover","popper-class":qt},{reference:s(()=>[a("div",xt,[a("span",Ct,v(o.row.barrage),1)])]),default:s(()=>[a("div",kt,[(n(!0),u(V,null,M(J(o.row.tags),(r,h)=>(n(),u("div",{key:h,style:{"margin-right":"8px"}},[l(y,{round:"",effect:"dark",style:{fontSize:"16px",cursor:"pointer"}},{default:s(()=>[a("div",wt,[r.iconUrl?(n(),u("img",{key:0,src:r.iconUrl,style:{width:"22px",height:"22px","object-fit":"cover","vertical-align":"middle"}},null,8,Tt)):z("",!0),a("span",Et,v(r.label),1)])]),_:2},1024)]))),128)),a("span",Vt,"投稿时间: "+v(le(o.row.submitTime)),1)])]),_:2},1024)]),_:1}),l(f,{align:"center",width:"100"},{default:s(o=>[l(c,{type:"primary",class:"copy-btn",onClick:Ke(r=>we(o.row),["stop"])},{default:s(()=>[e[10]||(e[10]=p("复制 🌈",-1)),l(Ze,{num:o.row.cnt},null,8,["num"])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","empty-text"])),[[de,S.value]]):z("",!0)])]),a("div",Mt,[a("div",null,[a("span",null,[e[17]||(e[17]=p("可选标签",-1)),l(d,{width:300},{reference:s(()=>[l(b,{size:"16"},{default:s(()=>[l(re)]),_:1})]),default:s(()=>[e[11]||(e[11]=p(" 为解决烂梗分栏不足和分类不清晰问题。",-1)),e[12]||(e[12]=a("br",null,null,-1)),e[13]||(e[13]=a("b",null,"点击标签即可添加",-1))]),_:1}),l(c,{link:"",type:"success",style:{"margin-left":"50%"}},{default:s(()=>[e[16]||(e[16]=p("投稿标签 ",-1)),l(d,{width:300},{reference:s(()=>[l(b,{size:"16"},{default:s(()=>[l(ie)]),_:1})]),default:s(()=>[e[14]||(e[14]=a("b",null,"请在上方(建议/提交)问卷投稿。",-1)),e[15]||(e[15]=a("br",null,null,-1))]),_:1})]),_:1})]),a("div",St,[a("div",Dt,[(n(!0),u(V,null,M(g.value,(o,r)=>(n(),T(y,{round:"",key:r,closable:"",onClose:h=>Z(o),onClick:h=>Z(o),style:{padding:"15px",cursor:"pointer","font-size":"16px"},type:"primary"},{default:s(()=>[a("div",It,[o.iconUrl?(n(),u("img",{key:0,src:o.iconUrl,style:{width:"22px",height:"22px","object-fit":"cover","vertical-align":"middle"}},null,8,Ut)):z("",!0),a("span",Bt,v(o.label),1)])]),_:2},1032,["onClose","onClick"]))),128))])]),a("span",null,[e[19]||(e[19]=p("已选标签 ",-1)),l(d,{width:250},{reference:s(()=>[l(b,{size:"16"},{default:s(()=>[l(re)]),_:1})]),default:s(()=>[e[18]||(e[18]=a("b",null,"最少一个标签，最多五个标签。",-1))]),_:1})]),a("div",Pt,[(n(!0),u(V,null,M(U.value,(o,r)=>(n(),T(y,{round:"",key:r,closable:"",onClick:h=>X(o),onClose:h=>X(o),style:{padding:"15px",cursor:"pointer","font-size":"16px"},effect:"dark"},{default:s(()=>[p(v(o.label),1)]),_:2},1032,["onClick","onClose"]))),128))]),l(se,{modelValue:E.value,"onUpdate:modelValue":e[3]||(e[3]=o=>E.value=o),maxlength:"255",autocomplete:"off",autosize:{minRows:2,maxRows:4},"show-word-limit":"",type:"textarea",placeholder:" 烂梗...."},null,8,["modelValue"]),a("div",zt,[a("div",Rt,[l(ne,{modelValue:A.value,"onUpdate:modelValue":e[4]||(e[4]=o=>A.value=o),disabled:!m.value,class:"match-checkbox-home"},{default:s(()=>[e[20]||(e[20]=p(" 关联赛事库 ",-1)),l(b,{color:"#3db302ff",size:"16"},{default:s(()=>[l(ie)]),_:1})]),_:1},8,["modelValue","disabled"]),m.value?(n(),u("div",At,[a("div",Nt,[a("img",{src:m.value.matchesImg,class:"match-image-home",alt:m.value.matchesName},null,8,$t),a("span",Lt,v(m.value.matchesName),1)]),a("div",jt,v(m.value.startTime)+" 至 "+v(m.value.endTime),1)])):(n(),u("div",Ft," 当前无正在进行的大型赛事 ")),l(c,{class:"saveBnt",type:"primary",onClick:ve},{default:s(()=>[...e[21]||(e[21]=[p("投稿",-1)])]),_:1})])])]),l(Me,{right:50,bottom:50})]),l(Ie,{class:"ChatRoom card"}),e[25]||(e[25]=a("div",{class:"card sixth-card"},[p(" 友情链接 "),a("a",{href:"https://dgq63136.cn",target:"_blank"},"dgq63136.cn"),p("    "),a("a",{href:"https://sb6657.cn/#/Starrysky",target:"_blank"},"星空背景")],-1)),a("div",Qt,[a("span",Ot,[e[22]||(e[22]=p("搜索词云",-1)),l(b,{size:"20",style:{cursor:"pointer",animation:"rotating 4s linear infinite reverse"},onClick:e[5]||(e[5]=o=>Ee())},{default:s(()=>[l(Se)]),_:1})]),(n(),T(Je,null,{default:s(()=>[l(H(Te),{ref_key:"wordCloudRef",ref:oe},null,512)]),fallback:s(()=>[...e[23]||(e[23]=[a("div",{style:{height:"270px",width:"300px"}},"词云加载中...",-1)])]),_:1}))])])}}},va=De(Wt,[["__scopeId","data-v-e6aa89d5"]]);export{va as default};
