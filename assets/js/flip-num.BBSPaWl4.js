import{h as i,A as m,M as h,_}from"./index.DdO95VHm.js";import{m as u}from"./element-plus.DVYLd97e.js";import{r as p,f as v,S as E,d as C,w as M,o as w,c as b,a as d,M as g,C as N}from"./@vue.BkZGu_Ap.js";async function y(t,e){var n,r;try{const a=await i.get(t);return(r=(n=a==null?void 0:a.data)==null?void 0:n[0])!=null&&r.barrage?a.data.map(s=>({tags:s.tags,content:s.barrage,category:s.tableName,id:`${s.barrageId}`,copyCount:s.cnt})):(console.log(`获取${e}烂梗失败`,a),!1)}catch(a){return console.log(`获取${e}烂梗失败`,a),!1}}function H(){return y(m.GET_HOT_MEME_24h,"24h热门")}function B(){return y(m.GET_HOT_MEME_7D,"七天热门")}async function D(t){console.log(`搜索词: ${t}`);try{const e=await i.post(m.SEARCH_MEME,{barrage:t});return e.data.length===0?(console.log("未搜索到烂梗"),"notfound"):e.data.map(r=>({tags:r.tags,content:r.barrage,category:"allbarrage",id:r.id,copyCount:+r.cnt}))}catch(e){return console.log("搜索烂梗失败",e),!1}}async function R(t,e,n,r){var a,o,s;console.log(`请求烂梗分类: ${t}, 页数: ${e}, 每页烂梗数: ${n}`);try{const c=(a=h.find(l=>l.category===t))==null?void 0:a.api;if(!c)throw new Error("未找到此分类");const f=await i.get(c,{params:{tags:r,pageNum:e,pageSize:n}});if(((s=(o=f.data)==null?void 0:o.list)==null?void 0:s.length)<=0)throw new Error("请求到的烂梗列表为空");return{memeArr:f.data.list.map(l=>({tags:l.tags,content:l.barrage,id:l.id,category:t,copyCount:+l.cnt,likes:+l.likes})),total:f.data.total}}catch(c){return console.error("请求烂梗列表失败",c),!1}}function U(t,e,n){let r=null;return(...a)=>{if(r)return e();{const o=t(...a);return r=setTimeout(()=>{r=null},n),o}}}function A(t){u({title:"复制失败",message:`复制操作失败，请稍后重试。
                可能你的浏览器不支持被动写入剪贴板，请换用其他浏览器`,type:"error"}),console.error("复制失败:",t)}function z(){u({message:"复制成功",type:"success"})}function G(){return u({title:"请勿刷次数",message:"复制成功，但次数没有增加",type:"warning"}),"limitedSuccess"}function j(){return u({title:"请勿刷次数",message:"点赞成功，但次数没有增加",type:"warning"}),"limitedSuccess"}function Q(t){const e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select();try{document.execCommand("Copy")}catch(n){return A(n),!1}return document.body.removeChild(e),!0}async function Y(t,e,n,r,a){try{const o=await i.get(m.INCREASE_COPY_COUNT+`/${e}`);return console.log("弹幕复制次数+1成功",o),!0}catch(o){return console.error("弹幕复制次数+1失败",o),!1}}async function q(t,e,n,r,a){try{const o=await i.get(m.INCREASE_LIKE_COUNT+`/${t}`);return console.log("弹幕点赞次数+1成功",o),!0}catch(o){return console.error("弹幕点赞次数+1失败",o),!1}}function F(){u({title:"复制成功",message:"但是复制次数没有增加，可能是网络有问题",type:"warning"})}function J(){u({title:"点赞成功👍",message:"但是点赞次数没有增加，可能是网络有问题",type:"warning"})}const S=t=>new Promise(e=>setTimeout(e,t));function K(){const t=p(!1);let e=null;function n(r){t.value=r.matches}return v(()=>{e=window.matchMedia("(max-width: 600px)"),t.value=e.matches,e.addEventListener("change",n)}),E(()=>{e&&e.removeEventListener("change",n)}),t}const $={class:"container"},T={class:"place-holder"},O=C({__name:"flip-num",props:{num:{}},setup(t){const e=t,n=p(e.num),r=p(e.num);let a=!1;const o=p("normal");return M(()=>e.num,async(s,c)=>{if(n.value=c,r.value=s,a){n.value=s,r.value=s;return}a=!0,o.value=s<c?"end flex-start":"end",await S(500),n.value=s,r.value=s,o.value="normal",a=!1}),(s,c)=>(w(),b("span",$,[d("div",T,g(r.value),1),d("div",{class:N(`flip ${o.value}`)},[d("div",null,g(n.value),1),d("div",null,g(r.value),1)],2)]))}}),L=_(O,[["__scopeId","data-v-3fee0ed6"]]);export{Y as a,J as b,z as c,G as d,Q as e,L as f,H as g,B as h,R as i,j,q as l,F as p,D as s,U as t,K as u};
