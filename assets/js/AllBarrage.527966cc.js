import{E as d,a as R,c as j,r as W,d as $,q as H,v as J,g as X,k as Y,n as Z,o as G,p as K,b as ee,m as te}from"./element-plus.ec180c6b.js";import{r as f}from"./request.39193e0d.js";import{_ as ae}from"./index.3b8d7347.js";import{r as V,_ as le,o as T,c as oe,a as s,T as u,U as re,V as t,P as r,Q as ne,O as se,F as ie,ax as ce,ay as de}from"./@vue.7a8f7aed.js";import"./lodash-es.2e98bc53.js";import"./@vueuse.65cb1fed.js";import"./@element-plus.b6e46eba.js";import"./@popperjs.c75af06c.js";import"./@ctrl.f8748455.js";import"./dayjs.de1d8cda.js";import"./async-validator.dee29e8b.js";import"./memoize-one.297ddbcb.js";import"./normalize-wheel-es.ed76fb12.js";import"./@floating-ui.c9ffdb72.js";import"./axios.28bc18a3.js";import"./vue-router.f6176e51.js";const E=v=>(ce("data-v-b7fd58c9"),v=v(),de(),v),pe={class:"cardTable",style:{position:"relative"}},ue={style:{position:"absolute",right:"65px","margin-top":"10px","z-index":"4","pointer-events":"none"}},me=E(()=>s("br",null,null,-1)),ge={style:{position:"absolute",right:"5px"}},_e=E(()=>s("svg",{t:"1728735969486",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4268",width:"32",height:"32"},[s("path",{d:"M939.358251 423.424662c-23.01825-37.252439-62.924121-60.779272-107.019409-63.209624-2.755764-0.38681-5.510504-0.579191-8.347109-0.579191l-152.202471-0.121773c6.649444-28.975938 10.015098-58.653865 10.015098-88.657202 0-28.223808-3.213181-57.139372-9.556657-85.952604-0.447185-2.043542-1.098008-4.006244-1.932002-5.866614-15.820314-57.302077-67.37755-96.841605-127.282918-96.841605-72.827679 0-132.081201 59.254545-132.081201 132.081201 0 3.334955 0.132006 6.66991 0.406253 10.015098-2.196015 57.211003-32.108279 109.947088-80.269162 141.363611-14.447037 9.42465-18.524912 28.773324-9.099239 43.220361 9.414417 14.437827 28.752858 18.535145 43.220361 9.099239 65.811892-42.925648 106.429984-115.325585 108.656699-193.684234 0.030699-1.332345-0.010233-2.663666-0.14224-3.996011-0.203638-2.012843-0.304945-4.016477-0.304945-6.019087 0-38.381146 31.233352-69.614497 69.614497-69.614497 32.57593 0 60.474326 22.204721 67.824735 53.997821 0.356111 1.534959 0.823761 3.019777 1.402953 4.453429 4.696975 22.814612 7.076162 45.579081 7.076162 67.743894 0 37.485753-6.222725 74.352405-18.494213 109.592001-3.324722 9.546424-1.819438 20.111037 4.02671 28.345582 5.856381 8.245801 15.332197 13.146415 25.448602 13.156648l193.226816 0.101307c1.423419 0.264013 2.857071 0.426719 4.300956 0.477884 24.116257 0.9967 45.935192 13.614066 58.603723 34.090423 7.838525 12.31242 11.438517 26.800389 10.431583 41.939181-0.080841 0.945535-0.121773 1.911536-0.11154 2.877537 0 0.854461 0.040932 1.697665 0.11154 2.53166 0.010233 0.335644-0.030699 0.661056-0.11154 0.976234-0.101307 0.376577-0.193405 0.772596-0.284479 1.159406l-74.972529 330.391802c-0.914836 1.281179-1.738597 2.6432-2.449795 4.046153-5.937223 11.762905-14.660908 21.48329-25.346271 28.172643-10.746762 6.812149-23.059182 10.614755-35.757388 11.06194-0.854461-0.061398-513.766226-0.224104-513.766226-0.224104-0.467651-0.020466-0.935302-0.030699-1.402953-0.030699 0 0-111.01542 0.172939-112.718201 0.457418-1.932002 0-3.446495-1.50426-3.446495-3.415796l0.299829-416.334173c0-1.901303 1.545192-3.446495 3.01466-3.456728l1.245364 0.121773c1.174756 0.132006 2.653433 0.284479 3.52836 0.193405l83.82822-0.222057 0 339.367221c0 17.253966 13.979386 31.233352 31.233352 31.233352s31.233352-13.979386 31.233352-31.233352L281.009092 435.350273c0-1.778506 0-8.631588 0-10.411117 0-17.253966-13.979386-30.928407-31.233352-30.928407-1.50426 0-117.547183 0.304945-119.402437 0.304945-36.34272 0-65.913199 29.566386-65.913199 65.893756l-0.299829 416.334173c0 36.337603 29.571503 65.902966 65.913199 65.902966 2.541893 0 111.406323-0.457418 111.406323-0.457418 0.457418 0.020466 0.925069 0.030699 1.382487 0.030699 0 0 511.458671 0.274246 512.505513 0.274246 25.469068 0 50.296523-7.197936 71.647807-20.73116 19.612687-12.281721 35.777855-29.881564 46.839795-50.967812 3.660366-5.622044 6.435573-11.875468 8.256034-18.615986 0.11154-0.416486 0.213871-0.823761 0.304945-1.240247l74.881454-330.340637c1.596358-6.212492 2.257413-12.586666 2.00261-18.992563C960.892707 473.366098 953.948551 446.331371 939.358251 423.424662z",fill:"#515151","p-id":"4269"}),s("path",{d:"M450.027553 518.650467c-17.253966 0-31.233352 13.979386-31.233352 31.233352l0 30.470989c0 17.253966 13.979386 31.233352 31.233352 31.233352 17.253966 0 31.233352-13.979386 31.233352-31.233352l0-30.470989C481.260905 532.629853 467.281519 518.650467 450.027553 518.650467z",fill:"#515151","p-id":"4270"}),s("path",{d:"M693.805696 518.650467c-17.253966 0-31.233352 13.979386-31.233352 31.233352l0 30.470989c0 17.253966 13.979386 31.233352 31.233352 31.233352 17.253966 0 31.233352-13.979386 31.233352-31.233352l0-30.470989C725.039048 532.629853 711.058638 518.650467 693.805696 518.650467z",fill:"#515151","p-id":"4271"}),s("path",{d:"M648.940882 660.09492c-14.304797-9.393951-33.592073-5.398964-43.159986 8.763594-0.132006 0.193405-13.614066 19.754926-34.171264 19.754926-19.98824 0-32.423457-18.09717-33.266661-19.368116-9.17087-14.427594-28.254507-18.809391-42.834574-9.770528-14.650675 9.109472-19.155269 28.366048-10.055007 43.016723 11.214413 18.047028 41.96988 48.588625 86.156242 48.588625 43.962258 0 75.104535-30.318516 86.572728-48.222281C667.404396 688.461991 663.216004 669.500127 648.940882 660.09492z",fill:"#515151","p-id":"4272"})],-1)),be={class:"pagination-wrapper"},he={class:"dialog-footer"},fe={__name:"AllBarrage",setup(v){const y=V(!0),S={table:[{required:!0,message:"请选择分栏",trigger:"blur"}],barrage:[{required:!0,message:"请输入弹幕",trigger:"blur"}]},c=V(null),e=le({tableData:[],total:0,pageSize:200,currentPage:1,dialogFormVisible:!1,table:"",barrage:""}),m=(l=1)=>{f.get("/machine/all/Page",{params:{pageNum:l,pageSize:e.pageSize}}).then(a=>{var o,n;e.tableData=((o=a.data)==null?void 0:o.list)||[],e.total=((n=a.data)==null?void 0:n.total)||0,y.value=!1}).catch(a=>{console.error("加载数据失败:",a)})};m(e.currentPage);const k=({prop:l,order:a})=>{l==="cnt"&&(e.currentPage=1,_(a,e.currentPage))},z=()=>{window.scrollTo({top:0,behavior:"smooth"})},B=l=>{e.currentPage=l,z(),c.value===null?m(l):c.value==="desc"?_("desc",l):_("ascending",l)},U=()=>{d({message:"复制成功",type:"success"})},F=()=>{d({message:"复制失败",type:"error"})},_=(l,a=1)=>{y.value=!0,c.value=l==="ascending"?"asc":l===null?null:"desc",console.log(c.value),c.value===null?m():f.get("/machine/sortAllBarrage",{params:{pageNum:a,pageSize:e.pageSize,order:c.value}}).then(o=>{var n;e.tableData=o.data.list,e.total=((n=o.data)==null?void 0:n.total)||0}).finally(()=>{e.currentPage=1,y.value=!1})};let x=0,b=null,C=0;const D=l=>{const a=new Date().getTime(),o={x:event.clientX,y:event.clientY};if(b&&b.x===o.x&&b.y===o.y?(C++,C>4&&X.alert("😡😡😡你在刷次数😡😡😡","请勿使用连点器",{confirmButtonText:"好吧，我错了"})):C=0,a-x<1500){d({title:"请勿刷次数",message:"复制成功，但次数没有增加",type:"warning"});const h=l.barrage;let i=document.createElement("input");i.value=h,document.body.appendChild(i),i.select();try{document.execCommand("Copy")}catch(w){d({title:"复制失败",message:"复制操作失败，请稍后重试",type:"error"}),console.error("复制失败:",w)}document.body.removeChild(i),x=a,b=o;return}b=o,x=a;const n=l.barrage;let g=document.createElement("input");g.value=n,document.body.appendChild(g),g.select();try{document.execCommand("Copy"),U(),console.log("内容已复制到剪贴板"),f.post("/machine/addCnt",{sortOrder:c.value,PageNum:e.currentPage,table:"allbarrage",id:l.id}).then(()=>{c.value===null?setTimeout(()=>m(e.currentPage),50):c.value==="desc"?setTimeout(()=>_("desc",e.currentPage),50):setTimeout(()=>_("ascending",e.currentPage),50)})}catch(h){d({title:"复制失败",message:"复制操作失败，请稍后重试",type:"error"}),console.error("复制失败:",h),F()}document.body.removeChild(g)},I=()=>{e.table="",e.barrage="",e.dialogFormVisible=!0},M=()=>{e.table===""||e.barrage===""?d.error("请选择分栏或输入弹幕"):f.post("/machine/addUnaudit",{table:e.table,barrage:e.barrage}).then(l=>{m(),e.dialogFormVisible=!1,l.code==="200"?d.success("投稿成功，待审核(一天内)"):d.error("请求失败")})},N=()=>{e.table===""||e.barrage===""?d.error("请选择分栏或输入弹幕"):f.post("/machine/addUnaudit",{table:e.table,barrage:e.barrage}).then(l=>{m(),e.barrage="",l.code==="200"?d.success("投稿成功，待审核(一天内)"):d.error("请求失败")})};return(l,a)=>{const o=R,n=Y,g=j,h=W,i=Z,w=G,P=K,Q=ee,A=te,q=$,L=H,O=J;return T(),oe(ie,null,[s("div",null,[s("div",pe,[s("p",ue,[u(" Look!是排序诶➡️"),me,s("text",ge,re(c.value==null?"默认":c.value=="asc"?"升序":"降序"),1)]),t(o,{type:"primary",class:"handleAdd",onClick:I},{default:r(()=>[u(" 投稿弹幕 ")]),_:1}),ne((T(),se(g,{stripe:"",data:e.tableData,"empty-text":"我还没有加载完喔~~",class:"eldtable","header-cell-style":{color:"#ff0000",fontSize:"13px",whitespace:"normal !important"},"cell-style":{cursor:"Pointer"},onRowClick:D,onSortChange:k},{default:r(()=>[t(n,{width:"58",prop:"id",label:"序号"}),t(n,{prop:"barrage","min-width":"90",label:"弹幕"}),t(n,{prop:"like","min-width":"15",label:"赞",onClick:a[0]||(a[0]=p=>console.log("11"))},{default:r(()=>[t(o,{type:"",label:"操作"},{default:r(()=>[_e]),_:1})]),_:1}),t(n,{label:"",align:"center",width:"85"},{default:r(()=>[t(o,{type:"primary",label:"操作"},{default:r(()=>[u("复制")]),_:1})]),_:1}),t(n,{prop:"cnt",label:"复制次数",width:"55",sortable:"custom"})]),_:1},8,["data"])),[[O,y.value]])]),s("div",be,[s("div",null,[t(h,{background:"red",layout:"prev, pager, next, jumper",total:e.total,"pager-count":4,"page-size":e.pageSize,onCurrentChange:B},null,8,["total","page-size"])])]),t(q,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":a[4]||(a[4]=p=>e.dialogFormVisible=p),draggable:"",title:"投稿弹幕",width:"82%"},{footer:r(()=>[s("div",he,[t(o,{onClick:a[3]||(a[3]=p=>e.dialogFormVisible=!1)},{default:r(()=>[u("关闭")]),_:1}),t(o,{type:"primary",onClick:M},{default:r(()=>[u(" 投稿并关闭 ")]),_:1}),t(o,{type:"primary",onClick:N},{default:r(()=>[u(" 连续投稿 ")]),_:1})])]),default:r(()=>[t(A,{model:e,"label-width":"100px",rules:S,"label-position":"right"},{default:r(()=>[t(P,{label:"分栏","label-width":100,prop:"table"},{default:r(()=>[t(w,{modelValue:e.table,"onUpdate:modelValue":a[1]||(a[1]=p=>e.table=p),placeholder:"选择上传的分栏"},{default:r(()=>[t(i,{label:"喷玩机器篇",value:"machine_penWJQ"}),t(i,{label:"木柜子篇",value:"machine_mygo"}),t(i,{label:"直播间互喷篇",value:"machine_ZbjHuPen"}),t(i,{label:"喷选手篇",value:"machine_penPlayer"}),t(i,{label:"+1",value:"machine_p1"}),t(i,{label:"群魔乱舞篇",value:"machine_QMLW"}),t(i,{label:"QUQU",value:"machine_QUQU"})]),_:1},8,["modelValue"])]),_:1}),t(P,{label:"弹幕内容",prop:"barrage"},{default:r(()=>[t(Q,{maxlength:"255",modelValue:e.barrage,"onUpdate:modelValue":a[2]||(a[2]=p=>e.barrage=p),autocomplete:"off",autosize:{minRows:2,maxRows:4},"show-word-limit":"",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),t(L,{right:50,bottom:50},{default:r(()=>[u("UP")]),_:1})],64)}}},Ie=ae(fe,[["__scopeId","data-v-b7fd58c9"]]);export{Ie as default};
