import{d as f}from"./pinia.DfSVr1RC.js";import{M as d,h as u,g as p,A as i,p as h}from"./index.IrCsSW02.js";import{h as M}from"./@vue.BltuATdo.js";async function m(e,r){var a,s;try{const t=await u.get(e);return(s=(a=t==null?void 0:t.data)==null?void 0:a[0])!=null&&s.barrage?t.data.map(n=>({tags:n.tags,content:n.barrage,id:`${n.barrageId}`,copyCount:n.cnt,submitTime:n.submitTime})):(console.log(`获取${r}烂梗失败`,t),!1)}catch(t){return console.log(`获取${r}烂梗失败`,t),!1}}function y(){return m(i.GET_HOT_MEME_24h,"24h热门")}function $(){return m(i.GET_HOT_MEME_7D,"七天热门")}async function A(e){return console.log(`搜索词: ${e.barrage}, 标签: ${e.tags}, 投稿时间: ${e.submitTime}, 排序: ${e.sort}, 每页烂梗数: ${e.pageSize}, 页数: ${e.pageNum}`),await h({url:i.SEARCH_MEME,data:e})}async function L(e,r,a,s){var t,c,n;console.log(`请求烂梗分类: ${e}, 页数: ${r}, 每页烂梗数: ${a}`);try{const l=(t=d.find(o=>o.category===e))==null?void 0:t.api;if(!l)throw new Error("未找到此分类");const g=await u.get(l,{params:{tags:s,pageNum:r,pageSize:a}});if(((n=(c=g.data)==null?void 0:c.list)==null?void 0:n.length)<=0)throw new Error("请求到的烂梗列表为空");return{memeArr:g.data.list.map(o=>({tags:o.tags,content:o.barrage,id:o.id,category:e,copyCount:+o.cnt,likes:+o.likes,submitTime:o.submitTime})),total:g.data.total}}catch(l){return console.error("请求烂梗列表失败",l),!1}}async function w(){const e=await u.get(i.GET_MEME_TAGS);if(e.code!==200)throw new Error(e.msg);return e.data}async function H(){return await p(i.GET_RAND_ONE_MEME)}function v(e,r){if(!e)return[];const a=e.split(",");return r.filter(s=>a.includes(s.dictValue)).map(s=>({label:s.dictLabel,iconUrl:s.iconUrl}))}const E="data:image/svg+xml,%3csvg%20width='10'%20height='10'%20viewBox='0%200%2010%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5_205)'%3e%3cpath%20d='M9.1875%205.09375L4.8125%200.71875C4.75%200.65625%204.6875%200.625%204.59375%200.625H1.21875C0.90625%200.625%200.625%200.90625%200.625%201.21875V4.59375C0.625%204.6875%200.65625%204.75%200.71875%204.8125L5.09375%209.1875C5.21875%209.3125%205.375%209.375%205.53125%209.375C5.6875%209.375%205.84375%209.3125%205.96875%209.1875L9.1875%205.9375C9.4375%205.71875%209.4375%205.3125%209.1875%205.09375ZM5.53125%208.75L1.25%204.46875V1.25H4.46875L8.75%205.53125L5.53125%208.75Z'%20fill='black'/%3e%3cpath%20d='M2.8125%201.875C2.28125%201.875%201.875%202.28125%201.875%202.8125C1.875%203.34375%202.28125%203.75%202.8125%203.75C3.34375%203.75%203.75%203.34375%203.75%202.8125C3.75%202.28125%203.34375%201.875%202.8125%201.875ZM2.8125%203.125C2.625%203.125%202.5%203%202.5%202.8125C2.5%202.625%202.625%202.5%202.8125%202.5C3%202.5%203.125%202.625%203.125%202.8125C3.125%203%203%203.125%202.8125%203.125Z'%20fill='black'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_5_205'%3e%3crect%20width='10'%20height='10'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",G=f("memeTags",()=>{const e=M([]);let r,a=null;r=new Promise(t=>{a=t});async function s(){const t=await w();t.forEach(c=>{c.iconUrl=c.iconUrl||E}),e.value=t,a==null||a()}return{memeTags:e,setMemeTags:s,tagsLoaded:r}});function P(e){return e?e.replace("T"," ").split(".")[0]:""}export{y as a,$ as b,H as c,L as d,P as e,v as g,A as s,G as u};
