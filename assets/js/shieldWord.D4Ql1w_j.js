import{h as v,_ as Y}from"./index.FEbWbom6.js";import{a as n}from"./element-plus.Devhffg8.js";import{d as Z,h as s,j as ee,f as te,al as d,ar as oe,c as f,o as m,a as r,R as a,K as $,O as i,J as l,Q as B,a6 as ae,I as le,P as _,L as se}from"./@vue.BltuATdo.js";import"./pinia.DfSVr1RC.js";import"./js-cookie.Cz0CWeBA.js";import"./axios.ngrFHoWO.js";import"./vue-router.BFvkXMb7.js";import"./@element-plus.GoM0nurT.js";import"./lodash-es.CDeyng3v.js";import"./@vueuse.BO4JNAXw.js";import"./@popperjs.D_chPuIy.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.BKG3DVjA.js";import"./async-validator.9PlIezaS.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.BQoi3Ox2.js";import"./@floating-ui.D0iZPv2f.js";const re={class:"card main"},ne={class:"header-section"},ie={class:"title"},de={class:"card-list"},ue={key:0,class:"not-word-stamp"},pe={class:"word"},me={class:"time"},ce={class:"btn-group"},ge={class:"pagination"},ve={class:"dialog-footer"},fe={class:"pagination",style:{"margin-top":"20px"}},_e={class:"dialog-footer"},ye=Z({__name:"shieldWord",setup(he){const R=t=>{switch(t){case"1":return"success";case"2":return"danger";default:return"info"}},F=t=>{switch(t){case"1":return"已通过";case"2":return"未通过";default:return"待审核"}},N=s([]),w=s(!1),S=s(1),k=s(50),L=s(0),y=s(!1),C=s(!1),h=s(),c=s({shieldWord:""}),g=s(!1),T=s([]),z=s(!1),W=s(1),x=s(20),U=s(0),E={shieldWord:[{required:!0,message:"请输入屏蔽词",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}]},p=async()=>{w.value=!0;try{const t=await v.get("/machine/getShieldWordList",{params:{pageNum:S.value,pageSize:k.value}});t.code===200?(N.value=t.data.list,L.value=t.data.total):n.error(t.msg||"加载失败")}catch{n.error("请求失败，请检查接口连接")}finally{w.value=!1}},j=async t=>{try{const e=await v.get("/machine/addIsShieldWord",{params:{id:t}});e.code===200?(n.success("提交成功 ✅"),p()):n.error(e.msg||"提交失败")}catch{n.error("请求失败")}},q=async t=>{try{const e=await v.get("/machine/addNotShieldWord",{params:{id:t}});e.code===200?(n.success("提交成功 ✅"),p()):n.error(e.msg||"提交失败")}catch{n.error("请求失败")}},J=async()=>{h.value&&await h.value.validate(async t=>{if(t){C.value=!0;try{const e=await v.get("/machine/addShieldWord",{params:{shieldWord:c.value.shieldWord.trim()}});e.code===200?(n.success("投稿成功 ✅"),P(),p()):n.error(e.msg||"投稿失败")}catch(e){console.error("投稿失败:",e),n.error("请求失败，请检查网络连接")}finally{C.value=!1}}})},P=()=>{var t;y.value=!1,c.value.shieldWord="",(t=h.value)==null||t.resetFields()},V=async()=>{z.value=!0;try{const t=await v.get("/machine/getMyShieldWordList",{params:{pageNum:W.value,pageSize:x.value}});t.code===200?(T.value=t.data.list,U.value=t.data.total):t.code===401&&n.error(t.msg||"请先登录")}catch{n.error("请先登录")}finally{z.value=!1}};return ee(g,t=>{t&&(W.value=1,V())}),te(()=>{p()}),(t,e)=>{const u=d("el-button"),D=d("el-pagination"),K=d("el-backtop"),O=d("el-input"),Q=d("el-form-item"),A=d("el-form"),I=d("el-dialog"),b=d("el-table-column"),G=d("el-tag"),H=d("el-table"),M=oe("loading");return m(),f(B,null,[r("div",re,[r("div",ne,[r("h2",ie,[e[11]||(e[11]=i("屏蔽词收集列表 ",-1)),a(u,{style:{"margin-left":"10px"},type:"primary",onClick:e[0]||(e[0]=o=>y.value=!0)},{default:l(()=>[...e[10]||(e[10]=[i(" 屏蔽词投稿 ",-1)])]),_:1}),e[12]||(e[12]=r("h6",null,"将会在您复制烂梗时提示是否包含屏蔽词(包含屏蔽词烂梗可能不能在直播间发送)",-1))]),a(u,{onClick:e[1]||(e[1]=o=>g.value=!0)},{default:l(()=>[...e[13]||(e[13]=[i("我投稿的屏蔽词",-1)])]),_:1})]),$((m(),f("div",de,[(m(!0),f(B,null,ae(N.value,o=>(m(),f("div",{class:"card shield-card",key:o.id},[o.isShieldWord===0?(m(),f("div",ue,"这不是屏蔽词")):se("",!0),r("div",null,[e[14]||(e[14]=i("屏蔽词：",-1)),r("span",pe,_(o.shieldWord),1)]),r("div",me,"投稿时间："+_(o.submitTime),1),r("div",ce,[a(u,{type:"success",onClick:X=>j(o.id)},{default:l(()=>[e[15]||(e[15]=i(" 这是屏蔽词：",-1)),r("span",null,_(o.isWordNum),1)]),_:2},1032,["onClick"]),a(u,{type:"danger",onClick:X=>q(o.id)},{default:l(()=>[e[16]||(e[16]=i(" 这不是屏蔽词：",-1)),r("span",null,_(o.notWordNum),1)]),_:2},1032,["onClick"])])]))),128))])),[[M,w.value]]),r("div",ge,[a(D,{"current-page":S.value,"onUpdate:currentPage":e[2]||(e[2]=o=>S.value=o),"page-size":k.value,"onUpdate:pageSize":e[3]||(e[3]=o=>k.value=o),"page-sizes":[10,20,50,100],background:"",layout:"prev, pager, next, sizes, total",total:L.value,onCurrentChange:p,onSizeChange:p},null,8,["current-page","page-size","total"])])]),a(K,{right:50,bottom:50},{default:l(()=>[...e[17]||(e[17]=[i("UP",-1)])]),_:1}),a(I,{modelValue:y.value,"onUpdate:modelValue":e[5]||(e[5]=o=>y.value=o),title:"屏蔽词投稿",width:"500px","close-on-click-modal":!1},{footer:l(()=>[r("div",ve,[a(u,{onClick:P},{default:l(()=>[...e[19]||(e[19]=[i("取消",-1)])]),_:1}),a(u,{type:"primary",onClick:J,loading:C.value},{default:l(()=>[...e[20]||(e[20]=[i(" 提交 ",-1)])]),_:1},8,["loading"])])]),default:l(()=>[a(A,{model:c.value,rules:E,ref_key:"formRef",ref:h,"label-width":"65px"},{default:l(()=>[a(Q,{label:"屏蔽词",prop:"shieldWord"},{default:l(()=>[a(O,{modelValue:c.value.shieldWord,"onUpdate:modelValue":e[4]||(e[4]=o=>c.value.shieldWord=o),placeholder:"请输入要投稿的屏蔽词",maxlength:"10","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1}),e[18]||(e[18]=r("span",null,"⁕由于屏蔽词是某个词语，故限制长度为10",-1))]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(I,{modelValue:g.value,"onUpdate:modelValue":e[9]||(e[9]=o=>g.value=o),title:"我投稿的屏蔽词",width:"710px"},{footer:l(()=>[r("div",_e,[a(u,{onClick:e[8]||(e[8]=o=>g.value=!1)},{default:l(()=>[...e[21]||(e[21]=[i("关闭",-1)])]),_:1})])]),default:l(()=>[$((m(),le(H,{data:T.value,stripe:"",style:{width:"100%"}},{default:l(()=>[a(b,{prop:"shieldWord",label:"屏蔽词",width:"200"}),a(b,{prop:"submitTime",label:"投稿时间",width:"180"}),a(b,{prop:"reviewTime",label:"审核时间",width:"180"}),a(b,{prop:"state",label:"状态",width:"120"},{default:l(o=>[a(G,{type:R(o.row.state)},{default:l(()=>[i(_(F(o.row.state)),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])),[[M,z.value]]),r("div",fe,[a(D,{"current-page":W.value,"onUpdate:currentPage":e[6]||(e[6]=o=>W.value=o),"page-size":x.value,"onUpdate:pageSize":e[7]||(e[7]=o=>x.value=o),"page-sizes":[10,20,50,100],background:"",layout:"prev, pager, next, sizes, total",total:U.value,onCurrentChange:V,onSizeChange:V},null,8,["current-page","page-size","total"])])]),_:1},8,["modelValue"])],64)}}}),$e=Y(ye,[["__scopeId","data-v-4d341e11"]]);export{$e as default};
