import{v as he,c as ce,a as G,M as ge,e as pe,N as fe,n as _e,L as be}from"./element-plus.BPmODNcd.js";import{d as Z,r as m,w as te,c as f,o as p,a as s,Q as C,u as D,I as _,D as L,O as w,P as le,a6 as ne,V as A,n as me,k as ee,i as ie,J as Te,M as J,K as P,W as ve,H as ke,S as ye}from"./@vue.Ca5AQEsS.js";import{d as B}from"./vuedraggable.DT4yJUdD.js";import{_ as X,h as se,u as we}from"./index.DkI5jqre.js";import{u as Ce}from"./vue-router.DhOS9MZH.js";import{R as $e,v as Ve}from"./@element-plus.De7neK-R.js";import{h as Pe}from"./html2canvas.BfYXEYrK.js";import*as H from"three";import{OrbitControls as Ie}from"three/examples/jsm/controls/OrbitControls.js";import{R as Le,G as Me}from"./three.C0i7i0LI.js";import"./lodash-es.S0Y0Up6J.js";import"./@vueuse.BFkoDYlQ.js";import"./@popperjs.D_chPuIy.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.DcnvBwdO.js";import"./async-validator.9PlIezaS.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.BQoi3Ox2.js";import"./@floating-ui.58V2siOx.js";import"./vue.CP_DfUbm.js";import"./sortablejs.YiSzADr_.js";import"./pinia.Dz8zdBJG.js";import"./axios.xsH4HHeE.js";import"./js-cookie.Cz0CWeBA.js";const Se={class:"major-predict-root"},qe={class:"team-pool"},De=["src","alt"],Ee={class:"team-name"},xe={class:"predict-area"},Be={class:"predict-row"},Re={class:"predict-block"},ze={class:"predict-label"},Ae=["src","alt"],Ue={class:"team-name"},We=["onClick","disabled"],Fe={class:"predict-block"},je={class:"predict-label"},Ne=["src","alt"],He={class:"team-name"},Ge=["onClick","disabled"],Oe={class:"predict-row advance-row"},Ke={class:"advance-label"},Ze=["src","alt"],Je={class:"team-name"},Qe=["onClick","disabled"],Ye=Z({name:"MatchPredictionBase"}),Xe=Z({...Ye,props:{teams:{},firstLabel:{},secondLabel:{},advanceLabel:{},maxAdvance:{},isTimeValid:{type:Boolean}},setup(U,{expose:N}){const b=U,R={name:"teams"},r=m([]),c=m([]),d=m([]),v=m([]);te(()=>b.teams,a=>{r.value=[...a]},{immediate:!0});function V(a){const o=a.draggedContext.element;return a.from&&!a.from.classList.contains("team-list")&&a.to.classList.contains("predict-slot")?!0:!(M(o.id)||c.value.length>=2)}function T(a){const o=a.draggedContext.element;return a.from&&!a.from.classList.contains("team-list")&&a.to.classList.contains("predict-slot")?!0:!(M(o.id)||d.value.length>=2)}function k(a){const o=a.draggedContext.element;return!I(a.from)&&a.to.classList.contains("predict-slot")?!0:!M(o.id)}function I(a){return a&&a.classList&&a.classList.contains("team-list")}function M(a){return c.value.some(o=>o.id===a)||d.value.some(o=>o.id===a)||v.value.some(o=>o.id===a)}function S(a){if(a.added){const o=a.added.element,i=a.added.newIndex??0;if(a.from&&!a.from.classList.contains("team-list")){const n=c.value[i];n&&(c.value.splice(i,1),c.value.splice(i,0,o),r.value.some(g=>g.id===n.id)||r.value.push(n))}else if(c.value.length>=2){const n=c.value[i];n&&(c.value.splice(i,1),c.value.splice(i,0,o),r.value.some(g=>g.id===n.id)||r.value.push(n))}else c.value.splice(i,0,o);c.value.length>2&&c.value.splice(2).forEach(g=>{r.value.some($=>$.id===g.id)||r.value.push(g)}),d.value=d.value.filter(n=>n.id!==o.id),v.value=v.value.filter(n=>n.id!==o.id)}u()}function x(a){if(a.added){const o=a.added.element,i=a.added.newIndex??0;if(a.from&&!a.from.classList.contains("team-list")){const n=d.value[i];n&&(d.value.splice(i,1),d.value.splice(i,0,o),r.value.some(g=>g.id===n.id)||r.value.push(n))}else if(d.value.length>=2){const n=d.value[i];n&&(d.value.splice(i,1),d.value.splice(i,0,o),r.value.some(g=>g.id===n.id)||r.value.push(n))}else d.value.splice(i,0,o);d.value.length>2&&d.value.splice(2).forEach(g=>{r.value.some($=>$.id===g.id)||r.value.push(g)}),c.value=c.value.filter(n=>n.id!==o.id),v.value=v.value.filter(n=>n.id!==o.id)}u()}function z(a){if(a.added){const o=a.added.element;if(!a.from.classList.contains("team-list")&&a.added.newIndex!==void 0){const i=v.value[a.added.newIndex];i&&(v.value.splice(a.added.newIndex,1),v.value.splice(a.added.newIndex,0,o),r.value.some(n=>n.id===i.id)||r.value.push(i))}else if(v.value.length>b.maxAdvance){const i=a.added.newIndex??0,n=v.value[i];n&&(v.value.splice(i,1),v.value.splice(i,0,o),r.value.some(g=>g.id===n.id)||r.value.push(n))}c.value=c.value.filter(i=>i.id!==o.id),d.value=d.value.filter(i=>i.id!==o.id)}u()}function E(a,o){let i;a==="first"?i=c.value.splice(o,1):i=d.value.splice(o,1),r.value.push(...i),u()}function W(a){const o=v.value.splice(a,1);r.value.push(...o),u()}function u(){me(()=>{const a=[...c.value.map(o=>o.id),...d.value.map(o=>o.id),...v.value.map(o=>o.id)];r.value=r.value.filter(o=>!a.includes(o.id))})}return N({firstTeam:c,secondTeam:d,advanceTeams:v}),(a,o)=>(p(),f("div",Se,[s("div",qe,[C(D(B),{list:r.value,group:R,sort:!1,"item-key":"id",class:"team-list","ghost-class":"ghost",disabled:!a.isTimeValid},{item:_(({element:i})=>[(p(),f("div",{class:L(["team-card",{disabled:!a.isTimeValid}]),key:i.id},[s("img",{src:i.logo,alt:i.name,class:"team-logo"},null,8,De),s("div",Ee,w(i.name),1)],2))]),_:1},8,["list","disabled"])]),s("div",xe,[s("div",Be,[s("div",Re,[s("div",ze,w(a.firstLabel),1),C(D(B),{list:c.value,group:R,sort:!1,"item-key":"id",class:"predict-slot big","ghost-class":"ghost",move:V,onChange:S,disabled:!a.isTimeValid},{item:_(({element:i,index:n})=>[(p(),f("div",{class:L(["team-card selected big",{disabled:!a.isTimeValid}]),key:i.id},[s("img",{src:i.logo,alt:i.name,class:"team-logo big"},null,8,Ae),s("div",Ue,w(i.name),1),s("button",{class:"remove-btn",onClick:A(g=>E("first",n),["stop"]),disabled:!a.isTimeValid},"×",8,We)],2))]),footer:_(()=>[(p(!0),f(le,null,ne(Math.max(0,2-c.value.length),i=>(p(),f("div",{key:i,class:"empty-slot big"},"?"))),128))]),_:1},8,["list","disabled"])]),s("div",Fe,[s("div",je,w(a.secondLabel),1),C(D(B),{list:d.value,group:R,sort:!1,"item-key":"id",class:"predict-slot big","ghost-class":"ghost",move:T,onChange:x,disabled:!a.isTimeValid},{item:_(({element:i,index:n})=>[(p(),f("div",{class:L(["team-card selected big",{disabled:!a.isTimeValid}]),key:i.id},[s("img",{src:i.logo,alt:i.name,class:"team-logo big"},null,8,Ne),s("div",He,w(i.name),1),s("button",{class:"remove-btn",onClick:A(g=>E("second",n),["stop"]),disabled:!a.isTimeValid},"×",8,Ge)],2))]),footer:_(()=>[(p(!0),f(le,null,ne(Math.max(0,2-d.value.length),i=>(p(),f("div",{key:i,class:"empty-slot big"},"?"))),128))]),_:1},8,["list","disabled"])])]),s("div",Oe,[s("div",Ke,w(a.advanceLabel),1),C(D(B),{list:v.value,group:R,sort:!0,"item-key":"id",class:"predict-slot multi big","ghost-class":"ghost",move:k,onChange:z,disabled:!a.isTimeValid},{item:_(({element:i,index:n})=>[(p(),f("div",{class:L(["team-card selected big",{disabled:!a.isTimeValid}]),key:i.id},[s("img",{src:i.logo,alt:i.name,class:"team-logo big"},null,8,Ze),s("div",Je,w(i.name),1),s("button",{class:"remove-btn",onClick:A(g=>W(n),["stop"]),disabled:!a.isTimeValid},"×",8,Qe)],2))]),footer:_(()=>[(p(!0),f(le,null,ne(Math.max(0,a.maxAdvance-v.value.length),i=>(p(),f("div",{key:i,class:"empty-slot big"},"?"))),128))]),_:1},8,["list","disabled"])])])]))}}),es=X(Xe,[["__scopeId","data-v-951e29ba"]]),de={getMatchTeams(U,N){return se.get(`/machine/matches/${U}/teams`,{params:{phase:N}})},submitPrediction(U){return se.post("/machine/prediction/submit",U)},getUserPredictions(U){return se.get("/machine/prediction/records",{params:{matchId:U.matchId,phase:U.phase}})}},ss={class:"major-phase","element-loading-text":"加载队伍数据中..."},ts={class:"title"},as={class:"save-button"},os=Z({name:"MajorPhase"}),is=Z({...os,props:{isTimeValid:{type:Boolean},matchId:{},phase:{}},setup(U,{expose:N}){const b=U,R=ee(()=>({onePhase:"第一阶段",twoPhase:"第二阶段",threePhase:"第三阶段"})[b.phase]),r=we(),c=m(),d=m([]),v=m([]),V=m([]),T=m([]),k=m(!1),I=m(!1),S=((u,a)=>{let o=null;return function(...i){o&&clearTimeout(o),o=setTimeout(()=>{u.apply(this,i),o=null},a)}})(()=>{b.isTimeValid&&(console.log("触发防抖保存..."),W())},300);te(c,u=>{u&&te([()=>u.firstTeam,()=>u.secondTeam,()=>u.advanceTeams],([a,o,i])=>{d.value=[...a],v.value=[...o],V.value=[...i],!k.value&&!I.value&&b.isTimeValid&&S()},{deep:!0})},{immediate:!0});const x=async()=>{try{k.value=!0,console.log(`获取${R.value}队伍数据，matchId:`,b.matchId);const u=await de.getMatchTeams(b.matchId,b.phase);console.log("获取到的原始数据:",u.data),T.value=u.data.map(a=>({id:a.id,name:a.teamName,logo:a.teamImgUrl})),console.log("处理后的队伍数据:",T.value)}catch(u){console.error("获取队伍数据失败:",u),G.error("获取队伍数据失败")}finally{k.value=!1}},z=async()=>{var u;if(!b.matchId){console.warn("matchId未设置，跳过获取预测数据");return}try{I.value=!0,k.value=!0,T.value.length===0&&await x();const a=await de.getUserPredictions({matchId:b.matchId,phase:b.phase,userId:r.userId});if(a.data){let o=Array.isArray(a.data)?a.data[0]:a.data;const i=new Set;if(o.sl){const n=o.sl.split(","),g=T.value.filter($=>n.includes($.id.toString()));d.value=g,g.forEach($=>i.add($.id.toString()))}if(o.ls){const n=o.ls.split(","),g=T.value.filter($=>n.includes($.id.toString()));v.value=g,g.forEach($=>i.add($.id.toString()))}if(o.advance){const n=o.advance.split(","),g=T.value.filter($=>n.includes($.id.toString()));V.value=g,g.forEach($=>i.add($.id.toString()))}T.value=T.value.filter(n=>!i.has(n.id.toString())),c.value&&(c.value.firstTeam=[...d.value],c.value.secondTeam=[...v.value],c.value.advanceTeams=[...V.value])}else console.log("未找到用户之前的预测数据")}catch(a){if(((u=a.response)==null?void 0:u.status)===401){console.log("用户未登录，跳过获取预测数据");return}console.error("获取预测数据失败:",a),G.error("获取预测数据失败")}finally{k.value=!1,setTimeout(()=>{I.value=!1},100)}},E=()=>{const u=[];return d.value.length!==2&&u.push("请选择2支3-0队伍"),v.value.length!==2&&u.push("请选择2支0-3队伍"),V.value.length!==6&&u.push("请选择6支晋级队伍"),u},W=async()=>{var a;const u=E();u.length>0&&G.warning(u.join(`
`));try{const o={matchId:b.matchId,phase:b.phase,s_l:d.value.map(n=>n.id.toString()).join(","),l_s:v.value.map(n=>n.id.toString()).join(","),advance:V.value.map(n=>n.id)},i=await de.submitPrediction(o);G.success("预测数据保存成功")}catch(o){if(((a=o.response)==null?void 0:a.status)===401){G.warning("请先登录后再进行预测");return}console.error("保存预测数据失败:",o),G.error("保存预测数据失败")}};return ie(async()=>{b.matchId&&(await x(),await z())}),N({getPredictData(){return{firstTeam:d.value,secondTeam:v.value,advanceTeams:V.value}},fetchTeams:x,fetchUserPrediction:z,validateAndSavePrediction:W}),(u,a)=>{const o=ce,i=he;return Te((p(),f("div",ss,[s("h2",ts,w(R.value)+"竞猜作业",1),C(es,{ref_key:"predictRef",ref:c,teams:T.value,"first-label":"3-0","second-label":"0-3","advance-label":"3-2或3-1晋级的6支队伍","max-advance":6,isTimeValid:u.isTimeValid,"onUpdate:firstTeam":a[0]||(a[0]=n=>d.value=n),"onUpdate:secondTeam":a[1]||(a[1]=n=>v.value=n),"onUpdate:advanceTeams":a[2]||(a[2]=n=>V.value=n)},null,8,["teams","isTimeValid"]),s("div",as,[C(o,{onClick:W,disabled:!u.isTimeValid},{default:_(()=>a[3]||(a[3]=[J("保存预测")])),_:1,__:[3]},8,["disabled"])])])),[[i,k.value]])}}}),re=X(is,[["__scopeId","data-v-7353871b"]]),ls={class:"major-champion"},ns={class:"bracket-container"},ds={class:"bracket-stage"},rs={class:"matches"},cs={class:"match"},us=["src","alt"],ms={class:"team-name"},vs=["onClick","disabled"],hs={key:0,class:"empty-slot"},gs=["src","alt"],ps={class:"team-name"},fs=["onClick","disabled"],_s={key:0,class:"empty-slot"},bs={class:"match"},Ts=["src","alt"],ks={class:"team-name"},ys=["onClick","disabled"],ws={key:0,class:"empty-slot"},Cs=["src","alt"],$s={class:"team-name"},Vs=["onClick","disabled"],Ps={key:0,class:"empty-slot"},Is={class:"match"},Ls=["src","alt"],Ms={class:"team-name"},Ss=["onClick","disabled"],qs={key:0,class:"empty-slot"},Ds=["src","alt"],Es={class:"team-name"},xs=["onClick","disabled"],Bs={key:0,class:"empty-slot"},Rs={class:"match"},zs=["src","alt"],As={class:"team-name"},Us=["onClick","disabled"],Ws={key:0,class:"empty-slot"},Fs=["src","alt"],js={class:"team-name"},Ns=["onClick","disabled"],Hs={key:0,class:"empty-slot"},Gs={class:"bracket-stage"},Os={class:"matches"},Ks={class:"match"},Zs=["src","alt"],Js={class:"team-name"},Qs=["onClick","disabled"],Ys={key:0,class:"empty-slot"},Xs=["src","alt"],et={class:"team-name"},st=["onClick","disabled"],tt={key:0,class:"empty-slot"},at={class:"match"},ot=["src","alt"],it={class:"team-name"},lt=["onClick","disabled"],nt={key:0,class:"empty-slot"},dt=["src","alt"],rt={class:"team-name"},ct=["onClick","disabled"],ut={key:0,class:"empty-slot"},mt={class:"bracket-stage"},vt={class:"matches"},ht={class:"match"},gt=["src","alt"],pt={class:"team-name"},ft=["onClick","disabled"],_t={key:0,class:"empty-slot"},bt=["src","alt"],Tt={class:"team-name"},kt=["onClick","disabled"],yt={key:0,class:"empty-slot"},wt={class:"bracket-stage champion-stage"},Ct={class:"matches"},$t=["src","alt"],Vt={class:"team-name"},Pt=["onClick","disabled"],It={key:0,class:"empty-slot champion-empty"},Lt=Z({name:"MajorChampion"}),Mt=Z({...Lt,props:{isTimeValid:{type:Boolean}},setup(U,{expose:N}){const b={name:"teams"},R=m(),r=m([]),c=m([]),d=m([]),v=m([]),V=m([]),T=m([]),k=m([]),I=m([]),M=m([]),S=m([]),x=m([]),z=m([]),E=m([]),W=m([]),u=m([]),a=m([]),o=m([]),i=m([]),n=t=>{switch(t){case"quarters1":return v;case"quarters2":return V;case"quarters3":return T;case"quarters4":return k;case"quarters5":return I;case"quarters6":return M;case"quarters7":return S;case"quarters8":return x;case"semis1":return z;case"semis2":return E;case"semis3":return W;case"semis4":return u;case"finals1":return a;case"finals2":return o;case"champion":return i;default:return m([])}},g=t=>{const l=t.from.parentElement.id,e=t.to.parentElement.id;if(!l||!e)return!1;if(l===e)return!0;if(l.startsWith("quarters")&&e.startsWith("semis")){const h=parseInt(l.replace("quarters","")),j=parseInt(e.replace("semis",""));if(Math.ceil(h/2)===j)return!0}if(l.startsWith("semis")&&e.startsWith("finals")){const h=parseInt(l.replace("semis","")),j=parseInt(e.replace("finals",""));if(Math.ceil(h/2)===j)return!0}return!!(l.startsWith("finals")&&e==="champion"||e.startsWith("quarters"))},$=(t,l)=>{const e=n(l);if(t.added){const h=t.added.element;[v,V,T,k,I,M,S,x,z,E,W,u,a,o,i].forEach(F=>{if(F!==e){const K=F.value.findIndex(Q=>Q.id===h.id);K!==-1&&F.value.splice(K,1)}})}};function q(t,l){const e=n(t),h=e.value.findIndex(j=>j.id===l);h!==-1&&e.value.splice(h,1)}const y=()=>{const t=R.value;t&&(r.value=[...t.firstTeam],c.value=[...t.secondTeam],d.value=[...t.advanceTeams])};return N({getPredictData(){return y(),{firstTeam:r.value,secondTeam:c.value,advanceTeams:d.value}}}),(t,l)=>(p(),f("div",ls,[l[22]||(l[22]=s("h2",{class:"title"},"冠军竞猜",-1)),s("div",ns,[s("div",ds,[l[15]||(l[15]=s("div",{class:"stage-title"},"四分之一决赛",-1)),s("div",rs,[s("div",cs,[C(D(B),{id:"quarters1",list:v.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:l[0]||(l[0]=e=>$(e,"quarters1")),move:g,max:1,disabled:!t.isTimeValid},{item:_(({element:e})=>[s("div",{class:L(["team-card selected",{disabled:!t.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,us),s("div",ms,w(e.name),1),s("button",{class:"remove-btn",onClick:A(h=>q("quarters1",e.id),["stop"]),disabled:!t.isTimeValid},"×",8,vs)],2)]),footer:_(()=>[v.value.length===0?(p(),f("div",hs,"待定")):P("",!0)]),_:1},8,["list","disabled"]),C(D(B),{id:"quarters2",list:V.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:l[1]||(l[1]=e=>$(e,"quarters2")),move:g,max:1,disabled:!t.isTimeValid},{item:_(({element:e})=>[s("div",{class:L(["team-card selected",{disabled:!t.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,gs),s("div",ps,w(e.name),1),s("button",{class:"remove-btn",onClick:A(h=>q("quarters2",e.id),["stop"]),disabled:!t.isTimeValid},"×",8,fs)],2)]),footer:_(()=>[V.value.length===0?(p(),f("div",_s,"待定")):P("",!0)]),_:1},8,["list","disabled"])]),s("div",bs,[C(D(B),{id:"quarters3",list:T.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:l[2]||(l[2]=e=>$(e,"quarters3")),move:g,max:1,disabled:!t.isTimeValid},{item:_(({element:e})=>[s("div",{class:L(["team-card selected",{disabled:!t.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,Ts),s("div",ks,w(e.name),1),s("button",{class:"remove-btn",onClick:A(h=>q("quarters3",e.id),["stop"]),disabled:!t.isTimeValid},"×",8,ys)],2)]),footer:_(()=>[T.value.length===0?(p(),f("div",ws,"待定")):P("",!0)]),_:1},8,["list","disabled"]),C(D(B),{id:"quarters4",list:k.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:l[3]||(l[3]=e=>$(e,"quarters4")),move:g,max:1,disabled:!t.isTimeValid},{item:_(({element:e})=>[s("div",{class:L(["team-card selected",{disabled:!t.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,Cs),s("div",$s,w(e.name),1),s("button",{class:"remove-btn",onClick:A(h=>q("quarters4",e.id),["stop"]),disabled:!t.isTimeValid},"×",8,Vs)],2)]),footer:_(()=>[k.value.length===0?(p(),f("div",Ps,"待定")):P("",!0)]),_:1},8,["list","disabled"])]),s("div",Is,[C(D(B),{id:"quarters5",list:I.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:l[4]||(l[4]=e=>$(e,"quarters5")),move:g,max:1,disabled:!t.isTimeValid},{item:_(({element:e})=>[s("div",{class:L(["team-card selected",{disabled:!t.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,Ls),s("div",Ms,w(e.name),1),s("button",{class:"remove-btn",onClick:A(h=>q("quarters5",e.id),["stop"]),disabled:!t.isTimeValid},"×",8,Ss)],2)]),footer:_(()=>[I.value.length===0?(p(),f("div",qs,"待定")):P("",!0)]),_:1},8,["list","disabled"]),C(D(B),{id:"quarters6",list:M.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:l[5]||(l[5]=e=>$(e,"quarters6")),move:g,max:1,disabled:!t.isTimeValid},{item:_(({element:e})=>[s("div",{class:L(["team-card selected",{disabled:!t.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,Ds),s("div",Es,w(e.name),1),s("button",{class:"remove-btn",onClick:A(h=>q("quarters6",e.id),["stop"]),disabled:!t.isTimeValid},"×",8,xs)],2)]),footer:_(()=>[M.value.length===0?(p(),f("div",Bs,"待定")):P("",!0)]),_:1},8,["list","disabled"])]),s("div",Rs,[C(D(B),{id:"quarters7",list:S.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:l[6]||(l[6]=e=>$(e,"quarters7")),move:g,max:1,disabled:!t.isTimeValid},{item:_(({element:e})=>[s("div",{class:L(["team-card selected",{disabled:!t.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,zs),s("div",As,w(e.name),1),s("button",{class:"remove-btn",onClick:A(h=>q("quarters7",e.id),["stop"]),disabled:!t.isTimeValid},"×",8,Us)],2)]),footer:_(()=>[S.value.length===0?(p(),f("div",Ws,"待定")):P("",!0)]),_:1},8,["list","disabled"]),C(D(B),{id:"quarters8",list:x.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:l[7]||(l[7]=e=>$(e,"quarters8")),move:g,max:1,disabled:!t.isTimeValid},{item:_(({element:e})=>[s("div",{class:L(["team-card selected",{disabled:!t.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,Fs),s("div",js,w(e.name),1),s("button",{class:"remove-btn",onClick:A(h=>q("quarters8",e.id),["stop"]),disabled:!t.isTimeValid},"×",8,Ns)],2)]),footer:_(()=>[x.value.length===0?(p(),f("div",Hs,"待定")):P("",!0)]),_:1},8,["list","disabled"])])])]),l[19]||(l[19]=s("div",{class:"connector-column"},[s("div",{class:"connector-gap"})],-1)),s("div",Gs,[l[16]||(l[16]=s("div",{class:"stage-title"},"半决赛",-1)),s("div",Os,[s("div",Ks,[C(D(B),{id:"semis1",list:z.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:l[8]||(l[8]=e=>$(e,"semis1")),move:g,max:1,disabled:!t.isTimeValid},{item:_(({element:e})=>[s("div",{class:L(["team-card selected",{disabled:!t.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,Zs),s("div",Js,w(e.name),1),s("button",{class:"remove-btn",onClick:A(h=>q("semis1",e.id),["stop"]),disabled:!t.isTimeValid},"×",8,Qs)],2)]),footer:_(()=>[z.value.length===0?(p(),f("div",Ys,"待定")):P("",!0)]),_:1},8,["list","disabled"]),C(D(B),{id:"semis2",list:E.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:l[9]||(l[9]=e=>$(e,"semis2")),move:g,max:1,disabled:!t.isTimeValid},{item:_(({element:e})=>[s("div",{class:L(["team-card selected",{disabled:!t.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,Xs),s("div",et,w(e.name),1),s("button",{class:"remove-btn",onClick:A(h=>q("semis2",e.id),["stop"]),disabled:!t.isTimeValid},"×",8,st)],2)]),footer:_(()=>[E.value.length===0?(p(),f("div",tt,"待定")):P("",!0)]),_:1},8,["list","disabled"])]),s("div",at,[C(D(B),{id:"semis3",list:W.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:l[10]||(l[10]=e=>$(e,"semis3")),move:g,max:1,disabled:!t.isTimeValid},{item:_(({element:e})=>[s("div",{class:L(["team-card selected",{disabled:!t.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,ot),s("div",it,w(e.name),1),s("button",{class:"remove-btn",onClick:A(h=>q("semis3",e.id),["stop"]),disabled:!t.isTimeValid},"×",8,lt)],2)]),footer:_(()=>[W.value.length===0?(p(),f("div",nt,"待定")):P("",!0)]),_:1},8,["list","disabled"]),C(D(B),{id:"semis4",list:u.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:l[11]||(l[11]=e=>$(e,"semis4")),move:g,max:1,disabled:!t.isTimeValid},{item:_(({element:e})=>[s("div",{class:L(["team-card selected",{disabled:!t.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,dt),s("div",rt,w(e.name),1),s("button",{class:"remove-btn",onClick:A(h=>q("semis4",e.id),["stop"]),disabled:!t.isTimeValid},"×",8,ct)],2)]),footer:_(()=>[u.value.length===0?(p(),f("div",ut,"待定")):P("",!0)]),_:1},8,["list","disabled"])])])]),l[20]||(l[20]=s("div",{class:"connector-column"},[s("div")],-1)),s("div",mt,[l[17]||(l[17]=s("div",{class:"stage-title"},"总决赛",-1)),s("div",vt,[s("div",ht,[C(D(B),{id:"finals1",list:a.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:l[12]||(l[12]=e=>$(e,"finals1")),move:g,max:1,disabled:!t.isTimeValid},{item:_(({element:e})=>[s("div",{class:L(["team-card selected",{disabled:!t.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,gt),s("div",pt,w(e.name),1),s("button",{class:"remove-btn",onClick:A(h=>q("finals1",e.id),["stop"]),disabled:!t.isTimeValid},"×",8,ft)],2)]),footer:_(()=>[a.value.length===0?(p(),f("div",_t,"待定")):P("",!0)]),_:1},8,["list","disabled"]),C(D(B),{id:"finals2",list:o.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:l[13]||(l[13]=e=>$(e,"finals2")),move:g,max:1,disabled:!t.isTimeValid},{item:_(({element:e})=>[s("div",{class:L(["team-card selected",{disabled:!t.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,bt),s("div",Tt,w(e.name),1),s("button",{class:"remove-btn",onClick:A(h=>q("finals2",e.id),["stop"]),disabled:!t.isTimeValid},"×",8,kt)],2)]),footer:_(()=>[o.value.length===0?(p(),f("div",yt,"待定")):P("",!0)]),_:1},8,["list","disabled"])])])]),l[21]||(l[21]=s("div",{class:"connector-column third"},null,-1)),s("div",wt,[l[18]||(l[18]=s("div",{class:"stage-title"},"冠军",-1)),s("div",Ct,[C(D(B),{id:"champion",list:i.value,group:b,"item-key":"id",class:"slot champion-slot","ghost-class":"ghost",onChange:l[14]||(l[14]=e=>$(e,"champion")),move:g,max:1,disabled:!t.isTimeValid},{item:_(({element:e})=>[s("div",{class:L(["team-card selected",{disabled:!t.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,$t),s("div",Vt,w(e.name),1),s("button",{class:"remove-btn",onClick:A(h=>q("champion",e.id),["stop"]),disabled:!t.isTimeValid},"×",8,Pt)],2)]),footer:_(()=>[i.value.length===0?(p(),f("div",It,"待定")):P("",!0)]),_:1},8,["list","disabled"])])])])]))}}),St=X(Mt,[["__scopeId","data-v-526dd3fb"]]),qt={class:"coin-buttons"},Dt={key:0,class:"debug-info"},Et=Z({__name:"MatchCoinBase",props:{debug:{type:Boolean}},emits:["update:coinType","loading","model-loaded","progress"],setup(U,{emit:N}){const b=U,R=m(b.debug!==void 0?b.debug:!0);console.log("MatchCoinBase - debugInfo:",R.value);const r=m(""),c=m("初始化中..."),d=m(null);let v,V,T,k;const I=N,M={bronze:"#B08D57",silver:"#696969",gold:"#81FF08",diamond:"#BFD8EF"},S=m("gold"),x=o=>{S.value=o,z()},z=()=>{if(!v)return;const o=M[S.value];v.traverse(i=>{i.isMesh&&i.material&&(i.material.color.set(o),i.material.needsUpdate=!0)})},E=()=>{if(d.value){const o=d.value.getBoundingClientRect();r.value=`宽度: ${o.width}px, 高度: ${o.height}px`}},W=()=>{try{if(c.value="创建场景...",v=new H.Scene,console.log("场景创建成功"),c.value="创建相机...",V=new H.PerspectiveCamera(75,d.value?d.value.clientWidth/d.value.clientHeight:1,.1,1e3),V.position.set(0,0,5),console.log("相机创建成功"),c.value="创建渲染器...",T=new H.WebGLRenderer({antialias:!0}),!d.value)throw new Error("容器元素不存在");const o=d.value.clientWidth,i=d.value.clientHeight;T.setSize(o,i),T.setPixelRatio(window.devicePixelRatio),d.value.appendChild(T.domElement),console.log("渲染器创建成功，尺寸:",o,i),T.toneMapping=H.ACESFilmicToneMapping,T.toneMappingExposure=1,k=new Ie(V,T.domElement),k.enableDamping=!0,k.dampingFactor=.05,console.log("控制器创建成功");const n=new H.AmbientLight(16777215,1);v.add(n);const g=new H.DirectionalLight(16777215,1);g.position.set(5,5,5),v.add(g);const $=new H.DirectionalLight(16777215,.8);$.position.set(-5,5,-5).normalize(),v.add($);const q=new H.PointLight(16777215,1,100);q.position.set(0,2,0),v.add(q),console.log("灯光移除，将使用环境贴图提供照明");const y=new H.PMREMGenerator(T);y.compileEquirectangularShader(),c.value="加载环境贴图...",new Le().load("https://dl.polyhaven.org/file/ph-assets/HDRIs/hdr/1k/the_sky_is_on_fire_1k.hdr",e=>{const h=y.fromEquirectangular(e).texture;y.dispose(),e.dispose(),v.environment=h,v.background=h,console.log("环境贴图加载并应用成功"),c.value="环境贴图加载成功"},void 0,e=>{console.error("加载环境贴图错误:",e),c.value="环境贴图加载失败: "+(e instanceof Error?e.message:String(e))}),c.value="开始加载模型...";const l=new Me;console.log("开始加载模型..."),l.load("/b.glb",e=>{console.log("模型加载成功"),c.value="模型加载成功",I("loading",c.value),v.add(e.scene);const h=new H.MeshStandardMaterial({metalness:1,roughness:0,color:M[S.value]});v.traverse(O=>{O.isMesh&&(console.log("检查到网格对象:",O.name),O.material=h,console.log("已为网格对象应用 MeshStandardMaterial"),(O.material.isMeshStandardMaterial||O.material.isMeshPhysicalMaterial)&&v.environment&&(O.material.envMap=v.environment,O.material.needsUpdate=!0,console.log("已为标准/物理材质设置环境贴图")))});const j=new H.Box3().setFromObject(e.scene),F=j.getCenter(new H.Vector3),K=j.getSize(new H.Vector3),Q=Math.max(K.x,K.y,K.z),ae=V.fov*(Math.PI/180);let oe=Math.abs(Q/Math.sin(ae/2))*.8;V.position.set(F.x-oe,F.y,F.z),V.lookAt(F),k.target.copy(F),k.update(),console.log("相机位置调整完成"),setTimeout(()=>{console.log("发送模型加载完成事件"),I("model-loaded")},100)},e=>{const h=e.loaded/e.total*100;console.log("加载进度:",h.toFixed(2)+"%"),c.value=`模型加载进度: ${h.toFixed(0)}%`,I("loading",c.value),I("progress",h)},e=>{console.error("模型加载错误:",e),c.value="模型加载失败: "+(e instanceof Error?e.message:String(e)),I("loading",c.value)}),E()}catch(o){console.error("初始化场景失败:",o),c.value="初始化失败: "+o.message}},u=()=>{requestAnimationFrame(u),k==null||k.update(),T==null||T.render(v,V)},a=()=>{if(!d.value||!V||!T)return;const o=d.value.clientWidth,i=d.value.clientHeight;console.log("handleResize - 容器尺寸:",o,i),V.aspect=d.value?o/i:V.aspect,V.updateProjectionMatrix(),T.setSize(o,i),E(),console.log("handleResize - 相机宽高比更新为:",V.aspect)};return ie(()=>{console.log("组件挂载，容器元素:",d.value),window.addEventListener("resize",a),c.value="初始化场景...",me(()=>{var o,i;E(),console.log("nextTick - 容器尺寸:",(o=d.value)==null?void 0:o.clientWidth,(i=d.value)==null?void 0:i.clientHeight),d.value&&console.log("nextTick - 相机宽高比:",d.value.clientWidth/d.value.clientHeight),W(),u()})}),ve(()=>{window.removeEventListener("resize",a),d.value&&T&&d.value.removeChild(T.domElement),T==null||T.dispose(),v&&v.traverse(o=>{if(o.geometry&&o.geometry.dispose(),o.material)if(Array.isArray(o.material))for(const i of o.material)i.dispose();else o.material.dispose();o.texture&&o.texture.dispose()})}),(o,i)=>(p(),f("div",{class:"model-container",ref_key:"container",ref:d},[s("div",qt,[s("button",{onClick:i[0]||(i[0]=n=>x("bronze")),class:L({active:S.value==="bronze"})},"铜币",2),s("button",{onClick:i[1]||(i[1]=n=>x("silver")),class:L({active:S.value==="silver"})},"银币",2),s("button",{onClick:i[2]||(i[2]=n=>x("gold")),class:L({active:S.value==="gold"})},"金币",2),s("button",{onClick:i[3]||(i[3]=n=>x("diamond")),class:L({active:S.value==="diamond"})},"钻石币",2)]),R.value?(p(),f("div",Dt,[s("p",null,"容器尺寸: "+w(r.value),1),s("p",null,"加载状态: "+w(c.value),1)])):P("",!0)],512))}}),xt=X(Et,[["__scopeId","data-v-a136c79c"]]),Bt={class:"coin-preview-container"},Rt={key:0,class:"loading-overlay"},zt={class:"loading-text"},At={class:"dialog-footer"},Ut=Z({__name:"CoinPreviewDialog",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(U,{emit:N}){const b=U,R=N,r=ee({get:()=>b.modelValue,set:u=>R("update:modelValue",u)}),c=m("gold"),d=m(!1),v=ee(()=>d.value?"100%":"80%"),V=ee(()=>d.value?"80vh":"70vh"),T=m(!0),k=m(0),I=m("初始化..."),M=()=>{d.value=window.innerWidth<=768},S=u=>{c.value=u},x=u=>{I.value=u,console.log("加载状态:",u)},z=u=>{k.value=Math.floor(u),k.value>=100&&(I.value="加载完成...")},E=()=>{console.log("收到模型加载完成事件"),setTimeout(()=>{T.value=!1,k.value=100,I.value="加载完成",console.log("加载叠加层应已隐藏")},300)},W=()=>{T.value=!0,k.value=0,I.value="初始化...",c.value="gold"};return ie(()=>{M(),window.addEventListener("resize",M)}),ve(()=>{window.removeEventListener("resize",M)}),te(r,u=>{console.log("对话框状态变化:",u),u&&(T.value=!0,k.value=0,I.value="初始化...")}),(u,a)=>{const o=ce,i=pe;return p(),ke(i,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=n=>r.value=n),title:"3D预览奖章,加载约30秒左右",width:v.value,fullscreen:!d.value,draggable:"","destroy-on-close":"",onClosed:W,"close-on-click-modal":!1},{footer:_(()=>[s("div",At,[C(o,{onClick:a[0]||(a[0]=n=>r.value=!1)},{default:_(()=>a[2]||(a[2]=[J("关闭")])),_:1,__:[2]})])]),default:_(()=>[s("div",Bt,[C(xt,{ref:"coinViewer",debug:!1,"initial-coin-type":c.value,"container-height":V.value,"onUpdate:coinType":S,onLoading:x,onModelLoaded:E,onProgress:z},null,8,["initial-coin-type","container-height"]),T.value||k.value<100?(p(),f("div",Rt,[C(D(ge),{type:"circle",percentage:k.value,width:d.value?90:100,"stroke-width":10,color:"#409eff"},null,8,["percentage","width"]),s("div",zt,w(I.value),1)])):P("",!0)])]),_:1},8,["modelValue","width","fullscreen"])}}}),Wt=X(Ut,[["__scopeId","data-v-3b0f8ad8"]]),Ft={class:"cs2-major-root"},jt={class:"major-container"},Nt={key:0,class:"loading-container"},Ht={key:1,class:"prediction-content"},Gt={class:"tab-buttons"},Ot={key:0,class:"countdown"},Kt={key:0,class:"countdown"},Zt={key:0,class:"countdown"},Jt={key:0,class:"countdown"},Qt={class:"major-content"},Yt={class:"match-info-panel"},Xt={class:"match-header"},ea=["src","alt"],sa={class:"match-name"},ta={class:"match-details"},aa={class:"info-item"},oa={class:"value"},ia={class:"info-item"},la={class:"value"},na={class:"info-item"},da={class:"value"},ra={class:"match-footer"},ca={class:"button-group"},ua={key:0,class:"major-section"},ma={class:"time-info"},va={key:1,class:"major-section"},ha={class:"time-info"},ga={key:2,class:"major-section"},pa={class:"time-info"},fa={key:3,class:"major-section"},_a={class:"time-info"},ba={key:2,class:"no-match"},Ta=Z({__name:"CS2Major",setup(U,{expose:N}){Ce();const b=m(0),R=m(!0),r=m("onePhase"),c=m(),d=m(),v=m(),V=m(),T=m(null),k=m(null),I=m(!1),M=m({}),S=m({onePhase:{start:new Date,end:new Date},twoPhase:{start:new Date,end:new Date},threePhase:{start:new Date,end:new Date},champion:{start:new Date,end:new Date}}),x=ee(()=>Object.keys(M.value).length>0),z=y=>new Date(y).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",timeZone:"Asia/Shanghai"}).replace(/\//g,"年").replace(",","日"),E=y=>{const{start:t,end:l}=S.value[y];return`${z(t.toISOString())}日 ${t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",hour12:!1})} - ${z(l.toISOString())}日 ${l.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",hour12:!1})}`},W=async()=>{try{R.value=!0;const y=await se.get("/machine/matches");if(y.data&&y.data.length>0){const t=y.data;t.length>0?(t.forEach(l=>{M.value[l.phase]=l}),M.value[r.value]||(r.value=Object.keys(M.value)[0]),u(r.value),t.forEach(l=>{const e=l.phase;e in S.value&&(S.value[e]={start:new Date(l.predictStartTime),end:new Date(l.predictEndTime)})}),console.log("比赛信息:",t),console.log("时间限制设置:",S.value)):G.error("未找到可用赛事")}else G.error("未找到可用赛事")}catch(y){console.error("获取赛事ID失败:",y),G.error("获取赛事ID失败")}finally{R.value=!1}},u=y=>{const t=M.value[y];t?(b.value=t.id||0,k.value=t):(b.value=0,k.value=null)},a=y=>{const t=new Date(new Date().toLocaleString("en-US",{timeZone:"Asia/Shanghai"})),{start:l,end:e}=S.value[y];return t>=l&&t<=e},o=y=>{const t=new Date,{start:l,end:e}=S.value[y];if(t<l){const h=l.getTime()-t.getTime();return`距离开始还有 ${i(h)}`}else{if(t>e)return"竞猜已结束";{const h=e.getTime()-t.getTime();return`距离结束还有 ${i(h)}`}}},i=y=>{const t=Math.floor(y/864e5),l=Math.floor(y%(1e3*60*60*24)/(1e3*60*60)),e=Math.floor(y%(1e3*60*60)/(1e3*60)),h=Math.floor(y%(1e3*60)/1e3);return`${t}天${l}小时${e}分${h}秒`},n=()=>{r.value=r.value};te(r,y=>{var t,l,e,h;if(u(y),b.value)switch(y){case"onePhase":(t=c.value)==null||t.fetchTeams();break;case"twoPhase":(l=d.value)==null||l.fetchTeams();break;case"threePhase":(e=v.value)==null||e.fetchTeams();break;case"champion":(h=V.value)==null||h.fetchTeams();break}}),ie(async()=>{await W(),T.value=window.setInterval(n,1e3)}),ye(()=>{T.value&&clearInterval(T.value)}),N({getPredictData(){var y,t,l,e;return{onePhase:(y=c.value)==null?void 0:y.getPredictData(),twoPhase:(t=d.value)==null?void 0:t.getPredictData(),threePhase:(l=v.value)==null?void 0:l.getPredictData(),champion:(e=V.value)==null?void 0:e.getPredictData()}}});const g=y=>{const t=document.createElement("canvas");t.width=y.width,t.height=y.height+60;const l=t.getContext("2d");if(!l)return y;l.drawImage(y,0,0),l.font="bold 36px Microsoft YaHei",l.textAlign="center",l.textBaseline="bottom";const e="竞猜作业来源：sb6657.cn",h=t.width/2,j=t.height-20,F=l.measureText(e).width;return l.fillStyle="rgba(0, 0, 0, 0.5)",l.fillRect(h-F/2-10,j-40,F+20,40),l.fillStyle="#ffffff",l.fillText(e,h,j),t},$=async()=>{const y="玩机器烂梗库官方比赛作业，地址sb6657.cn";try{await navigator.clipboard.writeText(y)}catch(t){console.error("复制失败:",t)}try{I.value=!0;const t=document.querySelector(".major-section");if(!t)throw new Error("未找到要截图的元素");const l=await Pe(t,{backgroundColor:"#ffffff",scale:1.5,logging:!1,useCORS:!0,allowTaint:!0}),e=g(l),h=document.createElement("a");h.download=`sb6657.cn_CS2Major预测_${new Date().toLocaleDateString()}.jpg`,h.href=e.toDataURL("image/jpeg",1),h.click(),G.success("截图已保存"),se.get("/machine/shareMatch")}catch(t){console.error("截图失败:",t),G.error("截图失败，请重试")}finally{I.value=!1}},q=m(!1);return(y,t)=>{var F,K,Q,ae,oe,O,ue;const l=fe,e=_e,h=ce,j=be;return p(),f("div",Ft,[s("div",jt,[R.value?(p(),f("div",Nt,[C(l,{rows:3,animated:""})])):x.value?(p(),f("div",Ht,[s("div",Gt,[M.value.onePhase?(p(),f("button",{key:0,class:L({active:r.value==="onePhase"}),onClick:t[0]||(t[0]=Y=>r.value="onePhase")},[t[6]||(t[6]=J(" 第一阶段 ")),r.value==="onePhase"?(p(),f("div",Ot,w(o("onePhase")),1)):P("",!0)],2)):P("",!0),M.value.twoPhase?(p(),f("button",{key:1,class:L({active:r.value==="twoPhase"}),onClick:t[1]||(t[1]=Y=>r.value="twoPhase")},[t[7]||(t[7]=J(" 第二阶段 ")),r.value==="twoPhase"?(p(),f("div",Kt,w(o("twoPhase")),1)):P("",!0)],2)):P("",!0),M.value.threePhase?(p(),f("button",{key:2,class:L({active:r.value==="threePhase"}),onClick:t[2]||(t[2]=Y=>r.value="threePhase")},[t[8]||(t[8]=J(" 第三阶段 ")),r.value==="threePhase"?(p(),f("div",Zt,w(o("threePhase")),1)):P("",!0)],2)):P("",!0),M.value.champion?(p(),f("button",{key:3,class:L({active:r.value==="champion"}),onClick:t[3]||(t[3]=Y=>r.value="champion")},[t[9]||(t[9]=J(" 冠军组 ")),r.value==="champion"?(p(),f("div",Jt,w(o("champion")),1)):P("",!0)],2)):P("",!0)]),s("div",Qt,[s("div",Yt,[s("div",Xt,[s("img",{src:(F=k.value)==null?void 0:F.matchesImg,alt:(K=k.value)==null?void 0:K.matchesName,class:"match-logo"},null,8,ea),s("h2",sa,w((Q=k.value)==null?void 0:Q.matchesName),1)]),s("div",ta,[s("div",aa,[t[10]||(t[10]=s("span",{class:"label"},"赛事等级：",-1)),s("span",oa,w((ae=k.value)==null?void 0:ae.level),1)]),s("div",ia,[t[11]||(t[11]=s("span",{class:"label"},"比赛地点：",-1)),s("span",la,w((oe=k.value)==null?void 0:oe.matchesLocation),1)]),s("div",na,[t[12]||(t[12]=s("span",{class:"label"},"比赛时间：",-1)),s("span",da,w(z((O=k.value)==null?void 0:O.startTime))+"日 - "+w(z((ue=k.value)==null?void 0:ue.endTime))+"日",1)])]),s("div",ra,[t[15]||(t[15]=s("div",{class:"reward-info"},"竞猜会获得平台虚拟奖章，目前正在做",-1)),s("div",ca,[C(h,{type:"primary",onClick:$,loading:I.value},{default:_(()=>[C(e,null,{default:_(()=>[C(D($e))]),_:1}),t[13]||(t[13]=J(" 截图分享预测 "))]),_:1,__:[13]},8,["loading"]),C(h,{type:"success",onClick:t[4]||(t[4]=Y=>q.value=!0)},{default:_(()=>[C(e,null,{default:_(()=>[C(D(Ve))]),_:1}),t[14]||(t[14]=J(" 预览3D奖章 "))]),_:1,__:[14]})])])]),r.value==="onePhase"?(p(),f("div",ua,[s("div",ma,[s("p",null,"竞猜时间："+w(E("onePhase")),1)]),C(re,{ref_key:"onePhaseRef",ref:c,isTimeValid:a("onePhase"),matchId:b.value,phase:"onePhase"},null,8,["isTimeValid","matchId"])])):P("",!0),r.value==="twoPhase"?(p(),f("div",va,[s("div",ha,[s("p",null,"竞猜时间："+w(E("twoPhase")),1)]),C(re,{ref_key:"twoPhaseRef",ref:d,isTimeValid:a("twoPhase"),matchId:b.value,phase:"twoPhase"},null,8,["isTimeValid","matchId"])])):P("",!0),r.value==="threePhase"?(p(),f("div",ga,[s("div",pa,[s("p",null,"竞猜时间："+w(E("threePhase")),1)]),C(re,{ref_key:"threePhaseRef",ref:v,isTimeValid:a("threePhase"),matchId:b.value,phase:"threePhase"},null,8,["isTimeValid","matchId"])])):P("",!0),r.value==="champion"?(p(),f("div",fa,[s("div",_a,[s("p",null,"竞猜时间："+w(E("champion")),1)]),C(St,{ref_key:"championRef",ref:V,isTimeValid:a("champion"),matchId:b.value},null,8,["isTimeValid","matchId"])])):P("",!0)])])):(p(),f("div",ba,[C(j,{description:"暂无可用赛事"})]))]),C(Wt,{modelValue:q.value,"onUpdate:modelValue":t[5]||(t[5]=Y=>q.value=Y)},null,8,["modelValue"])])}}}),Na=X(Ta,[["__scopeId","data-v-bf9e1edd"]]);export{Na as default};
