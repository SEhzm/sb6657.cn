import{h as u,A as i,M as y,_}from"./index.BIlWUFJ6.js";import{k as p}from"./element-plus.C3kSHAgf.js";import{d as h,r as f,w as E,o as v,c as M,a as m,T as d,I as C}from"./@vue.kwc71ESp.js";async function g(t,e){var r,n;try{const a=await u.get(t);return(n=(r=a==null?void 0:a.data)==null?void 0:r[0])!=null&&n.barrage?a.data.map(o=>({content:o.barrage,category:o.tableName,id:`${o.barrageId}`,copyCount:o.cnt})):(console.log(`获取${e}烂梗失败`,a),!1)}catch(a){return console.log(`获取${e}烂梗失败`,a),!1}}function P(){return g(i.GET_HOT_MEME_24h,"24h热门")}function x(){return g(i.GET_HOT_MEME_7D,"七天热门")}async function B(t){console.log(`搜索词: ${t}`);try{const e=await u.post(i.SEARCH_MEME,{QueryBarrage:t});return e.data.length===0?(console.log("未搜索到烂梗"),"notfound"):e.data.map(n=>({content:n.barrage,category:"allbarrage",id:n.id,copyCount:+n.cnt}))}catch(e){return console.log("搜索烂梗失败",e),!1}}async function O(t,e,r){var n,a,s;console.log(`请求烂梗分类: ${t}, 页数: ${e}, 每页烂梗数: ${r}`);try{const o=(n=y.find(l=>l.category===t))==null?void 0:n.api;if(!o)throw new Error("未找到此分类");const c=await u.get(o,{params:{pageNum:e,pageSize:r}});if(((s=(a=c.data)==null?void 0:a.list)==null?void 0:s.length)<=0)throw new Error("请求到的烂梗列表为空");return{memeArr:c.data.list.map(l=>({content:l.barrage,id:l.id,category:t,copyCount:+l.cnt})),total:c.data.total}}catch(o){return console.error("请求烂梗列表失败",o),!1}}function k(t,e,r){let n=null;return(...a)=>{if(n)return e();{const s=t(...a);return n=setTimeout(()=>{n=null},r),s}}}function b(t){p({title:"复制失败",message:`复制操作失败，请稍后重试。
                可能你的浏览器不支持被动写入剪贴板，请换用其他浏览器`,type:"error"}),console.error("复制失败:",t)}function D(){p({message:"复制成功",type:"success"})}function G(){return p({title:"请勿刷次数",message:"复制成功，但次数没有增加",type:"warning"}),"limitedSuccess"}function R(t){const e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select();try{document.execCommand("Copy")}catch(r){return b(r),!1}return document.body.removeChild(e),!0}async function U(t,e,r,n,a){try{const s=await u.post(i.INCREASE_COPY_COUNT,{table:t,id:e,...r?{PageNum:r}:{},...n?{PageSize:50}:{},...a?{sortOrder:a}:{}});return console.log("弹幕复制次数+1成功",s),!0}catch(s){return console.error("弹幕复制次数+1失败",s),!1}}function z(){p({title:"复制成功",message:"但是复制次数没有增加，可能是网络有问题",type:"warning"})}async function Q(t,e){console.log(`烂梗投稿
 所属分类: ${t} 
烂梗内容: ${e}`);try{return(await u.post(i.SUBMIT_MEME,{table:t,barrage:e})).code!=="200"?(console.log("烂梗投稿失败"),!1):!0}catch(r){return console.error("烂梗投稿失败",r),!1}}const w=t=>new Promise(e=>setTimeout(e,t)),A={class:"container"},T={class:"place-holder"},$=h({__name:"flip-num",props:{num:{}},setup(t){const e=t,r=f(e.num),n=f(e.num);let a=!1;const s=f("normal");return E(()=>e.num,async(o,c)=>{if(r.value=c,n.value=o,a){r.value=o,n.value=o;return}a=!0,s.value=o<c?"end flex-start":"end",await w(500),r.value=o,n.value=o,s.value="normal",a=!1}),(o,c)=>(v(),M("span",A,[m("div",T,d(n.value),1),m("div",{class:C(`flip ${s.value}`)},[m("div",null,d(r.value),1),m("div",null,d(n.value),1)],2)]))}}),Y=_($,[["__scopeId","data-v-3fee0ed6"]]);export{U as a,R as b,D as c,x as d,Q as e,Y as f,P as g,O as h,G as l,z as p,B as s,k as t};
