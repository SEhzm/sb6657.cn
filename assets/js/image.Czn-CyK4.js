import{E as p,g as B,d as N,b as U,c as S,p as $,l as q,q as L}from"./element-plus.YPxzmcal.js";import{_ as T,h as x}from"./index.Csvwjb5e.js";import{Z as A,c as m,a as l,F as g,a8 as C,U as n,O as a,o as r,S as u,T as c,R as H}from"./@vue.BZUOcU6f.js";import"./lodash-es.CiJSjksT.js";import"./@vueuse.bxs0Yw5i.js";import"./@element-plus.BAPt3wIv.js";import"./@popperjs.D9SI2xQl.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.CdCgAjqw.js";import"./async-validator.DKvM95Vc.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.B6fDCfyv.js";import"./@floating-ui.8uccrNCM.js";import"./axios.CCb-kr4I.js";import"./vue-router.B8Nt-PEr.js";const M={class:"image-list"},R={style:{"text-align":"center",padding:"0 0 5px 0"}},Z={key:0,class:"comment-list"},j={class:"comment-content"},G={class:"comment-content"},J={class:"comment-date"},K={class:"dialog-footer"},P={__name:"image",setup(Q){(()=>{p({type:"success",dangerouslyUseHTMLString:!0,title:"照片可以评论喔",offset:100,duration:1500})})();const t=A({outerImg:[],id:"",imageId:"",Commentname:"",douyuId:"",dialogFormVisible:!1}),_=()=>{x.get("/machine/showImage",{}).then(o=>{t.outerImg=o.data||[]}).catch(o=>{console.error("加载数据失败:",o)})};_();const I=o=>{o.showComments=!o.showComments},b=o=>new Date(o).toLocaleString(),V={douyuId:[{required:!0,message:"请输入你的斗鱼ID",trigger:"blur"}],Commentname:[{required:!0,message:"请输入评论",trigger:"blur"}]},k=o=>{console.log(o),t.imageId=o.id,p({title:"温馨提醒",message:"请注意你的行为，不要上传违反法律的内容，后台能监控到你",type:"warning"}),t.douyuID="",t.Commentname="",t.dialogFormVisible=!0},v=o=>{console.log(o),o.douyuID===""||o.Commentname===""?p.error("请输入斗鱼id或输入评论"):x.post("/machine/addCommentname",{id:"",imageId:t.imageId,douyuID:o.douyuID,createdAt:"",commentname:o.Commentname}).then(e=>{_(),p.success("评论成功"),t.dialogFormVisible=!1}).catch(e=>{console.error("加载数据失败:",e)})};return(o,e)=>{const w=N,i=U,f=S,y=$,h=q,D=B,E=L;return r(),m(g,null,[e[8]||(e[8]=l("div",{class:"outer"},[l("span",null,"时光相册"),l("span",{style:{"font-size":"16px"}},"(点击放大图片)"),l("em",{style:{"font-size":"14px"}},"如侵权，请右上角联系删除")],-1)),l("div",M,[(r(!0),m(g,null,C(t.outerImg,(s,F)=>(r(),m("div",{key:F,class:"image-block"},[n(w,{"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"hide-on-click-modal":!0,src:s.url,"preview-src-list":[s.url],fit:"cover",lazy:"",style:{width:"250px",height:"300px"}},null,8,["src","preview-src-list"]),l("div",R,[n(i,{style:{width:"230px","font-size":"16px","white-space":"normal","word-break":"break-word"}},{default:a(()=>[u(c(s.date),1)]),_:2},1024)]),n(i,{onClick:d=>I(s),style:{"font-size":"18px","margin-left":"15px","box-sizing":"border-box"}},{default:a(()=>[u(c(s.showComments?"隐藏评论":"显示评论"),1)]),_:2},1032,["onClick"]),s.showComments?(r(),m("div",Z,[(r(!0),m(g,null,C(s.comments,(d,z)=>(r(),m("div",{key:z,class:"comment-item"},[l("span",j,c(d.douyuID)+" :",1),l("span",G,c(d.commentname),1),l("span",J,c(b(d.createdAt)),1)]))),128))])):H("",!0),n(i,{type:"success",plain:"",onClick:d=>k(s),style:{"font-size":"18px","box-sizing":"border-box"}},{default:a(()=>e[5]||(e[5]=[u(" 我要评论 ")])),_:2},1032,["onClick"])]))),128))]),n(D,{modelValue:t.dialogFormVisible,"onUpdate:modelValue":e[4]||(e[4]=s=>t.dialogFormVisible=s),draggable:"",title:"评论"},{footer:a(()=>[l("div",K,[n(i,{onClick:e[2]||(e[2]=s=>t.dialogFormVisible=!1)},{default:a(()=>e[6]||(e[6]=[u("关闭")])),_:1}),n(i,{type:"primary",onClick:e[3]||(e[3]=s=>v(t))},{default:a(()=>e[7]||(e[7]=[u(" 评论并关闭 ")])),_:1})])]),default:a(()=>[n(h,{model:t,"label-width":"100px",rules:V,"label-position":"right"},{default:a(()=>[n(y,{label:"你的斗鱼id",prop:"douyuID"},{default:a(()=>[n(f,{modelValue:t.douyuID,"onUpdate:modelValue":e[0]||(e[0]=s=>t.douyuID=s),autocomplete:"off"},null,8,["modelValue"])]),_:1}),n(y,{label:"评论内容",prop:"Commentname"},{default:a(()=>[n(f,{modelValue:t.Commentname,"onUpdate:modelValue":e[1]||(e[1]=s=>t.Commentname=s),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),n(E,{right:50,bottom:50})],64)}}},ce=T(P,[["__scopeId","data-v-e58a535f"]]);export{ce as default};
