import{f as Se,g as Ue,d as de,c as P,h as Ke,e as oe,v as Fe,a as K,j as ae,k as me,l as Ye,m as ce,E as pe,n as ge,o as fe,p as ve,q as Ee,r as He,s as ze,t as Le,u as qe}from"./element-plus.DX6Kv4BD.js";import{d as W,ax as Ae,ay as Oe,b as i,o as E,c as _,P as e,H as t,B as Je,I as Y,G as le,L as V,M as Q,a as o,O as F,a4 as ee,K as H,V as he,X as Ne,a5 as z,u as f,f as we,W as Pe,ag as L,Q as J,k as te,T as We,aw as Xe,C as je}from"./@vue.BqJqC78G.js";import{_ as Ge}from"./favicon.CJfgpdIL.js";import{g as Ze,a as $e,s as et}from"./getMeme.DtwxX68b.js";import{M as tt}from"./@element-plus.Du5FBV_q.js";import{f as ot,t as at,u as _e}from"./flip-num.B0ryhhU-.js";import{c as lt,l as nt,a as st}from"./clipboard.CRWhhQ0O.js";import{c as rt,p as At}from"./setMeme.OoC48vVk.js";import{h as R,_ as U,s as it,e as ie,r as ut,i as dt,M as ue,a as mt}from"./index.DX7JLqie.js";import{_ as be}from"./validCode.DOM1axl7.js";import{a as S}from"./js-cookie.Cz0CWeBA.js";import{J as ye}from"./jsencrypt.DrIFDlhK.js";import{C as ct}from"./CommunityNorms.B1CUO8-P.js";import{u as xe,b as pt}from"./vue-router.PTNpl1pN.js";import"./lodash-es.C-zDejYo.js";import"./@vueuse.C-35htfh.js";import"./@popperjs.D9SI2xQl.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.D6RD0Zoz.js";import"./async-validator.DKvM95Vc.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.B6fDCfyv.js";import"./@floating-ui.8uccrNCM.js";import"./axios.CCb-kr4I.js";import"./mitt.DJ65BbbF.js";const gt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAA1xJREFUWEfFl0uMDFEUhv9zp+eWR8LCQiKqeojWVSQSkQhigYVHwkZibCSIMAssiYUEsfBYSohMhAmxQMTCI0YiZkMsSJDQ1Qymq82IRyzGI/qWqUNNjHT31DtE77ruf87/3XPvOdVN+M8fyuJfzmurPPZ0y3E7s8TXx2QCKBmtxwi0E8BDAEdMR13KCpIJwDbkAwDz6kzbs0JkBfgOQKvfNTOtsKq1W2krkRqglM8tIhZ3RxkRnkihlk9/jXdpIFID2Lo8CMLeIBNmPm5V3R3/FiAvH4MxJ8SkH2OVZZbxOSlEqgqUdG05EXdHJidsMCvq/D8BsHXtFIi3xCQ/bzpqw18HKOnaCiK+mSDxJ9NRk3zdC0POKjjqWVRMoiPwEw0B1wG0JQAAe97SnBDvPeAiiHYXK7UbYXGxAKWpuSUkxJ0kxiMaH4CE8E3HgvkDt7TMt/q+9wXliATIYh7cnrhiVdXaVAC+OYS4TsC4NLuP0K43HXWxeT2wAqW2MW3EXjcYM/+SOQC6azq1xYkAyoY8w8CmWHPmHhAtidX9FhB4Y9Fxz9brR1WgpLduIqIzMUk/C0aHB96WCoBxpdh0F0YBlHV5mQmBF2YYirmHPdFh9dee23rrnTQAfrjpqAbPhi8DUzBuMCe/Ruy+TD/U4uIAPvqaLF3CQkyrb8kGgFI+t5BY3AsFIN5iVtzT9euxFWtK5s8I682PnpHHDQB2fsw0sPcqBKDbdNTKoDXbkP64tZJcxkiAx5MxXtPkl5CBsb/oqANhJrYhOQnAkOC5s/vcR4EV8B+WDdnFwMbmZAK0ZqZTuxZlYhvSHzTrwjQM9FqOKkS2oZ3PLQOL281JmksXZPLc0FZ74KthAES8tVhxT0UC+Iu2IS8AaK8XJgF4Oguy5YushRxhV9FRm5vXQl9GtqGdBLjjz1kxby9W3RNRRzA8wj3vdYBm0HTUxBCw8JTPDHlUALuGFcw9ZtVdGgXwIp9bODS6jUO7x88V/3sg37qDmHYD0Jl5s1V1u8IgyoY8xMCe3+sDBHRGdU4igBGzsiH3/arDPsFUKFRrL0Pmgf9XbSIB5zTKdbZVvr2Na83YCjQn8EGEVIcLvWi4bP5zZjx6UlXX2oGhOOPQOZA0sF53fwYmLOjFYJbYn3WiRDAd4qVAAAAAAElFTkSuQmCC",ft="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAcpJREFUWEftlk1uwkAMhe3CJSoFCZbAIQq75BQNJyk9CXCKsCscgmbZSETqJUpdOcykMyaTECX8LMiKiMT+7HnPDsKNL7xxfngA3EcH0t16AQjhFfWQENGq+wRLTD/XHwAwuWLyPBURvTMAGcmTDtL0eRgklwD6jqP+gXBhFJxIAM57EQiV/EsWlgN0kAYHQj6OPkMQ0qw3DDZtdGIfRxM8xs4K5Nj6PgfwRj4qyn8IolVvHMybQBQl58L00VsAnKhNiDSOQjieOV8bb+RPdTFOAA3x8wshIr7xPau1bif2u2iu35fJOWYpQFMIa64QLL2xP5PHWAmgX7AqcQQzg5tzpaxzZwNwcNHOxBv5A1nRiceRZt4wWLoEXA/AttHJrCgaMFU2PhtA2kjNiaOfiVb8wxBbpnY16bL/XeI9C0Akz2zkmmh6wHQBEsNBTohKAMvDQnwMoZK8KJtuZaWmborEWApgia5CTGVTsgzCCWB6mJCmTfeB2UmzE4UAlodbSK67Y+lGHecJgKXeFjehgMgXnXYTLyPe0byC81XZtO0uXYhFlz2GYso12by1380+yQxLvRqdqB2s5gv5fLiPz/Ka9K0+/ujAzTvwBwY/rnW+YWzQAAAAAElFTkSuQmCC",vt="data:image/png;base64,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",Et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB/lBMVEUAAAACAAAEAAAGAAADAAAFAAAKAAAHAAAQAAABAAACAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAAAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAADAAAEAAAEAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAABAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAADAAADAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAADAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAD///+W3QZCAAAAqHRSTlMAAAAAAAAAAAAAAQoWHBsBEjt6vtTd1bx8QBUPWMTy9MhcAS6w+Pm1MwJI2d5RAknk5wEy2+jO6f7r0OU1ELP8cJnh0crL0+PmnWsRVfc8BigiFCMqB2LC9kVKEj77aFJGzx6/lwG7eVvtMS/sIRvcJtJEEwu5BAOLCnaW8wXaw6DH/Yg0OZBee7fwHvH6c2XJkjbGFhlPUzjgOp8tK+rWuDUOxR0pzW3NoAbKAAAAAWJLR0SpJw8GBAAAAAd0SU1FB+gCEwk0EkntIW4AAAIlSURBVDjLY2AgATBycfPw8vFw8zNhk2XiFxAUEhYRFRUTl5CUwlDDxCQtIyu3AgrkFRQFmFlQ5JWUVVRXIAE1dQ0uJBVMmlraK9CAjq4e3BomVn2DFRjAUNcIagYLk7HJihWmZuYWMDkLSyvrFStEbZgYIQbY2q1YYe8greFo7eTs4urm7uFpY+sFVC3uzQIxwMcX6HA/Jhb/gMAgW1up4JBQJiYtoJt9w1hBKpgEwoGmRkSi+JwpSg0oqBANVhAD8n9sHKqCeJACuQSgIAuzEMhdiUmoCqSSQaIpqSwMTNxpIHens6KEHAtTRixQOJmbCajWDcjKzEILfKbsHKCwiBRQAa8OkGUQjK4g1x0oLMrHxMCSlw9keRSgKwgwBArn84GsKATFXwK6gqIIoLBVMVBBSSnIvZ5lqI4srwCJJleyMLCwVoGYHjHI3mBhS7AEiVYrAQ1mkqwBsZ0lyxDRW6tfB044+kzgoK5fkdPQ2GTe3CJVzgIynae1LRMcq67FTOAwaVeT7yjoXGHRJQ4KTpbu0h5IxPf2sYOtZRLoXOHbHzJBzX5iOchKTQlowhAWYIIG6yTRFZOnTJ02fQpEw4wesPzMWdAEw8DCMc3QfvacYmlNiIK55iD5eTIMcH8x6U0TtZg3f8FUJoQCJx89pLBjZFjYqbrCKQmuQE18lhJq/LMs6l/svASiYGn+suW2LOh5i4XTdm4oWJClsiWIi4WBagAAZejSV585JrMAAAAASUVORK5CYII=",ht="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1745163196952'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='2577'%20data-spm-anchor-id='a313x.search_index.0.i2.58913a81ag2QCw'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='32'%20height='32'%3e%3cpath%20d='M898.96%20765.38h-77.17V418.11c0-154.94-114.87-283.22-263.85-305.05%200.11-1.26%200.73-2.35%200.73-3.63%200-25.16-20.4-45.56-45.56-45.56-25.16%200-45.56%2020.4-45.56%2045.56%200%201.29%200.63%202.37%200.73%203.63-148.98%2021.83-263.85%20150.11-263.85%20305.05v347.26h-77.17c-21.31%200-38.58%2017.28-38.58%2038.59s17.28%2038.59%2038.58%2038.59h252.75c9.46%2065.27%2065.25%20115.75%20133.1%20115.75s123.64-50.48%20133.1-115.75h252.75c21.31%200%2038.58-17.28%2038.58-38.59s-17.27-38.58-38.58-38.58zM513.11%20881.13c-25.15%200-46.61-16.13-54.58-38.58h109.16c-7.97%2022.45-29.43%2038.58-54.58%2038.58z%20m231.51-115.75H281.6V418.11c0-127.66%20103.85-231.51%20231.51-231.51s231.51%20103.85%20231.51%20231.51v347.27z'%20fill='%23e3d5b8'%20p-id='2578'%3e%3c/path%3e%3c/svg%3e",wt=["onTouchstart","onTouchend"],_t={class:"barrage-text"},bt={style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},yt=["src"],xt={style:{"vertical-align":"middle"}},Ct=W({__name:"meme-dialog",props:Ae({memeArr:{},loading:{type:Boolean},emptyText:{}},{modelValue:{},modelModifiers:{}}),emits:Ae(["refresh"],["update:modelValue"]),setup(I,{emit:d}){const n=Oe(I,"modelValue"),b=d,r=at(st,nt,2e3);async function C(A){const v=A.content,p=r(v);if(!(!p||p==="limitedSuccess")){if(lt(),await rt(A.category,A.id)){b("refresh");return}At()}}const w=i([]),m=()=>{R.get("/machine/dictList").then(A=>{A.code===200&&(w.value=A.data)}).catch(A=>{console.error("获取字典数据失败",A)})},y=A=>{if(!A||A.trim()==="")return[];const v=Array.from(new Set(A.split(",").map(l=>l.trim())));if(!w.value)return v.map(()=>({label:"",iconUrl:""}));const p=new Map(w.value.map(l=>[String(l.dictValue).trim(),l]));return v.map(l=>{const h=p.get(l);return h?{label:h.dictLabel,iconUrl:h.iconUrl}:{label:"",iconUrl:""}})};m();const c=A=>{A.touchStartTime=Date.now()},g=A=>{Date.now()-A.touchStartTime>100&&(A.popoverVisible=!0,setTimeout(()=>{A.popoverVisible=!1},1500))};return(A,v)=>{const p=Se,a=Ue,l=de,h=P,M=Ke,x=oe,D=Fe;return E(),_("div",null,[e(x,{draggable:"",modelValue:n.value,"onUpdate:modelValue":v[0]||(v[0]=u=>n.value=u),class:"dialog-main"},{header:t(()=>[Je(A.$slots,"default",{},void 0,!0)]),default:t(()=>[Y((E(),le(M,{data:A.memeArr,stripe:"","empty-text":A.emptyText,"cell-class-name":"hover-pointer",onRowClick:C},{default:t(()=>[e(a,{align:"center",width:"60"},{default:t(u=>[e(p,{round:"",effect:"plain"},{default:t(()=>[V(Q(u.$index+1),1)]),_:2},1024)]),_:1}),e(a,{prop:"content"},{default:t(u=>[e(l,{placement:"top",width:"auto",trigger:"hover",visible:u.row.popoverVisible},{reference:t(()=>[o("div",{style:{cursor:"pointer"},onTouchstart:k=>c(u.row),onTouchend:k=>g(u.row)},[o("span",_t,Q(u.row.content),1)],40,wt)]),default:t(()=>[o("div",bt,[(E(!0),_(F,null,ee(y(u.row.tags),(k,q)=>(E(),_("div",{key:q,style:{"margin-right":"8px"}},[e(p,{round:"",effect:"dark",style:{fontSize:"16px",cursor:"pointer"}},{default:t(()=>[k.iconUrl?(E(),_("img",{key:0,src:k.iconUrl,style:{width:"16px",height:"16px","object-fit":"cover","vertical-align":"middle"}},null,8,yt)):H("",!0),o("span",xt,Q(k.label),1)]),_:2},1024)]))),128))])]),_:2},1032,["visible"])]),_:1}),e(a,{align:"center",width:"100"},{default:t(u=>[e(h,{type:"primary",class:"copy-btn",onClick:he(k=>C(u.row),["stop"])},{default:t(()=>[v[1]||(v[1]=V("复制 (")),e(ot,{num:u.row.copyCount},null,8,["num"]),v[2]||(v[2]=V(")"))]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","empty-text"])),[[D,A.loading]])]),_:3},8,["modelValue"])])}}}),Z=U(Ct,[["__scopeId","data-v-6bb5efde"]]),Bt=`MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAKoR8mX0rGKLqzcWmOzbfj64K8ZIgOdH
nzkXSOVOZbFu/TJhZ7rFAN+eaGkl3C4buccQd/EjEsj9ir7ijT7h96MCAwEAAQ==`,kt=`MIIBVAIBADANBgkqhkiG9w0BAQEFAASCAT4wggE6AgEAAkEAqhHyZfSsYourNxaY
7Nt+PrgrxkiA50efORdI5U5lsW79MmFnusUA355oaSXcLhu5xxB38SMSyP2KvuKN
PuH3owIDAQABAkAfoiLyL+Z4lf4Myxk6xUDgLaWGximj20CUf+5BKKnlrK+Ed8gA
kM0HqoTt2UZwA5E2MzS4EI2gjfQhz5X28uqxAiEA3wNFxfrCZlSZHb0gn2zDpWow
cSxQAgiCstxGUoOqlW8CIQDDOerGKH5OmCJ4Z21v+F25WaHYPxCFMvwxpcw99Ecv
DQIgIdhDTIqD2jfYjPTY8Jj3EDGPbH2HHuffvflECt3Ek60CIQCFRlCkHpi7hthh
YhovyloRYsM+IS9h/0BzlEAuO0ktMQIgSPT3aFAgJYwKpqRYKlLDVcflZFCKY7u3
UP8iWi1Qw0Y=`;function Vt(I){const d=new ye;return d.setPublicKey(Bt),d.encrypt(I)}function Mt(I){const d=new ye;return d.setPrivateKey(kt),d.decrypt(I)}const Dt={class:"login-box"},It={class:"login-code"},Tt=["src"],Qt={key:0},Rt={key:1},St={__name:"login",props:{onRegister:{type:Function,required:!0},closeDialog:{type:Function,required:!0}},setup(I){const d=I,n=i(""),b=i(!1),r=i({username:"",password:"",rememberMe:!1,code:"",uuid:""}),C=Ne({username:[{required:!0,message:"请输入邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"change"}]}),w=i();function m(){w.value.validate(p=>{p&&(b.value=!0,r.value.rememberMe?(S.set("username",r.value.username,{expires:525600}),S.set("password",Vt(r.value.password),{expires:525600}),S.set("rememberMe",r.value.rememberMe,{expires:525600})):(S.remove("username"),S.remove("password"),S.remove("rememberMe")),R.post("/login",r.value).then(a=>{a.code===200?(K.success("登录成功"),it(a.token),v()):(b.value=!1,K.error(a.msg))}).catch(()=>{b.value=!1,y.value&&c()}))})}const y=i(!0);function c(){R.get("/captchaImage").then(p=>{y.value=p.captchaEnabled===void 0?!0:p.captchaEnabled,y.value&&(n.value="data:image/gif;base64,"+p.img,r.value.uuid=p.uuid)})}function g(){const p=S.get("username"),a=S.get("password"),l=S.get("rememberMe");r.value={username:p===void 0?r.value.username:p,password:a===void 0?r.value.password:Mt(a),rememberMe:l===void 0?!1:!!l}}g(),c();function A(){typeof d.onRegister=="function"?d.onRegister():console.error("onRegister is not a function")}function v(){d.closeDialog()}return(p,a)=>{const l=ae,h=me,M=Ye,x=de,D=P,u=ce;return E(),_("div",null,[o("div",Dt,[a[8]||(a[8]=o("div",{class:"title"},"登 录",-1)),e(u,{model:r.value,ref_key:"formRef",ref:w,rules:C},{default:t(()=>[e(h,{prop:"username"},{default:t(()=>[e(l,{"prefix-icon":"Avatar",size:"large",clearable:"",modelValue:r.value.username,"onUpdate:modelValue":a[0]||(a[0]=k=>r.value.username=k),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),e(h,{prop:"password"},{default:t(()=>[e(l,{"show-password":"",size:"large","prefix-icon":"Lock",modelValue:r.value.password,"onUpdate:modelValue":a[1]||(a[1]=k=>r.value.password=k),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),e(h,{prop:"code"},{default:t(()=>[e(l,{modelValue:r.value.code,"onUpdate:modelValue":a[2]||(a[2]=k=>r.value.code=k),size:"large",clearable:"","auto-complete":"off",placeholder:"请输入验证码",style:{width:"63%"}},{prefix:t(()=>a[4]||(a[4]=[o("img",{src:be,style:{width:"16px"}},null,-1)])),_:1},8,["modelValue"]),o("div",It,[o("img",{src:n.value,onClick:c,class:"login-code-img",onKeyup:z(m,["enter"])},null,40,Tt)])]),_:1}),e(M,{modelValue:r.value.rememberMe,"onUpdate:modelValue":a[3]||(a[3]=k=>r.value.rememberMe=k),style:{margin:"0px 0px 5px 0px"}},{default:t(()=>a[5]||(a[5]=[V("记住密码")])),_:1},8,["modelValue"]),o("span",{style:{"margin-left":"35%",cursor:"pointer",color:"blue"},onClick:A},"还没有账号？去注册 >"),a[7]||(a[7]=o("br",null,null,-1)),e(x,{placement:"top-start",width:"auto",trigger:"hover",content:"请使用登陆邮箱发送邮件至邮箱 he20020928@foxmail.com，申请重置密码~"},{reference:t(()=>a[6]||(a[6]=[o("span",null,"🔔忘记密码？",-1)])),_:1}),e(h,null,{default:t(()=>[e(D,{loading:b.value,type:"primary",style:{width:"100%"},onClick:m},{default:t(()=>[b.value?(E(),_("span",Rt,"登 录 中...")):(E(),_("span",Qt,"登 录"))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])}}},Ut=U(St,[["__scopeId","data-v-24824e04"]]),Kt={class:"register-code"},Ft=["src"],Yt={key:0},Ht={key:1},zt={__name:"register",setup(I){const d=i(),n=i({username:"",nickName:"",password:"",confirmPassword:"",code:"",uuid:"",emailCode:""}),r={username:[{required:!0,message:"请输入邮箱",trigger:"blur"},{pattern:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/,message:"请输入有效的邮箱地址",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"},{min:6,max:20,message:"用户密码长度必须介于 6 和 20 之间，且数字和英文混合",trigger:"blur"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,20}$/,message:"密码必须是数字和英文混合",trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:"请再次输入您的密码"},{required:!0,validator:(a,l,h)=>{n.value.password!==l?h(new Error("两次输入的密码不一致")):h()},trigger:"blur"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}],emailCode:[{required:!0,trigger:"change",message:"请输入邮箱验证码"}]},C=i(""),w=i(!1),m=i(!0),y=i("发送邮箱验证码"),c=i(!1);let g=null;function A(){if(!n.value.username){K.info("请先输入邮箱");return}c.value=!0;let a=10;y.value=`${a}分钟 后重试`,g=setInterval(()=>{a--,a<=0?(clearInterval(g),c.value=!1,y.value="发送邮箱验证码"):y.value=`邮箱中已有验证码，或请 ${a}分钟 后重试`},1e3*60*10),console.log(n.value.username),R.get("/login/getMailCode",{params:{toEMail:n.value.username}}).then(l=>{l.code===200?K.success("验证码已发送，请查收邮箱"):(K.error(l.msg),clearInterval(g),c.value=!1,y.value="发送邮箱验证码")}).catch(()=>{clearInterval(g),c.value=!1,y.value="发送邮箱验证码"})}function v(){d.value.validate(a=>{a&&(w.value=!0,R.post("/register",n.value).then(l=>{const h=n.value.username;l.code===200?pe.alert("<font color='red'>恭喜你，您的账号 "+h+" 注册成功！</font>","系统提示",{dangerouslyUseHTMLString:!0,type:"success"}).then(()=>{}).catch(()=>{}):(K.error(l.msg),w.value=!1,m&&p())}).catch(()=>{w.value=!1,m&&p()}))})}function p(){R.get("/captchaImage").then(a=>{m.value=a.captchaEnabled===void 0?!0:a.captchaEnabled,m.value&&(C.value="data:image/gif;base64,"+a.img,n.value.uuid=a.uuid)})}return p(),(a,l)=>{const h=P,M=ae,x=me,D=ce;return E(),_("div",null,[e(D,{ref_key:"registerRef",ref:d,model:f(n),rules:r,class:"register-form"},{default:t(()=>[l[8]||(l[8]=o("h3",{class:"title"},"注册",-1)),e(x,{prop:"username"},{default:t(()=>[e(M,{modelValue:f(n).username,"onUpdate:modelValue":l[0]||(l[0]=u=>f(n).username=u),type:"text",size:"large",clearable:"","prefix-icon":"Avatar","auto-complete":"off",placeholder:"邮箱-用于登录"},{append:t(()=>[e(h,{type:"primary",size:"small",style:{padding:"0","font-weight":"500"},onClick:A},{default:t(()=>l[6]||(l[6]=[V("发送邮箱验证码")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(x,null,{default:t(()=>[e(M,{modelValue:f(n).nickName,"onUpdate:modelValue":l[1]||(l[1]=u=>f(n).nickName=u),type:"text",maxlength:"10",size:"large",clearable:"",placeholder:"昵称--平台昵称--后续不可更改"},null,8,["modelValue"])]),_:1}),e(x,{prop:"emailCode"},{default:t(()=>[e(M,{modelValue:f(n).emailCode,"onUpdate:modelValue":l[2]||(l[2]=u=>f(n).emailCode=u),type:"text",maxlength:"4",size:"large",clearable:"",placeholder:"请输入邮箱验证码"},null,8,["modelValue"])]),_:1}),e(x,{prop:"password"},{default:t(()=>[e(M,{modelValue:f(n).password,"onUpdate:modelValue":l[3]||(l[3]=u=>f(n).password=u),type:"password",size:"large","show-password":"","prefix-icon":"Lock","auto-complete":"off",placeholder:"密码",onKeyup:z(v,["enter"])},null,8,["modelValue"])]),_:1}),e(x,{prop:"confirmPassword"},{default:t(()=>[e(M,{modelValue:f(n).confirmPassword,"onUpdate:modelValue":l[4]||(l[4]=u=>f(n).confirmPassword=u),type:"password",size:"large","show-password":"","prefix-icon":"Lock","auto-complete":"off",placeholder:"确认密码",onKeyup:z(v,["enter"])},null,8,["modelValue"])]),_:1}),f(m)?(E(),le(x,{key:0,prop:"code"},{default:t(()=>[e(M,{size:"large",modelValue:f(n).code,"onUpdate:modelValue":l[5]||(l[5]=u=>f(n).code=u),"auto-complete":"off",clearable:"",placeholder:"请输入右侧验证码",style:{width:"63%"},onKeyup:z(v,["enter"])},{prefix:t(()=>l[7]||(l[7]=[o("img",{src:be,style:{width:"16px"}},null,-1)])),_:1},8,["modelValue"]),o("div",Kt,[o("img",{src:f(C),onClick:p,class:"register-code-img"},null,8,Ft)])]),_:1})):H("",!0),e(x,{style:{width:"100%"}},{default:t(()=>[e(h,{loading:f(w),size:"large",type:"primary",style:{width:"100%"},onClick:he(v,["prevent"])},{default:t(()=>[f(w)?(E(),_("span",Ht,"注 册 中...")):(E(),_("span",Yt,"注 册"))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},Lt=U(zt,[["__scopeId","data-v-a28a4b67"]]),qt={class:"avatar-wrapper"},Ot=["innerHTML"],$="400px",Jt={__name:"userHome",setup(I){const d=i(!1),n=i(!1);_e();const b=i(!1);function r(){console.log(R.show),d.value=!0,n.value=!1}function C(){pe.confirm("确定退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{ut()}).catch(()=>{})}function w(){d.value=!1,n.value=!0}function m(){d.value=!1}function y(){console.log("showLoginView"),d.value=!0}return we(()=>{ie.on("showLogin",y)}),Pe(()=>{ie.off("showLogin",y)}),(c,g)=>{const A=L("User"),v=ge,p=L("caret-bottom"),a=fe,l=L("router-link"),h=ve,M=Ee,x=oe;return E(),_(F,null,[e(M,{onCommand:c.handleCommand,class:"right-menu-item hover-effect",trigger:"hover"},{dropdown:t(()=>[e(h,null,{default:t(()=>[e(l,{divided:"",to:"/me-post"},{default:t(()=>[e(a,null,{default:t(()=>g[4]||(g[4]=[V("我的帖子")])),_:1})]),_:1}),Y(e(a,{command:"login",divided:""},{default:t(()=>[o("span",{onClick:r},"登录/注册")]),_:1},512),[[J,!f(R)]]),e(l,{to:"/userInfo"},{default:t(()=>[e(a,null,{default:t(()=>g[5]||(g[5]=[V("个人中心")])),_:1})]),_:1}),e(a,{command:"login"},{default:t(()=>[o("span",{onClick:g[0]||(g[0]=D=>b.value=!0)},"隐私政策")]),_:1}),Y(e(a,{divided:"",command:"logout"},{default:t(()=>[o("span",{onClick:C},"退出登录")]),_:1},512),[[J,f(R)]])]),_:1})]),default:t(()=>[o("div",qt,[e(v,{size:"32"},{default:t(()=>[e(A)]),_:1}),e(v,null,{default:t(()=>[e(p)]),_:1})])]),_:1},8,["onCommand"]),e(x,{"align-center":"true",modelValue:d.value,"onUpdate:modelValue":g[1]||(g[1]=D=>d.value=D),draggable:"true",width:$,modal:!1,"append-to-body":"true"},{default:t(()=>[Y(e(Ut,{onRegister:w,closeDialog:m},null,512),[[J,d.value]])]),_:1},8,["modelValue"]),e(x,{"align-center":"true",modelValue:n.value,"onUpdate:modelValue":g[2]||(g[2]=D=>n.value=D),draggable:"true",width:$,modal:!1,"append-to-body":"true"},{default:t(()=>[Y(e(Lt,null,null,512),[[J,n.value]])]),_:1},8,["modelValue"]),e(x,{modelValue:b.value,"onUpdate:modelValue":g[3]||(g[3]=D=>b.value=D),title:"社区规范与隐私政策",style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",margin:"auto"},width:$,modal:!1,"append-to-body":"true"},{default:t(()=>[o("div",{innerHTML:f(ct)},null,8,Ot)]),_:1},8,["modelValue"])],64)}}},Nt=U(Jt,[["__scopeId","data-v-4442e589"]]),Pt={class:"header"},Wt={class:"header-content"},Xt={class:"header-actions"},jt={class:"elinput"},Gt={style:{display:"flex","font-size":"12px",height:"25px",color:"#e3d5b8ff",position:"relative"}},Zt={key:0,class:"unread-badge"},$t={key:1,class:"unread-badge"},eo={class:"dialog-header"},to={class:"dialog-header"},N="我还没有加载完喔~~",oo="https://cdn.hguofichp.cn/power.png",ao=W({__name:"header-bar",setup(I){const d=_e(),n=xe(),b=i(!1),r=i(!1),C=i([]),w=i(!0);async function m(){const B=await Ze();B&&(C.value=B,w.value=!1)}function y(){r.value=!0,c.value=!1,w.value=!0,m()}const c=i(!1),g=i([]),A=i(!0);async function v(){const B=await $e();B&&(g.value=B,A.value=!1)}function p(){r.value=!1,c.value=!0,A.value=!0,v()}const a=te(()=>!(d.value&&n.path!=="/home"));m();const l=i(0);setInterval(()=>{const B=C.value.length;l.value=(l.value+1)%B},5e3);const h=i(""),M=i(!1),x=i([]),D=i(!0),u=i(N);async function k(){D.value=!0,M.value=!0,u.value=N;const B=await et(h.value);if(D.value=!1,!B){x.value=[],u.value="请输入搜索词...";return}if(B==="notfound"){x.value=[],u.value="没有找到搜索结果。想要补充更多烂梗？请去首页投稿！";return}x.value=B}let q="75%";const X=i(0),j=i(0),G=te(()=>X.value+j.value),Ce=i(!1);async function ne(){try{const B=await R.get("/machine/SysMessage/getMsgNum");B.code===200&&(X.value=B.data.likeAndStatementNum,j.value=B.data.commentNum,Ce.value=B.data.readFlag)}catch(B){console.error("获取消息数量失败:",B)}}we(()=>{dt.show&&(ne(),setInterval(()=>{ne()},10*60*1e3)),d.value&&(q="100%"),setTimeout(()=>{b.value=!0,setInterval(()=>{b.value=!0},2*60*60*1e3)},60*60*1e3)});const Be=()=>{window.open("https://www.wjx.cn/vm/rQUgnS0.aspx#")};return i(!1),(B,s)=>{const ke=ge,O=P,Ve=ae,Me=He,De=ze,se=fe,Ie=L("router-link"),Te=ve,Qe=Ee,Re=oe;return E(),_(F,null,[o("div",Pt,[o("div",Wt,[s[11]||(s[11]=o("a",{href:"https://www.douyu.com/6657",target:"_blank",class:"logo-link"},[o("img",{src:Ge,alt:"大🐖头",class:"logo-img"}),o("p",{class:"header-title"},"斗鱼玩机器烂梗库")],-1)),o("div",Xt,[a.value?(E(),_("img",{key:0,src:gt,alt:"热门",class:"hot-barrage-img",onClick:y})):H("",!0),a.value?(E(),_("div",{key:1,onClick:y,class:"hot-barrage"},[e(We,{name:"fade"},{default:t(()=>{var T,re;return[(E(),_("span",{key:l.value,class:"hot-barrage-span"},"热门："+Q(((re=(T=C.value)==null?void 0:T[l.value])==null?void 0:re.content)||""),1))]}),_:1})])):H("",!0),o("div",jt,[e(Ve,{modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=T=>h.value=T),placeholder:"搜索烂梗",clearable:"",onKeydown:z(k,["enter"])},{append:t(()=>[e(O,{type:"primary",onClick:k},{default:t(()=>[e(ke,null,{default:t(()=>[e(f(tt))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e(O,{type:"primary",onClick:Be,class:"complaint-button"},{default:t(()=>s[5]||(s[5]=[o("span",null,[V(" 上传照片 "),o("br"),V(" 建议/提交BUG ")],-1)])),_:1}),e(Me,{class:"box-item",effect:"light",content:"接程序设计，广告，商务，详情联系邮箱 he20020928@foxmail.com",placement:"bottom"},{default:t(()=>s[6]||(s[6]=[o("img",{src:ft,alt:"heihei",class:"icon-img"},null,-1)])),_:1}),s[10]||(s[10]=Xe('<a href="https://sb6657.cn/#/Tampermonkey" data-v-8c33f9b1><img src="https://pic.imgdb.cn/item/6704f830d29ded1a8c738f70.png" alt="油猴" class="icon-img" data-v-8c33f9b1></a><a href="https://yuba.douyu.com/feed/2639094748291342931" target="_blank" data-v-8c33f9b1><img src="'+vt+'" alt="douyu" class="icon-img" data-v-8c33f9b1></a><a href="https://github.com/SEhzm/sb6657/" target="_blank" data-v-8c33f9b1><img src="'+Et+'" alt="github" class="icon-img" data-v-8c33f9b1></a>',3)),e(De,{class:"icon-img-rounded",src:oo,"hide-on-click-modal":!0,"zoom-rate":1.2,"max-scale":7,lazy:"","min-scale":.2,"preview-src-list":["http://cdn.hguofichp.cn/zfb.jpg"],"initial-index":4,fit:"cover"}),e(Qe,{trigger:"hover"},{dropdown:t(()=>[e(Te,null,{default:t(()=>[e(Ie,{to:"/me-msg"},{default:t(()=>[e(se,null,{default:t(()=>[V(" 评论 ("+Q(j.value)+") ",1)]),_:1}),e(se,null,{default:t(()=>[V(" 赞和表态 ("+Q(X.value)+") ",1)]),_:1})]),_:1})]),_:1})]),default:t(()=>[o("div",Gt,[o("span",null,[s[7]||(s[7]=o("img",{src:ht,alt:"msg",class:"icon-img"},null,-1)),G.value>0?(E(),_("span",Zt,Q(G.value),1)):G.value===0?(E(),_("span",$t,"0")):H("",!0),s[8]||(s[8]=o("br",null,null,-1)),s[9]||(s[9]=V("消息 "))])])]),_:1}),e(Nt,{style:{"margin-left":"20px"},class:"icon-img"})])]),e(Z,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=T=>r.value=T),memeArr:C.value,loading:w.value,emptyText:N,onRefresh:m},{default:t(()=>[o("div",eo,[s[13]||(s[13]=o("div",null,"24h热门烂梗",-1)),o("div",null,[e(O,{onClick:p},{default:t(()=>s[12]||(s[12]=[V("查看近七天热门")])),_:1})])])]),_:1},8,["modelValue","memeArr","loading"]),e(Z,{modelValue:c.value,"onUpdate:modelValue":s[2]||(s[2]=T=>c.value=T),memeArr:g.value,loading:A.value,emptyText:N,onRefresh:v},{default:t(()=>[o("div",to,[s[15]||(s[15]=o("div",null,"七天热门烂梗",-1)),o("div",null,[e(O,{onClick:y},{default:t(()=>s[14]||(s[14]=[V("查看近24h热门")])),_:1})])])]),_:1},8,["modelValue","memeArr","loading"]),e(Z,{modelValue:M.value,"onUpdate:modelValue":s[3]||(s[3]=T=>M.value=T),memeArr:x.value,loading:D.value,emptyText:u.value,onRefresh:k},{default:t(()=>s[16]||(s[16]=[o("div",{class:"search-tips"},"烂梗搜索结果:",-1)])),_:1},8,["modelValue","memeArr","loading","emptyText"])]),e(Re,{modelValue:b.value,"onUpdate:modelValue":s[4]||(s[4]=T=>b.value=T),title:"谢谢你",width:f(q)},{default:t(()=>s[17]||(s[17]=[o("img",{src:"http://cdn.hguofichp.cn/zfb.jpg",alt:"",width:"100%"},null,-1)])),_:1},8,["modelValue","width"])],64)}}}),lo=U(ao,[["__scopeId","data-v-8c33f9b1"]]),no={class:"footer"},so={class:"content"},ro={class:"date-font"},Ao=W({__name:"footer-bar",setup(I){const d=i(0),n=new Date("2026-02-16"),b=new Date;d.value=Math.ceil((n.getTime()-b.getTime())/(1e3*3600*24));const r=new Date("2024-02-07"),C=te(()=>{const m=new Date().getTime()-r.getTime();return Math.floor(m/(1e3*60*60*24))});return(w,m)=>(E(),_("div",no,[o("div",so,[o("div",ro,[m[0]||(m[0]=V("距服务器到期还有")),o("span",null,Q(d.value),1),m[1]||(m[1]=V("天"))]),o("div",null,[m[2]||(m[2]=o("a",{href:"https://ipw.cn/ipv6webcheck/?site=sb6657.cn",title:"",target:"_blank",style:{color:"black"}},[o("img",{style:{display:"inline-block","vertical-align":"middle",width:"150px"},alt:"",src:"https://static.ipw.cn/icon/ipv6-s5.svg"})],-1)),V(" 本站已运行"+Q(C.value)+"天 域名所有: ",1),m[3]||(m[3]=o("a",{href:"https://yuba.douyu.com/member/LW7rKJ9qVVwG/main/news",target:"_blank"},"@陈苏何",-1))])])]))}}),io=U(Ao,[["__scopeId","data-v-25b66ea2"]]),uo={class:"tab"},mo={class:"tab-container"},co=["onClick"],po={class:"main-content"},go={class:"sidebar"},fo={class:"sidebar-icon"},vo=["src"],Eo={class:"content"},ho={href:"https://github.com/SEhzm/sb6657/blob/master/%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97.md",target:"_blank"},wo={class:"version"},_o=W({__name:"MainLayout",setup(I){const d=xe(),n=pt();function b(r){n.push(r)}return(r,C)=>{const w=Le,m=qe,y=L("router-view");return E(),_(F,null,[o("div",null,[e(lo),o("div",uo,[o("div",mo,[(E(!0),_(F,null,ee(f(ue),(c,g)=>(E(),_("div",{class:je(`tab1 ${c.path===f(d).path?"selected":"none"}`),key:c.path,onClick:A=>b(c.path)},Q(c.text),11,co))),128))])]),o("div",po,[o("div",go,[e(m,{router:"",class:"sidebar-el-menu","default-active":r.$route.path},{default:t(()=>[(E(!0),_(F,null,ee(f(ue),(c,g)=>(E(),le(w,{key:c.path,index:c.path},{default:t(()=>[o("div",fo,[o("img",{src:c.icon,alt:""},null,8,vo)]),o("span",null,Q(c.text),1)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active"])]),o("div",Eo,[e(y)])]),e(io)]),o("a",ho,[o("span",wo,"版本: "+Q(f(mt)),1)]),C[0]||(C[0]=o("div",{class:"GuangGaoWei"},[o("span",{style:{display:"flex","font-size":"large",color:"white"}},"广告位招租")],-1))],64)}}}),Po=U(_o,[["__scopeId","data-v-0732a8b2"]]);export{Po as default};
