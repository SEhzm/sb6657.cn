import{h as u,a as i,M as h,_ as y}from"./index.DoGCtXYe.js";import{p as f}from"./element-plus.BESwIpp9.js";import{r as d,f as _,Y as v,d as E,w as M,o as b,c as C,a as m,T as p,I as w}from"./@vue.kwc71ESp.js";async function g(t,e){var r,n;try{const a=await u.get(t);return(n=(r=a==null?void 0:a.data)==null?void 0:r[0])!=null&&n.barrage?a.data.map(o=>({content:o.barrage,category:o.tableName,id:`${o.barrageId}`,copyCount:o.cnt})):(console.log(`获取${e}烂梗失败`,a),!1)}catch(a){return console.log(`获取${e}烂梗失败`,a),!1}}function B(){return g(i.GET_HOT_MEME_24h,"24h热门")}function O(){return g(i.GET_HOT_MEME_7D,"七天热门")}async function D(t){console.log(`搜索词: ${t}`);try{const e=await u.post(i.SEARCH_MEME,{QueryBarrage:t});return e.data.length===0?(console.log("未搜索到烂梗"),"notfound"):e.data.map(n=>({content:n.barrage,category:"allbarrage",id:n.id,copyCount:+n.cnt}))}catch(e){return console.log("搜索烂梗失败",e),!1}}async function U(t,e,r){var n,a,s;console.log(`请求烂梗分类: ${t}, 页数: ${e}, 每页烂梗数: ${r}`);try{const o=(n=h.find(l=>l.category===t))==null?void 0:n.api;if(!o)throw new Error("未找到此分类");const c=await u.get(o,{params:{pageNum:e,pageSize:r}});if(((s=(a=c.data)==null?void 0:a.list)==null?void 0:s.length)<=0)throw new Error("请求到的烂梗列表为空");return{memeArr:c.data.list.map(l=>({content:l.barrage,id:l.id,category:t,copyCount:+l.cnt})),total:c.data.total}}catch(o){return console.error("请求烂梗列表失败",o),!1}}function k(t,e,r){let n=null;return(...a)=>{if(n)return e();{const s=t(...a);return n=setTimeout(()=>{n=null},r),s}}}function T(t){f({title:"复制失败",message:`复制操作失败，请稍后重试。
                可能你的浏览器不支持被动写入剪贴板，请换用其他浏览器`,type:"error"}),console.error("复制失败:",t)}function G(){f({message:"复制成功",type:"success"})}function Q(){return f({title:"请勿刷次数",message:"复制成功，但次数没有增加",type:"warning"}),"limitedSuccess"}function R(t){const e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select();try{document.execCommand("Copy")}catch(r){return T(r),!1}return document.body.removeChild(e),!0}async function Y(t,e,r,n,a){try{const s=await u.post(i.INCREASE_COPY_COUNT,{table:t,id:e,...r?{PageNum:r}:{},...n?{PageSize:50}:{},...a?{sortOrder:a}:{}});return console.log("弹幕复制次数+1成功",s),!0}catch(s){return console.error("弹幕复制次数+1失败",s),!1}}function z(){f({title:"复制成功",message:"但是复制次数没有增加，可能是网络有问题",type:"warning"})}async function j(t,e){console.log(`烂梗投稿
 所属分类: ${t} 
烂梗内容: ${e}`);try{return(await u.post(i.SUBMIT_MEME,{table:t,barrage:e})).code!=="200"?(console.log("烂梗投稿失败"),!1):!0}catch(r){return console.error("烂梗投稿失败",r),!1}}const $=t=>new Promise(e=>setTimeout(e,t));function q(){const t=d(!1);let e=null;function r(n){t.value=n.matches}return _(()=>{e=window.matchMedia("(max-width: 600px)"),t.value=e.matches,e.addEventListener("change",r)}),v(()=>{e&&e.removeEventListener("change",r)}),t}const A={class:"container"},N={class:"place-holder"},x=E({__name:"flip-num",props:{num:{}},setup(t){const e=t,r=d(e.num),n=d(e.num);let a=!1;const s=d("normal");return M(()=>e.num,async(o,c)=>{if(r.value=c,n.value=o,a){r.value=o,n.value=o;return}a=!0,s.value=o<c?"end flex-start":"end",await $(500),r.value=o,n.value=o,s.value="normal",a=!1}),(o,c)=>(b(),C("span",A,[m("div",N,p(n.value),1),m("div",{class:w(`flip ${s.value}`)},[m("div",null,p(r.value),1),m("div",null,p(n.value),1)],2)]))}}),F=y(x,[["__scopeId","data-v-3fee0ed6"]]);export{Y as a,R as b,G as c,O as d,j as e,F as f,B as g,U as h,Q as l,z as p,D as s,k as t,q as u};
