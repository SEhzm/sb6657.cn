import{h as u,A as i,M as f}from"./index.C76xW52-.js";async function m(t,a){var s,r;try{const e=await u.get(t);return(r=(s=e==null?void 0:e.data)==null?void 0:s[0])!=null&&r.barrage?e.data.map(n=>({tags:n.tags,content:n.barrage,category:n.tableName,id:`${n.barrageId}`,copyCount:n.cnt,likes:n.likes})):(console.log(`获取${a}烂梗失败`,e),!1)}catch(e){return console.log(`获取${a}烂梗失败`,e),!1}}function M(){return m(i.GET_HOT_MEME_24h,"24h热门")}function p(){return m(i.GET_HOT_MEME_7D,"七天热门")}async function E(t){if(console.log(`搜索词: ${t}`),t==null||t=="")return!1;try{const a=await u.post(i.SEARCH_MEME,{barrage:t});return a.data.length===0?(console.log("未搜索到烂梗"),"notfound"):a.data.map(r=>({tags:r.tags,content:r.barrage,category:"allbarrage",id:r.id,copyCount:+r.cnt,likes:+r.likes,submitTime:r.submitTime}))}catch(a){return console.log("搜索烂梗失败",a),!1}}async function h(t,a,s,r){var e,l,n;console.log(`请求烂梗分类: ${t}, 页数: ${a}, 每页烂梗数: ${s}`);try{const c=(e=f.find(o=>o.category===t))==null?void 0:e.api;if(!c)throw new Error("未找到此分类");const g=await u.get(c,{params:{tags:r,pageNum:a,pageSize:s}});if(((n=(l=g.data)==null?void 0:l.list)==null?void 0:n.length)<=0)throw new Error("请求到的烂梗列表为空");return{memeArr:g.data.list.map(o=>({tags:o.tags,content:o.barrage,id:o.id,category:t,copyCount:+o.cnt,likes:+o.likes,submitTime:o.submitTime})),total:g.data.total}}catch(c){return console.error("请求烂梗列表失败",c),!1}}export{p as a,h as b,M as g,E as s};
