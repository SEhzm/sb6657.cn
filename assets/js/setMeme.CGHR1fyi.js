import{h as g,A as u,M as m}from"./index.Bq5RheCp.js";import{n as p}from"./element-plus.BOB1eDCd.js";async function f(a,r){var n,t;try{const e=await g.get(a);return(t=(n=e==null?void 0:e.data)==null?void 0:n[0])!=null&&t.barrage?e.data.map(o=>({tags:o.tags,content:o.barrage,category:o.tableName,id:`${o.barrageId}`,copyCount:o.cnt,likes:o.likes})):(console.log(`获取${r}烂梗失败`,e),!1)}catch(e){return console.log(`获取${r}烂梗失败`,e),!1}}function h(){return f(u.GET_HOT_MEME_24h,"24h热门")}function M(){return f(u.GET_HOT_MEME_7D,"七天热门")}async function A(a){console.log(`搜索词: ${a}`);try{const r=await g.post(u.SEARCH_MEME,{barrage:a});return r.data.length===0?(console.log("未搜索到烂梗"),"notfound"):r.data.map(t=>({tags:t.tags,content:t.barrage,category:"allbarrage",id:t.id,copyCount:+t.cnt,likes:+t.likes}))}catch(r){return console.log("搜索烂梗失败",r),!1}}async function b(a,r,n,t){var e,s,o;console.log(`请求烂梗分类: ${a}, 页数: ${r}, 每页烂梗数: ${n}`);try{const l=(e=m.find(c=>c.category===a))==null?void 0:e.api;if(!l)throw new Error("未找到此分类");const i=await g.get(l,{params:{tags:t,pageNum:r,pageSize:n}});if(((o=(s=i.data)==null?void 0:s.list)==null?void 0:o.length)<=0)throw new Error("请求到的烂梗列表为空");return{memeArr:i.data.list.map(c=>({tags:c.tags,content:c.barrage,id:c.id,category:a,copyCount:+c.cnt,likes:+c.likes})),total:i.data.total}}catch(l){return console.error("请求烂梗列表失败",l),!1}}async function w(a,r,n,t,e){try{const s=await g.get(u.INCREASE_COPY_COUNT+`/${r}`);return console.log("弹幕复制次数+1成功",s),!0}catch(s){return console.error("弹幕复制次数+1失败",s),!1}}function C(){p({title:"复制成功",message:"但是复制次数没有增加，可能是网络有问题",type:"warning"})}export{M as a,b,w as c,h as g,C as p,A as s};
