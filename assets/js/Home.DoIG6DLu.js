import{n as p,a as me,b as fe,f as ve,h as ge,v as be,o as G,E as ye,d as he,e as _e,g as xe,p as Ce}from"./element-plus.BOB1eDCd.js";import{o as u,c as f,r as m,f as we,X as ke,a as o,L as a,P as l,H as n,I as Y,G as $,u as J,a5 as Te,K as L,O as V,a4 as P,M as S,V as Ee,ag as Z}from"./@vue.BkZGu_Ap.js";import{_ as O,h as C,A as Se,C as Ie}from"./index.C4IJJRCx.js";import{M as Fe}from"./@element-plus.imH8POSc.js";import{_ as De}from"./favicon.CJfgpdIL.js";import{f as Me,c as Ve,t as Be,l as $e,a as Pe}from"./like-num.vue_vue_type_style_index_0_scoped_e71cc133_lang.aW2-KN2y.js";import{i as Ue}from"./echarts.CQAimccO.js";import"./echarts-wordcloud.DVMGN1VD.js";import"./lodash-es.C-zDejYo.js";import"./@vueuse.B3BMR0ps.js";import"./@popperjs.D9SI2xQl.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.DXEKZA6n.js";import"./async-validator.DKvM95Vc.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.B6fDCfyv.js";import"./@floating-ui.8uccrNCM.js";import"./axios.CCb-kr4I.js";import"./vue-router.CJ_8Ucol.js";import"./zrender.C4y2rr7x.js";import"./tslib.BDyQ-Jie.js";const ze={},Re={src:De,alt:"",style:{width:"30px"}};function Le(W,w){return u(),f("img",Re)}const Oe=O(ze,[["render",Le]]),We={__name:"wordCloud",setup(W){const w=m(null),v=[];we(()=>{C.get("/machine/WordCloud").then(g=>{v.value=g,console.log(v.value),I()}).catch(g=>{console.error(g)})});function I(){w.value&&Ue(w.value,"macarons").setOption({tooltip:{show:!0,borderColor:"#fe9a8bb3",borderWidth:1,padding:[5,5,5,5],confine:!0,backgroundColor:"rgba(255, 255, 255, .9)",textStyle:{color:"hotpink",lineHeight:16},extraCssText:"box-shadow: 0 4px 20px -4px rgba(199, 206, 215, .7);border-radius: 4px;"},series:[{type:"wordCloud",shape:"pentagon",left:"center",top:"center",width:"100%",height:"100%",right:null,bottom:null,sizeRange:[16,30],rotationRange:[0,0],rotationStep:0,gridSize:23,drawOutOfBound:!1,layoutAnimation:!0,textStyle:{fontFamily:"PingFangSC-Semibold",fontWeight:600,color:function(b){return["#9E87FFb3","#58D5FF","#9E87FFb3","#9E87FFb3","#9E87FFb3","#9E87FFb3","#73DDFF","#58D5FF"][parseInt(Math.random()*10)]}},emphasis:{focus:"none"},data:v.value}]})}return(g,b)=>(u(),f("div",{ref_key:"wordCloud",ref:w,style:{height:"250px",width:"250px"}},null,512))}},He=O(We,[["__scopeId","data-v-c725897f"]]),Ne={class:"home"},Ae={class:"card third-card"},Qe=["onTouchstart","onTouchend"],je={class:"barrage-text"},qe={style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},Ke=["src"],Xe={class:"card fourth-card"},Ge={style:{cursor:"pointer"}},Ye={class:"barrage-text"},Je={style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},Ze=["src"],et={class:"card fifth-card"},tt={class:"preset-tags-container"},ot={class:"preset-tags"},lt={class:"added-tags"},nt={class:"wordCloudDiv"},rt="custom-popover",at={__name:"Home",setup(W){const w=()=>{const t=document.getElementById("diaocha");t?t.click():console.error('Element with id "diaocha" not found')},v=m(!0),I=m(!1),g=m("数据为空"),b=ke({getRandOne:[],filteredItems:[],tableData:[],table:"",barrage:""});(()=>{sessionStorage.getItem("firstOpening")||C.get("https://api.vvhan.com/api/visitor.info").then(t=>{const e=t;localStorage.setItem("ip",t.ip),p({icon:Oe,dangerouslyUseHTMLString:!0,title:"你好",message:`
            <p>
                欢迎来自<b>${e.location||"地球"}</b>的朋友<br/>  
                ${e.system||"外星操作系统"} ${e.browser||"牛逼浏览器"}<br/>
                IP: ${e.ip||"地球"}
            </p>
            `,offset:50,customClass:"myClass",duration:1e3}),sessionStorage.setItem("firstOpening",1)})})();const U=m([]),te=()=>{C.get("/machine/dictList").then(t=>{t.code==="200"&&(U.value=t.data,F.value=t.data.map(e=>({label:e.dictLabel,value:e.dictValue})))}).catch(t=>{console.error("获取字典数据失败",t)})},H=t=>{if(!t||t.trim()==="")return[];const e=Array.from(new Set(t.split(",").map(s=>s.trim())));if(!U.value)return e.map(()=>({label:"",iconUrl:""}));const i=new Map(U.value.map(s=>[String(s.dictValue).trim(),s]));return e.map(s=>{const c=i.get(s);return c?{label:c.dictLabel,iconUrl:c.iconUrl}:{label:"",iconUrl:""}})};te();const k=m(""),T=m(""),F=m([]),D=m([]),y=m([]),N=t=>{D.value=D.value.filter(e=>e.value!==t.value),y.value=y.value.filter(e=>e!==t.value),F.value.push(t)},A=t=>{if(y.value.length>=5){p.info("最多5个标签");return}D.value.some(e=>e.value===t.value)||(D.value.push(t),y.value.push(t.value),F.value=F.value.filter(e=>e.value!==t.value))},oe=()=>{if(y.value.length===0||T.value===""||T.value===null)p.error("请选择标签或输入弹幕");else{if(y.value.length>5){p.error("最少一个标签，最多五个标签。");return}C.post(Se.SUBMIT_MEME,{tags:y.value.join(","),barrage:T.value}).then(t=>{T.value="",t.code==="200"?p.success("投稿成功，待审核(一天内)"):t.code==="500"?p.error("烂梗已经有了，勿重复提交"):p.error("请求失败")}).catch(t=>{console.error("投稿失败",t),p.error("请求失败")})}},z=()=>{console.log(k.value),(k==null||k.value=="")&&(g.value="请输入搜索词..."),C.post("/machine/Query",{barrage:k.value}).then(t=>{I.value=!0,v.value=!1,b.filteredItems=t.data||[]})};var le=m("搜索烂梗...");const Q=()=>{C.get("/machine/getRandOne").then(t=>{b.tableData=[t.data],v.value=!1}).catch(t=>{console.error("随机失败")})};Q();const ne=()=>{G({message:"复制成功",type:"success"})},re=()=>{G({message:"复制失败，请检查浏览器是否禁用navigator.clipboard对象或手动复制,请勿使用夸克浏览器",type:"error"})};let R=0,M=null,B=0;const j=t=>{const e=new Date().getTime(),i={x:event.clientX,y:event.clientY};if(M&&M.x===i.x&&M.y===i.y?(B++,console.log(B),B>4&&ye.alert("😡😡😡你在刷次数😡😡😡","请勿使用连点器",{confirmButtonText:"好吧，我错了"})):B=0,e-R<1500){p({title:"请勿刷次数",message:"复制成功，但次数没有增加",type:"warning"});const c=t.barrage;let _=document.createElement("input");_.value=c,document.body.appendChild(_),_.select();try{document.execCommand("Copy")}catch(E){p({title:"复制失败",message:"复制操作失败，请稍后重试",type:"error"}),console.error("复制失败:",E)}document.body.removeChild(_),R=e,M=i;return}M=i,R=e;const h=t.barrage;let s=document.createElement("input");s.value=h,document.body.appendChild(s),s.select();try{document.execCommand("Copy"),ne(),console.log("内容已复制到剪贴板"),C.get(`/machine/addCnt/${t.id}`).then(()=>{})}catch(c){p({title:"复制失败",message:"复制操作失败，请稍后重试",type:"error"}),console.error("复制失败:",c),re()}document.body.removeChild(s)},ae=()=>{b.filteredItems=[],I.value=!1},se=t=>{t.touchStartTime=Date.now()},ie=t=>{Date.now()-t.touchStartTime>200&&(t.popoverVisible=!0,setTimeout(()=>{t.popoverVisible=!1},1500))},ue=Be(Pe,$e,2e3);async function de(t){const e=t.content,i=ue(e);!i||i==="limitedSuccess"||(Ve(),await z())}return(t,e)=>{const i=me,h=he,s=fe,c=_e,_=ve,E=xe,q=ge,K=Z("Warning"),ce=Z("QuestionFilled"),pe=Ce,X=be;return u(),f(V,null,[e[25]||(e[25]=o("div",{class:"boomouder"},[o("img",{src:"https://gcore.jsdelivr.net/gh/9WiSHao/AnythingStorage/img/6657boom.webp",alt:"6657boom",class:"boom6657"})],-1)),o("div",Ne,[e[23]||(e[23]=o("div",{class:"card first-card"},[o("div",null,[o("b",null,[o("p",{class:"announcement"}," 新增时光相册(可评论)，新增在线投稿弹幕。玩神照片可以在上方上传照片上传至相册 ")])])],-1)),o("div",{class:"card second-card"},[o("p",null,[e[4]||(e[4]=a(" 这是一个收集6657烂梗的网站: ")),e[5]||(e[5]=o("span",{class:"dgq63136"},[o("a",{href:"https://sb6657.cn"},"sb6657.cn")],-1)),e[6]||(e[6]=a(" 尽情欣赏你们的烂梗吧。 另寻几位玩神老观众(21级牌子或3000h观看时长)，获得后台审核和记录的资格！！ ")),e[7]||(e[7]=o("br",null,null,-1)),o("b",null,[e[2]||(e[2]=a("为了更深入了解用户的需求以及作者需编写论文，特开展玩机器sb6657.cn 用户调研 ")),o("a",{style:{color:"blue",cursor:"pointer"},onClick:w},"点击我参加"),e[3]||(e[3]=a(" 为了感谢您抽出宝贵的时间参与调研，会在结束时抽取三个后台审核资格。"))])])]),o("div",Ae,[o("div",null,[l(i,{type:"primary",onClick:Q},{default:n(()=>e[8]||(e[8]=[a("点我随机一条弹幕")])),_:1}),Y((u(),$(_,{data:b.tableData,class:"barrage-table",onRowClick:j},{default:n(()=>[l(c,{prop:"barrage"},{default:n(r=>[l(s,{placement:"top",width:"auto",trigger:"hover",visible:r.row.popoverVisible},{reference:n(()=>[o("div",{style:{cursor:"pointer"},onTouchstart:d=>se(r.row),onTouchend:d=>ie(r.row)},[o("span",je,S(r.row.barrage),1)],40,Qe)]),default:n(()=>[o("div",qe,[(u(!0),f(V,null,P(H(r.row.tags),(d,x)=>(u(),f("div",{key:x,style:{"margin-right":"8px"}},[l(h,{round:"",effect:"dark",style:{fontSize:"16px",cursor:"pointer"}},{default:n(()=>[d.iconUrl?(u(),f("img",{key:0,src:d.iconUrl,style:{width:"16px",height:"16px","object-fit":"cover","vertical-align":"middle"}},null,8,Ke)):L("",!0),a(" "+S(d.label),1)]),_:2},1024)]))),128))])]),_:2},1032,["visible"])]),_:1}),l(c,{label:"",align:"center",width:"85"},{default:n(()=>[l(i,{type:"primary"},{default:n(()=>e[9]||(e[9]=[a("复制")])),_:1})]),_:1})]),_:1},8,["data"])),[[X,v.value]])])]),o("div",Xe,[o("div",null,[l(q,{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=r=>k.value=r),placeholder:J(le),onKeydown:Te(z,["enter"]),clearable:"",class:"search-input",onInput:ae},{append:n(()=>[l(i,{type:"primary",onClick:z},{default:n(()=>[l(E,null,{default:n(()=>[l(J(Fe))]),_:1})]),_:1})]),_:1},8,["modelValue","placeholder"]),I.value?Y((u(),$(_,{key:0,data:b.filteredItems,stripe:"",onRowClick:j,"empty-text":g.value,"cell-style":{cursor:"Pointer",fontSize:"large"}},{default:n(()=>[l(c,{prop:"barrage"},{default:n(r=>[l(s,{placement:"top",width:"auto",trigger:"hover","popper-class":rt},{reference:n(()=>[o("div",Ge,[o("span",Ye,S(r.row.barrage),1)])]),default:n(()=>[o("div",Je,[(u(!0),f(V,null,P(H(r.row.tags),(d,x)=>(u(),f("div",{key:x,style:{"margin-right":"8px"}},[l(h,{round:"",effect:"dark",style:{fontSize:"16px",cursor:"pointer"}},{default:n(()=>[d.iconUrl?(u(),f("img",{key:0,src:d.iconUrl,style:{width:"16px",height:"16px","object-fit":"cover","vertical-align":"middle"}},null,8,Ze)):L("",!0),a(" "+S(d.label),1)]),_:2},1024)]))),128))])]),_:2},1024)]),_:1}),l(c,{align:"center",width:"100"},{default:n(r=>[l(i,{type:"primary",class:"copy-btn",onClick:Ee(d=>de(r.row),["stop"])},{default:n(()=>[e[10]||(e[10]=a("复制 🎈")),l(Me,{num:r.row.cnt},null,8,["num"])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","empty-text"])),[[X,v.value]]):L("",!0)])]),o("div",et,[o("div",null,[o("span",null,[e[18]||(e[18]=a("可选标签")),l(s,{width:300},{reference:n(()=>[l(E,{size:"16"},{default:n(()=>[l(K)]),_:1})]),default:n(()=>[e[11]||(e[11]=a(" 为解决烂梗分栏不足和分类不清晰问题。")),e[12]||(e[12]=o("br",null,null,-1)),e[13]||(e[13]=o("b",null,"点击标签即可添加",-1))]),_:1}),l(i,{link:"",type:"success",style:{"margin-left":"50%"}},{default:n(()=>[e[17]||(e[17]=a("投稿标签 ")),l(s,{width:300},{reference:n(()=>[l(E,{size:"16"},{default:n(()=>[l(ce)]),_:1})]),default:n(()=>[e[14]||(e[14]=o("b",null,"功能待完善(后续更新将添加)，请在上方(建议/提交)问卷投稿，sry。",-1)),e[15]||(e[15]=o("br",null,null,-1)),e[16]||(e[16]=o("b",null,"审核巨严格，(重复，相似等)将不通过",-1))]),_:1})]),_:1})]),o("div",tt,[o("div",ot,[(u(!0),f(V,null,P(F.value,(r,d)=>(u(),$(h,{round:"",key:d,closable:"",onClose:x=>A(r),onClick:x=>A(r),style:{padding:"15px",cursor:"pointer","font-size":"16px"},type:"primary"},{default:n(()=>[a(S(r.label),1)]),_:2},1032,["onClose","onClick"]))),128))])]),o("span",null,[e[20]||(e[20]=a("已选标签 ")),l(s,{width:250},{reference:n(()=>[l(E,{size:"16"},{default:n(()=>[l(K)]),_:1})]),default:n(()=>[e[19]||(e[19]=o("b",null,"最少一个标签，最多五个标签。",-1))]),_:1})]),o("div",lt,[(u(!0),f(V,null,P(D.value,(r,d)=>(u(),$(h,{round:"",key:d,closable:"",onClick:x=>N(r),onClose:x=>N(r),style:{padding:"15px",cursor:"pointer","font-size":"16px"},effect:"dark"},{default:n(()=>[a(S(r.label),1)]),_:2},1032,["onClick","onClose"]))),128))]),l(q,{modelValue:T.value,"onUpdate:modelValue":e[1]||(e[1]=r=>T.value=r),maxlength:"255",autocomplete:"off",autosize:{minRows:2,maxRows:4},"show-word-limit":"",type:"textarea",placeholder:" 烂梗...."},null,8,["modelValue"]),l(i,{class:"saveBnt",type:"primary",onClick:oe},{default:n(()=>e[21]||(e[21]=[a("投稿")])),_:1})]),l(pe,{right:50,bottom:50})]),l(Ie,{class:"ChatRoom card"}),e[24]||(e[24]=o("div",{class:"card sixth-card"},[a(" 友情链接 "),o("a",{href:"https://dgq63136.cn",target:"_blank"},"dgq63136.cn"),a("    "),o("a",{href:"https://sb6657.cn/#/Starrysky",target:"_blank"},"星空背景")],-1)),o("div",nt,[e[22]||(e[22]=o("span",{style:{"background-color":"white","border-radius":"25px",padding:"5px"}},"搜索词云",-1)),l(He)])])],64)}}},It=O(at,[["__scopeId","data-v-57b353ad"]]);export{It as default};
