import{m as n,h as L,a as M,b as N}from"./element-plus.DVYLd97e.js";import{_ as $,h as b,A as D}from"./index.Df_uHdUN.js";import{r as c,c as v,a as u,O as k,a4 as C,P as x,H as m,o as i,G as y,L as _,M as V}from"./@vue.BkZGu_Ap.js";import"./lodash-es.C-zDejYo.js";import"./@vueuse.B3BMR0ps.js";import"./@element-plus.imH8POSc.js";import"./@popperjs.D9SI2xQl.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.DXEKZA6n.js";import"./async-validator.DKvM95Vc.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.B6fDCfyv.js";import"./@floating-ui.8uccrNCM.js";import"./axios.CCb-kr4I.js";import"./vue-router.CJ_8Ucol.js";import"./fireworks-js.1hhxDOOS.js";const P={class:"card"},z={class:"preset-tags-container"},A={class:"preset-tags"},F={class:"added-tags"},S={__name:"test2",setup(U){const a=c(""),s=c([]),r=c([]),l=c([]);function B(){b.get("/machine/dictList").then(t=>{t.code==="200"&&(s.value=t.data.map(e=>({label:e.dictLabel,value:e.dictValue})))})}B();const f=t=>{r.value=r.value.filter(e=>e.value!==t.value),l.value=l.value.filter(e=>e!==t.value),s.value.push(t)},h=t=>{r.value.some(e=>e.value===t.value)||(r.value.push(t),l.value.push(t.value),s.value=s.value.filter(e=>e.value!==t.value))},E=()=>{if(l.value.length===0||a.value===""||a.value===null)n.error("请选择标签或输入弹幕");else{if(l.value.length>5){n.error("最少一个标签，最多五个标签。");return}b.post(D.SUBMIT_MEME,{tags:l.value.join(","),barrage:a.value}).then(t=>{a.value="",t.code==="200"?n.success("投稿成功，待审核(一天内)"):n.error("请求失败")}).catch(t=>{console.error("投稿失败",t),n.error("请求失败")})}};return(t,e)=>{const g=N,T=L,I=M;return i(),v("div",P,[e[2]||(e[2]=u("h3",null,"预设标签",-1)),u("div",z,[u("div",A,[(i(!0),v(k,null,C(s.value,(o,p)=>(i(),y(g,{round:"",key:p,closable:"",onClose:d=>h(o),onClick:d=>h(o),style:{padding:"15px",cursor:"pointer","font-size":"20px"},type:"primary"},{default:m(()=>[_(V(o.label),1)]),_:2},1032,["onClose","onClick"]))),128))])]),e[3]||(e[3]=u("h3",null,"已添加标签",-1)),u("div",F,[(i(!0),v(k,null,C(r.value,(o,p)=>(i(),y(g,{round:"",key:p,closable:"",onClick:d=>f(o),onClose:d=>f(o),style:{padding:"15px",cursor:"pointer","font-size":"20px"},effect:"dark"},{default:m(()=>[_(V(o.label),1)]),_:2},1032,["onClick","onClose"]))),128))]),x(T,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value=o),placeholder:"投稿"},null,8,["modelValue"]),x(I,{type:"primary",onClick:E},{default:m(()=>e[1]||(e[1]=[_("投稿")])),_:1})])}}},oe=$(S,[["__scopeId","data-v-2b6fc190"]]);export{oe as default};
