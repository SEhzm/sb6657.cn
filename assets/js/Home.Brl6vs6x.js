const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/wordCloud.BAMSwJPp.js","assets/js/echarts.D13McHMB.js","assets/js/zrender.B_NAtvFA.js","assets/js/tslib.BDyQ-Jie.js","assets/js/echarts-wordcloud.tk4DMxWl.js","assets/js/index.w3WHUe5w.js","assets/js/@vue.BltuATdo.js","assets/js/pinia.DfSVr1RC.js","assets/js/axios.ngrFHoWO.js","assets/js/js-cookie.Cz0CWeBA.js","assets/js/element-plus.CmMYYrHJ.js","assets/js/lodash-es.CDeyng3v.js","assets/js/@vueuse.7i1SIcsD.js","assets/js/@element-plus.D0bpsst8.js","assets/js/@popperjs.D_chPuIy.js","assets/js/@ctrl.r5W6hzzQ.js","assets/js/dayjs.BKG3DVjA.js","assets/js/async-validator.9PlIezaS.js","assets/js/memoize-one.BdPwpGay.js","assets/js/normalize-wheel-es.BQoi3Ox2.js","assets/js/@floating-ui.D0iZPv2f.js","assets/js/vue-router.oDprkwHL.js","assets/css/index.C0sUvfrJ.css","assets/css/wordCloud.qpx4COKE.css"])))=>i.map(i=>d[i]);
import{_ as W,C as Q,h as L,b as K,A as X}from"./index.w3WHUe5w.js";import{S as P,F,T as Y}from"./@element-plus.D0bpsst8.js";import{u as j,e as Z,b as ee}from"./time.BrBSxCYg.js";import{d as se,h as m,al as h,c as d,o as i,a as s,R as a,E as te,J as n,P as g,L as U,Q as D,a6 as A,O as p,u as w,W as ae,f as oe,aU as le,I,aV as ne,aI as re}from"./@vue.BltuATdo.js";import{f as ie,t as ce}from"./flip-num.9_8IzSJm.js";import{c as de,a as ue,p as q,l as me,b as ve}from"./setMeme.BThHRwLt.js";import{b as $}from"./element-plus.CmMYYrHJ.js";import"./pinia.DfSVr1RC.js";import"./axios.ngrFHoWO.js";import"./js-cookie.Cz0CWeBA.js";import"./vue-router.oDprkwHL.js";import"./lodash-es.CDeyng3v.js";import"./@vueuse.7i1SIcsD.js";import"./@popperjs.D_chPuIy.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.BKG3DVjA.js";import"./async-validator.9PlIezaS.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.BQoi3Ox2.js";import"./@floating-ui.D0iZPv2f.js";const pe={class:"random-meme"},fe={class:"random-barrage-header"},_e={class:"refresh-controls"},be={key:0,class:"modern-barrage-container"},he={class:"barrage-main-content"},ge={class:"barrage-text-wrapper"},ye={class:"barrage-text"},ke={class:"barrage-meta-info"},Ce={key:0,class:"tags-container"},$e=["src"],we={class:"tag-label"},Te={class:"submit-time"},xe={class:"meme-id"},Ee={class:"copy-count"},Re={key:1,class:"no-data"},Ve=se({__name:"random-meme",setup(H){const y=j(),E=m([]);y.tagsLoaded.then(()=>{E.value=y.memeTags});const l=m(),f=m(!1),b=m(!1);async function _(){const{_failure:v,flatData:o}=await ee();return v||!o?(console.error("获取随机烂梗失败"),!1):(l.value=o,!0)}_();const r=async()=>{if(f.value)return;if(b.value=!0,f.value=!0,!await _()){console.error("获取随机烂梗失败"),f.value=!1;return}f.value=!1,setTimeout(()=>{b.value=!1},600)};function k(v){const o=v.split(",");return E.value.filter(u=>o.includes(u.dictValue)).map(u=>({label:u.dictLabel,iconUrl:u.iconUrl}))}const R=ce(ve,me,2e3);async function T(v){const o=R(v.barrage);if(!(!o||o==="limitedSuccess")){de();try{await ue("",v.id)?l.value.cnt=`${+l.value.cnt+1}`:q()}catch(u){console.error("更新复制计数失败:",u),q()}}}return(v,o)=>{const u=h("Refresh"),V=h("el-icon");return i(),d("div",pe,[s("div",fe,[o[2]||(o[2]=s("div",{class:"random-barrage-title"},[s("div",{class:"title"},"随机一条烂梗"),s("span",{class:"tips"},"(直接点击也能复制)")],-1)),s("div",_e,[s("span",{class:"refresh-text",onClick:r},"换一换"),a(V,{class:te(["refresh-icon",{rotating:b.value}]),onClick:r,size:"18"},{default:n(()=>[a(u)]),_:1},8,["class"])])]),l.value?(i(),d("div",be,[s("div",{class:"modern-barrage-card",onClick:o[1]||(o[1]=C=>T(l.value))},[s("div",he,[s("div",ge,[s("span",ye,g(l.value.barrage),1)]),s("div",ke,[k(l.value.tags).length>0?(i(),d("div",Ce,[(i(!0),d(D,null,A(k(l.value.tags),(C,t)=>(i(),d("div",{key:t,class:"modern-tag"},[C.iconUrl?(i(),d("img",{key:0,src:C.iconUrl,class:"tag-icon"},null,8,$e)):U("",!0),s("span",we,g(C.label),1)]))),128))])):U("",!0),s("div",Te,[s("span",xe,"#"+g(l.value.id),1),p(" "+g(w(Z)(l.value.submitTime)),1)])])]),s("div",{class:"modern-copy-button",onClick:o[0]||(o[0]=ae(C=>T(l.value),["stop"]))},[o[3]||(o[3]=s("div",{class:"copy-text"},"复制",-1)),o[4]||(o[4]=s("div",{class:"copy-icon"},"📋",-1)),s("div",Ee,[a(ie,{num:l.value.cnt||0},null,8,["num"])]),o[5]||(o[5]=s("div",{class:"copy-ripple"},null,-1))])])])):(i(),d("div",Re,"暂无烂梗数据"))])}}}),Me=W(Ve,[["__scopeId","data-v-128fd093"]]),Se={class:"home"},Be={class:"card third-card"},Ie={class:"card fifth-card"},Ue={class:"preset-tags-container"},De={class:"preset-tags"},Ae={class:"tag-icon-wrapper"},Ne=["src"],ze={class:"tag-text"},Le={class:"added-tags"},Pe={class:"match-association-container"},Fe={class:"match-section-home"},qe={key:0,class:"match-details-box-home"},We={class:"match-info-row-home"},je=["src","alt"],He={class:"match-name-home"},Oe={class:"match-time-home"},Ge={key:1,class:"no-match-info-home"},Je={class:"wordCloudDiv"},Qe={class:"word-cloud-title"},Ke={__name:"Home",setup(H){const y=j(),E=m([]);y.tagsLoaded.then(()=>{console.log("dictData",y.memeTags),E.value=y.memeTags,f.value=y.memeTags.map(t=>({iconUrl:t.iconUrl,label:t.dictLabel,value:t.dictValue}))});const l=m(""),f=m([]),b=m([]),_=m([]),r=m(null),k=m(!1);function R(){L.get("/machine/InProgressMatch").then(t=>{t.code===200&&t.data?r.value=t.data:r.value=null,console.log("Fetched match data:",r.value)}).catch(t=>{console.error("Failed to fetch in progress match:",t),r.value=null})}oe(()=>{R()});const T=t=>{b.value=b.value.filter(e=>e.value!==t.value),_.value=_.value.filter(e=>e!==t.value),f.value.push(t)},v=t=>{if(_.value.length>=5){$.info("最多5个标签");return}b.value.some(e=>e.value===t.value)||(b.value.push(t),_.value.push(t.value),f.value=f.value.filter(e=>e.value!==t.value))},o=()=>{if(_.value.length===0||l.value===""||l.value===null)$.error("请选择标签或输入弹幕");else{if(_.value.length>5){$.error("最少一个标签，最多五个标签。");return}const t={tags:_.value.join(","),barrage:l.value};k.value&&r.value&&(t.matchId=r.value.id),L.post(X.SUBMIT_MEME,t).then(e=>{l.value="",k.value=!1,e.code===200?$.success("投稿成功，待审核(一天内)"):e.code===500?$.error("烂梗已经有了，勿重复提交"):$.error("请求失败")}).catch(e=>{console.error("投稿失败",e),$.error("请求失败")})}},u=m(null),V=ne(()=>K(()=>import("./wordCloud.BAMSwJPp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])));function C(){var t,e;(e=(t=u.value)==null?void 0:t.getData)==null||e.call(t)}return(t,e)=>{const x=h("el-icon"),M=h("el-popover"),N=h("el-button"),z=h("el-tag"),O=h("el-input"),G=h("el-checkbox"),J=h("el-backtop");return i(),d("div",Se,[e[16]||(e[16]=le('<div class="boomouder" data-v-eb92bef5><img src="https://gcore.jsdelivr.net/gh/9WiSHao/AnythingStorage/img/6657boom.webp" alt="6657boom" class="boom6657" data-v-eb92bef5></div><div class="card first-card" data-v-eb92bef5><div data-v-eb92bef5><b data-v-eb92bef5><p class="announcement" data-v-eb92bef5> 因为GreasyFork被墙，你可以 <a href="https://cdn.hguofichp.cn/sb6657.cn%E6%96%97%E9%B1%BC%E7%8E%A9%E6%9C%BA%E5%99%A8%E7%83%82%E6%A2%97%E6%94%B6%E9%9B%86.user.js" target="_blank" data-v-eb92bef5>点击我下载最新的油猴插件</a> ，你只需要将下载的文件拖入油猴管理面板即可 </p></b></div></div><div class="card second-card" data-v-eb92bef5><p data-v-eb92bef5> 这是一个收集6657烂梗的网站: <span class="dgq63136" data-v-eb92bef5><a href="https://sb6657.cn" data-v-eb92bef5>sb6657.cn</a></span> 尽情欣赏你们的烂梗吧。 <b data-v-eb92bef5>开放注册功能，可能会出现收不到邮件的情况。</b><b data-v-eb92bef5>目前已支持玩机器直播间开播提醒</b></p></div>',3)),s("div",Be,[a(Me)]),s("div",Ie,[s("div",null,[s("span",null,[e[9]||(e[9]=p(" 可选标签 ",-1)),a(M,{width:300},{reference:n(()=>[a(x,{size:"16"},{default:n(()=>[a(w(P))]),_:1})]),default:n(()=>[e[3]||(e[3]=p(" 为解决烂梗分栏不足和分类不清晰问题。 ",-1)),e[4]||(e[4]=s("br",null,null,-1)),e[5]||(e[5]=s("b",null,"点击标签即可添加",-1))]),_:1}),a(N,{link:"",type:"success",class:"submit-tag-button"},{default:n(()=>[e[8]||(e[8]=p(" 投稿标签 ",-1)),a(M,{width:300},{reference:n(()=>[a(x,{size:"16"},{default:n(()=>[a(w(F))]),_:1})]),default:n(()=>[e[6]||(e[6]=s("b",null,"请在上方(建议/提交)问卷投稿。",-1)),e[7]||(e[7]=s("br",null,null,-1))]),_:1})]),_:1})]),s("div",Ue,[s("div",De,[(i(!0),d(D,null,A(f.value,(c,S)=>(i(),I(z,{round:"",key:S,closable:"",onClose:B=>v(c),onClick:B=>v(c),class:"preset-tag",type:"primary"},{default:n(()=>[s("div",Ae,[c.iconUrl?(i(),d("img",{key:0,src:c.iconUrl,class:"tag-icon"},null,8,Ne)):U("",!0),s("span",ze,g(c.label),1)])]),_:2},1032,["onClose","onClick"]))),128))])]),s("span",null,[e[11]||(e[11]=p(" 已选标签 ",-1)),a(M,{width:250},{reference:n(()=>[a(x,{size:"16"},{default:n(()=>[a(w(P))]),_:1})]),default:n(()=>[e[10]||(e[10]=s("b",null,"最少一个标签，最多五个标签。",-1))]),_:1})]),s("div",Le,[(i(!0),d(D,null,A(b.value,(c,S)=>(i(),I(z,{round:"",key:S,closable:"",onClick:B=>T(c),onClose:B=>T(c),class:"added-tag",effect:"dark"},{default:n(()=>[p(g(c.label),1)]),_:2},1032,["onClick","onClose"]))),128))]),a(O,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=c=>l.value=c),maxlength:"255",autocomplete:"off",autosize:{minRows:2,maxRows:4},"show-word-limit":"",type:"textarea",placeholder:" 烂梗...."},null,8,["modelValue"]),s("div",Pe,[s("div",Fe,[a(G,{modelValue:k.value,"onUpdate:modelValue":e[1]||(e[1]=c=>k.value=c),disabled:!r.value,class:"match-checkbox-home"},{default:n(()=>[e[12]||(e[12]=p(" 关联赛事库 ",-1)),a(x,{color:"#3db302ff",size:"16"},{default:n(()=>[a(w(F))]),_:1})]),_:1},8,["modelValue","disabled"]),r.value?(i(),d("div",qe,[s("div",We,[s("img",{src:r.value.matchesImg,class:"match-image-home",alt:r.value.matchesName},null,8,je),s("span",He,g(r.value.matchesName),1)]),s("div",Oe,g(r.value.startTime)+" 至 "+g(r.value.endTime),1)])):(i(),d("div",Ge,"当前无正在进行的大型赛事")),a(N,{class:"saveBnt",type:"primary",onClick:o},{default:n(()=>[...e[13]||(e[13]=[p("投稿",-1)])]),_:1})])])]),a(J,{right:50,bottom:50})]),a(Q,{class:"ChatRoom card"}),e[17]||(e[17]=s("div",{class:"card sixth-card"},[p(" 友情链接 "),s("a",{href:"https://dgq63136.cn",target:"_blank"},"dgq63136.cn"),p("     "),s("a",{href:"https://sb6657.cn/#/Starrysky",target:"_blank"},"星空背景")],-1)),s("div",Je,[s("span",Qe,[e[14]||(e[14]=p(" 搜索词云 ",-1)),a(x,{size:"20",class:"word-cloud-refresh-icon",onClick:e[2]||(e[2]=c=>C())},{default:n(()=>[a(w(Y))]),_:1})]),(i(),I(re,null,{default:n(()=>[a(w(V),{ref_key:"wordCloudRef",ref:u},null,512)]),fallback:n(()=>[...e[15]||(e[15]=[s("div",{class:"word-cloud-loading"},"词云加载中...",-1)])]),_:1}))])])}}},bs=W(Ke,[["__scopeId","data-v-eb92bef5"]]);export{bs as default};
