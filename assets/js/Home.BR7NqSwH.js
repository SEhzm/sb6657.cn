const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/wordCloud.BSke-Q1_.js","assets/js/echarts.D13McHMB.js","assets/js/zrender.B_NAtvFA.js","assets/js/tslib.BDyQ-Jie.js","assets/js/echarts-wordcloud.tk4DMxWl.js","assets/js/index.hlrrolfs.js","assets/js/@vue.kiFpFjC4.js","assets/js/pinia.C1jrEj6N.js","assets/js/element-plus.BExUxls1.js","assets/js/lodash-es.S0Y0Up6J.js","assets/js/@vueuse.DR1wJ5Y1.js","assets/js/@element-plus.CD6l22se.js","assets/js/@popperjs.D_chPuIy.js","assets/js/@ctrl.r5W6hzzQ.js","assets/js/dayjs.BKG3DVjA.js","assets/js/async-validator.9PlIezaS.js","assets/js/memoize-one.BdPwpGay.js","assets/js/normalize-wheel-es.BQoi3Ox2.js","assets/js/@floating-ui.D0iZPv2f.js","assets/css/element-plus.Wt6lyhqs.css","assets/js/axios.NIGUFBhG.js","assets/js/js-cookie.Cz0CWeBA.js","assets/js/vue-router.DfLJYrxF.js","assets/css/index.Daukf7a0.css","assets/css/wordCloud.qpx4COKE.css"])))=>i.map(i=>d[i]);
import{_ as ce,C as ue,h as T,A as O,b as me}from"./index.hlrrolfs.js";import{c as pe,v as ve,g as he,d as fe,h as _e,j as be,n as ge,q as ye,A as xe,f as Ce,b as m,a as W,E as Ee}from"./element-plus.BExUxls1.js";import{r as v,l as ke,i as q,al as S,c as h,o as i,aU as we,a as o,R as a,K as Te,J as l,O as d,I as B,Q as U,a6 as A,L as H,P as f,u as Ve,aV as De,aI as Be}from"./@vue.kiFpFjC4.js";import"./pinia.C1jrEj6N.js";import"./axios.NIGUFBhG.js";import"./js-cookie.Cz0CWeBA.js";import"./vue-router.DfLJYrxF.js";import"./@element-plus.CD6l22se.js";import"./lodash-es.S0Y0Up6J.js";import"./@vueuse.DR1wJ5Y1.js";import"./@popperjs.D_chPuIy.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.BKG3DVjA.js";import"./async-validator.9PlIezaS.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.BQoi3Ox2.js";import"./@floating-ui.D0iZPv2f.js";const Ie={class:"home"},Me={class:"card third-card"},Re=["onTouchstart","onTouchend"],Se={class:"barrage-text"},Ue={style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},Ae={class:"tag-icon-wrapper"},Pe=["src"],ze={style:{"vertical-align":"middle"}},Ne={style:{position:"absolute",bottom:"0",right:"0","font-size":"11px","min-width":"170px"}},Le={class:"card fifth-card"},$e={class:"preset-tags-container"},Fe={class:"preset-tags"},je={class:"tag-icon-wrapper"},Oe=["src"],We={style:{"vertical-align":"middle"}},qe={class:"added-tags"},He={class:"match-association-container"},Qe={class:"match-section-home"},Ge={key:0,class:"match-details-box-home"},Je={class:"match-info-row-home"},Ke=["src","alt"],Xe={class:"match-name-home"},Ye={class:"match-time-home"},Ze={key:1,class:"no-match-info-home"},et={class:"wordCloudDiv"},tt={style:{"background-color":"white","border-radius":"25px",padding:"5px"}},ot={__name:"Home",setup(at){const P=v(!0),z=ke({getRandOne:[],tableData:[],table:"",barrage:""}),I=v([]),Q=()=>{T.get("/machine/dictList").then(t=>{t.code===200&&(I.value=t.data,x.value=t.data.map(e=>({iconUrl:e.iconUrl,label:e.dictLabel,value:e.dictValue})))}).catch(t=>{console.error("获取字典数据失败",t)})},G=t=>{if(!t||t.trim()==="")return[];const e=Array.from(new Set(t.split(",").map(n=>n.trim())));if(!I.value)return e.map(()=>({label:"",iconUrl:""}));const c=new Map(I.value.map(n=>[String(n.dictValue).trim(),n]));return e.map(n=>{const u=c.get(n);return u?{label:u.dictLabel,iconUrl:u.iconUrl}:{label:"",iconUrl:""}})};Q();const b=v(""),x=v([]),C=v([]),_=v([]),r=v(null),V=v(!1);function J(){T.get("/machine/InProgressMatch").then(t=>{t.code===200&&t.data?r.value=t.data:r.value=null,console.log("Fetched match data:",r.value)}).catch(t=>{console.error("Failed to fetch in progress match:",t),r.value=null})}q(()=>{J()});const N=t=>{C.value=C.value.filter(e=>e.value!==t.value),_.value=_.value.filter(e=>e!==t.value),x.value.push(t)},L=t=>{if(_.value.length>=5){m.info("最多5个标签");return}C.value.some(e=>e.value===t.value)||(C.value.push(t),_.value.push(t.value),x.value=x.value.filter(e=>e.value!==t.value))},K=()=>{if(_.value.length===0||b.value===""||b.value===null)m.error("请选择标签或输入弹幕");else{if(_.value.length>5){m.error("最少一个标签，最多五个标签。");return}const t={tags:_.value.join(","),barrage:b.value};V.value&&r.value&&(t.matchId=r.value.id),T.post(O.SUBMIT_MEME,t).then(e=>{b.value="",V.value=!1,e.code===200?m.success("投稿成功，待审核(一天内)"):e.code===500?m.error("烂梗已经有了，勿重复提交"):m.error("请求失败")}).catch(e=>{console.error("投稿失败",e),m.error("请求失败")})}},$=()=>{T.get(O.GET_RAND_ONE_MEME).then(t=>{z.tableData=[t.data],P.value=!1}).catch(t=>{console.error("随机失败")})};$();const X=()=>{W({message:"复制成功",type:"success"})},Y=()=>{W({message:"复制失败，请检查浏览器是否禁用navigator.clipboard对象或手动复制,请勿使用夸克浏览器",type:"error"})};let M=0,E=null,R=0;const Z=t=>{const e=new Date().getTime(),c={x:event.clientX,y:event.clientY};if(E&&E.x===c.x&&E.y===c.y?(R++,R>4&&Ee.alert("😡😡😡你在刷次数😡😡😡","请勿使用连点器",{confirmButtonText:"好吧，我错了"})):R=0,e-M<1500){m({title:"请勿刷次数",message:"复制成功，但次数没有增加",type:"warning"});const u=t.barrage;let y=document.createElement("input");y.value=u,document.body.appendChild(y),y.select();try{document.execCommand("Copy")}catch(D){m({title:"复制失败",message:"复制操作失败，请稍后重试",type:"error"}),console.error("复制失败:",D)}document.body.removeChild(y),M=e,E=c;return}E=c,M=e;const g=t.barrage;let n=document.createElement("input");n.value=g,document.body.appendChild(n),n.select();try{document.execCommand("Copy"),X(),console.log("内容已复制到剪贴板"),T.get(`/machine/addCnt/${t.id}`).then(()=>{})}catch(u){m({title:"复制失败",message:"复制操作失败，请稍后重试",type:"error"}),console.error("复制失败:",u),Y()}document.body.removeChild(n)},ee=t=>{t.touchStartTime=Date.now()},te=t=>{Date.now()-t.touchStartTime>100&&(t.popoverVisible=!0,setTimeout(()=>{t.popoverVisible=!1},1500))},F=v(null),oe=De(()=>me(()=>import("./wordCloud.BSke-Q1_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24])));function ae(){var t,e;(e=(t=F.value)==null?void 0:t.getData)==null||e.call(t)}const le=t=>t?t.replace("T"," ").split(".")[0]:"";return q(()=>{}),(t,e)=>{const c=pe,g=_e,n=fe,u=he,y=Ce,D=S("Warning"),k=be,j=S("QuestionFilled"),se=ge,ne=ye,re=xe,ie=S("Refresh"),de=ve;return i(),h("div",Ie,[e[18]||(e[18]=we('<div class="boomouder" data-v-2945874e><img src="https://gcore.jsdelivr.net/gh/9WiSHao/AnythingStorage/img/6657boom.webp" alt="6657boom" class="boom6657" data-v-2945874e></div><div class="card first-card" data-v-2945874e><div data-v-2945874e><b data-v-2945874e><p class="announcement" data-v-2945874e> 因为GreasyFork被墙，你可以 <a href="https://cdn.hguofichp.cn/sb6657.cn%E6%96%97%E9%B1%BC%E7%8E%A9%E6%9C%BA%E5%99%A8%E7%83%82%E6%A2%97%E6%94%B6%E9%9B%86.user.js" target="_blank" data-v-2945874e>点击我下载最新的油猴插件</a> ，你只需要将下载的文件拖入油猴管理面板即可 </p></b></div></div><div class="card second-card" data-v-2945874e><p data-v-2945874e> 这是一个收集6657烂梗的网站: <span class="dgq63136" data-v-2945874e><a href="https://sb6657.cn" data-v-2945874e>sb6657.cn</a></span> 尽情欣赏你们的烂梗吧。 <b data-v-2945874e>开放注册功能，可能会出现收不到邮件的情况。</b><b data-v-2945874e>目前已支持玩机器直播间开播提醒</b></p></div>',3)),o("div",Me,[o("div",null,[a(c,{type:"primary",onClick:$},{default:l(()=>[...e[3]||(e[3]=[d("点我随机一条弹幕",-1)])]),_:1}),Te((i(),B(y,{data:z.tableData,class:"barrage-table",onRowClick:Z},{default:l(()=>[a(u,{prop:"barrage"},{default:l(s=>[a(n,{placement:"top",width:"auto",trigger:"hover",visible:s.row.popoverVisible},{reference:l(()=>[o("div",{style:{cursor:"pointer"},onTouchstart:p=>ee(s.row),onTouchend:p=>te(s.row)},[o("span",Se,f(s.row.barrage),1)],40,Re)]),default:l(()=>[o("div",Ue,[(i(!0),h(U,null,A(G(s.row.tags),(p,w)=>(i(),h("div",{key:w,style:{"margin-right":"8px"}},[a(g,{round:"",effect:"dark",style:{fontSize:"16px",cursor:"pointer"}},{default:l(()=>[o("div",Ae,[p.iconUrl?(i(),h("img",{key:0,src:p.iconUrl,style:{width:"22px",height:"22px","object-fit":"cover","vertical-align":"middle"}},null,8,Pe)):H("",!0),o("span",ze,f(p.label),1)])]),_:2},1024)]))),128)),o("span",Ne,"投稿时间: "+f(le(s.row.submitTime)),1)])]),_:2},1032,["visible"])]),_:1}),a(u,{label:"",align:"center",width:"85"},{default:l(()=>[a(c,{type:"primary"},{default:l(()=>[...e[4]||(e[4]=[d("复制",-1)])]),_:1})]),_:1})]),_:1},8,["data"])),[[de,P.value]])])]),o("div",Le,[o("div",null,[o("span",null,[e[11]||(e[11]=d(" 可选标签 ",-1)),a(n,{width:300},{reference:l(()=>[a(k,{size:"16"},{default:l(()=>[a(D)]),_:1})]),default:l(()=>[e[5]||(e[5]=d(" 为解决烂梗分栏不足和分类不清晰问题。 ",-1)),e[6]||(e[6]=o("br",null,null,-1)),e[7]||(e[7]=o("b",null,"点击标签即可添加",-1))]),_:1}),a(c,{link:"",type:"success",style:{"margin-left":"50%"}},{default:l(()=>[e[10]||(e[10]=d(" 投稿标签 ",-1)),a(n,{width:300},{reference:l(()=>[a(k,{size:"16"},{default:l(()=>[a(j)]),_:1})]),default:l(()=>[e[8]||(e[8]=o("b",null,"请在上方(建议/提交)问卷投稿。",-1)),e[9]||(e[9]=o("br",null,null,-1))]),_:1})]),_:1})]),o("div",$e,[o("div",Fe,[(i(!0),h(U,null,A(x.value,(s,p)=>(i(),B(g,{round:"",key:p,closable:"",onClose:w=>L(s),onClick:w=>L(s),style:{padding:"15px",cursor:"pointer","font-size":"16px"},type:"primary"},{default:l(()=>[o("div",je,[s.iconUrl?(i(),h("img",{key:0,src:s.iconUrl,style:{width:"22px",height:"22px","object-fit":"cover","vertical-align":"middle"}},null,8,Oe)):H("",!0),o("span",We,f(s.label),1)])]),_:2},1032,["onClose","onClick"]))),128))])]),o("span",null,[e[13]||(e[13]=d(" 已选标签 ",-1)),a(n,{width:250},{reference:l(()=>[a(k,{size:"16"},{default:l(()=>[a(D)]),_:1})]),default:l(()=>[e[12]||(e[12]=o("b",null,"最少一个标签，最多五个标签。",-1))]),_:1})]),o("div",qe,[(i(!0),h(U,null,A(C.value,(s,p)=>(i(),B(g,{round:"",key:p,closable:"",onClick:w=>N(s),onClose:w=>N(s),style:{padding:"15px",cursor:"pointer","font-size":"16px"},effect:"dark"},{default:l(()=>[d(f(s.label),1)]),_:2},1032,["onClick","onClose"]))),128))]),a(se,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=s=>b.value=s),maxlength:"255",autocomplete:"off",autosize:{minRows:2,maxRows:4},"show-word-limit":"",type:"textarea",placeholder:" 烂梗...."},null,8,["modelValue"]),o("div",He,[o("div",Qe,[a(ne,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=s=>V.value=s),disabled:!r.value,class:"match-checkbox-home"},{default:l(()=>[e[14]||(e[14]=d(" 关联赛事库 ",-1)),a(k,{color:"#3db302ff",size:"16"},{default:l(()=>[a(j)]),_:1})]),_:1},8,["modelValue","disabled"]),r.value?(i(),h("div",Ge,[o("div",Je,[o("img",{src:r.value.matchesImg,class:"match-image-home",alt:r.value.matchesName},null,8,Ke),o("span",Xe,f(r.value.matchesName),1)]),o("div",Ye,f(r.value.startTime)+" 至 "+f(r.value.endTime),1)])):(i(),h("div",Ze,"当前无正在进行的大型赛事")),a(c,{class:"saveBnt",type:"primary",onClick:K},{default:l(()=>[...e[15]||(e[15]=[d("投稿",-1)])]),_:1})])])]),a(re,{right:50,bottom:50})]),a(ue,{class:"ChatRoom card"}),e[19]||(e[19]=o("div",{class:"card sixth-card"},[d(" 友情链接 "),o("a",{href:"https://dgq63136.cn",target:"_blank"},"dgq63136.cn"),d("     "),o("a",{href:"https://sb6657.cn/#/Starrysky",target:"_blank"},"星空背景")],-1)),o("div",et,[o("span",tt,[e[16]||(e[16]=d(" 搜索词云 ",-1)),a(k,{size:"20",style:{cursor:"pointer",animation:"rotating 4s linear infinite reverse"},onClick:e[2]||(e[2]=s=>ae())},{default:l(()=>[a(ie)]),_:1})]),(i(),B(Be,null,{default:l(()=>[a(Ve(oe),{ref_key:"wordCloudRef",ref:F},null,512)]),fallback:l(()=>[...e[17]||(e[17]=[o("div",{style:{height:"270px",width:"300px"}},"词云加载中...",-1)])]),_:1}))])])}}},xt=ce(ot,[["__scopeId","data-v-2945874e"]]);export{xt as default};
