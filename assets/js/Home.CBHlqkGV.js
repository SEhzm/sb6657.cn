const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/wordCloud.2EiVTHt2.js","assets/js/echarts.D13McHMB.js","assets/js/zrender.B_NAtvFA.js","assets/js/tslib.BDyQ-Jie.js","assets/js/echarts-wordcloud.tk4DMxWl.js","assets/js/index.Daz8feoB.js","assets/js/@vue.BltuATdo.js","assets/js/pinia.DfSVr1RC.js","assets/js/axios.ngrFHoWO.js","assets/js/js-cookie.Cz0CWeBA.js","assets/js/element-plus.DvA9XFyU.js","assets/js/lodash-es.CDeyng3v.js","assets/js/@vueuse.7i1SIcsD.js","assets/js/@element-plus.CSs8RMtX.js","assets/js/@popperjs.D_chPuIy.js","assets/js/@ctrl.r5W6hzzQ.js","assets/js/dayjs.BKG3DVjA.js","assets/js/async-validator.9PlIezaS.js","assets/js/memoize-one.BdPwpGay.js","assets/js/normalize-wheel-es.BQoi3Ox2.js","assets/js/@floating-ui.D0iZPv2f.js","assets/js/vue-router.oDprkwHL.js","assets/css/index.C0sUvfrJ.css","assets/css/wordCloud.qpx4COKE.css"])))=>i.map(i=>d[i]);
import{_ as ce,C as ue,h as D,A as O,b as me}from"./index.Daz8feoB.js";import{h,l as pe,f as W,al as d,ar as ve,c as b,o as i,aU as he,a,R as o,K as be,J as l,O as c,I as B,Q as U,a6 as A,L as q,P as f,u as fe,aV as _e,aI as ge}from"./@vue.BltuATdo.js";import{b as p,a as H,E as ye}from"./element-plus.DvA9XFyU.js";import"./pinia.DfSVr1RC.js";import"./axios.ngrFHoWO.js";import"./js-cookie.Cz0CWeBA.js";import"./vue-router.oDprkwHL.js";import"./@element-plus.CSs8RMtX.js";import"./lodash-es.CDeyng3v.js";import"./@vueuse.7i1SIcsD.js";import"./@popperjs.D_chPuIy.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.BKG3DVjA.js";import"./async-validator.9PlIezaS.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.BQoi3Ox2.js";import"./@floating-ui.D0iZPv2f.js";const xe={class:"home"},Ce={class:"card third-card"},ke=["onTouchstart","onTouchend"],we={class:"barrage-text"},Te={style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},Ee={class:"tag-icon-wrapper"},De=["src"],Ve={style:{"vertical-align":"middle"}},Me={style:{position:"absolute",bottom:"0",right:"0","font-size":"11px","min-width":"170px"}},Be={class:"card fifth-card"},Ie={class:"preset-tags-container"},Re={class:"preset-tags"},Se={class:"tag-icon-wrapper"},Ue=["src"],Ae={style:{"vertical-align":"middle"}},ze={class:"added-tags"},Ne={class:"match-association-container"},Pe={class:"match-section-home"},Le={key:0,class:"match-details-box-home"},$e={class:"match-info-row-home"},Fe=["src","alt"],je={class:"match-name-home"},Oe={class:"match-time-home"},We={key:1,class:"no-match-info-home"},qe={class:"wordCloudDiv"},He={style:{"background-color":"white","border-radius":"25px",padding:"5px"}},Qe={__name:"Home",setup(Ge){const z=h(!0),N=pe({getRandOne:[],tableData:[],table:"",barrage:""}),I=h([]),Q=()=>{D.get("/machine/dictList").then(t=>{t.code===200&&(I.value=t.data,C.value=t.data.map(e=>({iconUrl:e.iconUrl,label:e.dictLabel,value:e.dictValue})))}).catch(t=>{console.error("获取字典数据失败",t)})},G=t=>{if(!t||t.trim()==="")return[];const e=Array.from(new Set(t.split(",").map(n=>n.trim())));if(!I.value)return e.map(()=>({label:"",iconUrl:""}));const u=new Map(I.value.map(n=>[String(n.dictValue).trim(),n]));return e.map(n=>{const m=u.get(n);return m?{label:m.dictLabel,iconUrl:m.iconUrl}:{label:"",iconUrl:""}})};Q();const g=h(""),C=h([]),k=h([]),_=h([]),r=h(null),V=h(!1);function J(){D.get("/machine/InProgressMatch").then(t=>{t.code===200&&t.data?r.value=t.data:r.value=null,console.log("Fetched match data:",r.value)}).catch(t=>{console.error("Failed to fetch in progress match:",t),r.value=null})}W(()=>{J()});const P=t=>{k.value=k.value.filter(e=>e.value!==t.value),_.value=_.value.filter(e=>e!==t.value),C.value.push(t)},L=t=>{if(_.value.length>=5){p.info("最多5个标签");return}k.value.some(e=>e.value===t.value)||(k.value.push(t),_.value.push(t.value),C.value=C.value.filter(e=>e.value!==t.value))},K=()=>{if(_.value.length===0||g.value===""||g.value===null)p.error("请选择标签或输入弹幕");else{if(_.value.length>5){p.error("最少一个标签，最多五个标签。");return}const t={tags:_.value.join(","),barrage:g.value};V.value&&r.value&&(t.matchId=r.value.id),D.post(O.SUBMIT_MEME,t).then(e=>{g.value="",V.value=!1,e.code===200?p.success("投稿成功，待审核(一天内)"):e.code===500?p.error("烂梗已经有了，勿重复提交"):p.error("请求失败")}).catch(e=>{console.error("投稿失败",e),p.error("请求失败")})}},$=()=>{D.get(O.GET_RAND_ONE_MEME).then(t=>{N.tableData=[t.data],z.value=!1}).catch(t=>{console.error("随机失败")})};$();const X=()=>{H({message:"复制成功",type:"success"})},Y=()=>{H({message:"复制失败，请检查浏览器是否禁用navigator.clipboard对象或手动复制,请勿使用夸克浏览器",type:"error"})};let R=0,w=null,S=0;const Z=t=>{const e=new Date().getTime(),u={x:event.clientX,y:event.clientY};if(w&&w.x===u.x&&w.y===u.y?(S++,S>4&&ye.alert("😡😡😡你在刷次数😡😡😡","请勿使用连点器",{confirmButtonText:"好吧，我错了"})):S=0,e-R<1500){p({title:"请勿刷次数",message:"复制成功，但次数没有增加",type:"warning"});const m=t.barrage;let x=document.createElement("input");x.value=m,document.body.appendChild(x),x.select();try{document.execCommand("Copy")}catch(M){p({title:"复制失败",message:"复制操作失败，请稍后重试",type:"error"}),console.error("复制失败:",M)}document.body.removeChild(x),R=e,w=u;return}w=u,R=e;const y=t.barrage;let n=document.createElement("input");n.value=y,document.body.appendChild(n),n.select();try{document.execCommand("Copy"),X(),console.log("内容已复制到剪贴板"),D.get(`/machine/addCnt/${t.id}`).then(()=>{})}catch(m){p({title:"复制失败",message:"复制操作失败，请稍后重试",type:"error"}),console.error("复制失败:",m),Y()}document.body.removeChild(n)},ee=t=>{t.touchStartTime=Date.now()},te=t=>{Date.now()-t.touchStartTime>100&&(t.popoverVisible=!0,setTimeout(()=>{t.popoverVisible=!1},1500))},F=h(null),ae=_e(()=>me(()=>import("./wordCloud.2EiVTHt2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])));function oe(){var t,e;(e=(t=F.value)==null?void 0:t.getData)==null||e.call(t)}const le=t=>t?t.replace("T"," ").split(".")[0]:"";return W(()=>{}),(t,e)=>{const u=d("el-button"),y=d("el-tag"),n=d("el-popover"),m=d("el-table-column"),x=d("el-table"),M=d("Warning"),T=d("el-icon"),j=d("QuestionFilled"),se=d("el-input"),ne=d("el-checkbox"),re=d("el-backtop"),ie=d("Refresh"),de=ve("loading");return i(),b("div",xe,[e[18]||(e[18]=he('<div class="boomouder" data-v-5aa3b3aa><img src="https://gcore.jsdelivr.net/gh/9WiSHao/AnythingStorage/img/6657boom.webp" alt="6657boom" class="boom6657" data-v-5aa3b3aa></div><div class="card first-card" data-v-5aa3b3aa><div data-v-5aa3b3aa><b data-v-5aa3b3aa><p class="announcement" data-v-5aa3b3aa> 因为GreasyFork被墙，你可以 <a href="https://cdn.hguofichp.cn/sb6657.cn%E6%96%97%E9%B1%BC%E7%8E%A9%E6%9C%BA%E5%99%A8%E7%83%82%E6%A2%97%E6%94%B6%E9%9B%86.user.js" target="_blank" data-v-5aa3b3aa>点击我下载最新的油猴插件</a> ，你只需要将下载的文件拖入油猴管理面板即可 </p></b></div></div><div class="card second-card" data-v-5aa3b3aa><p data-v-5aa3b3aa> 这是一个收集6657烂梗的网站: <span class="dgq63136" data-v-5aa3b3aa><a href="https://sb6657.cn" data-v-5aa3b3aa>sb6657.cn</a></span> 尽情欣赏你们的烂梗吧。 <b data-v-5aa3b3aa>开放注册功能，可能会出现收不到邮件的情况。</b><b data-v-5aa3b3aa>目前已支持玩机器直播间开播提醒</b></p></div>',3)),a("div",Ce,[a("div",null,[o(u,{type:"primary",onClick:$},{default:l(()=>[...e[3]||(e[3]=[c("点我随机一条弹幕",-1)])]),_:1}),be((i(),B(x,{data:N.tableData,class:"barrage-table",onRowClick:Z},{default:l(()=>[o(m,{prop:"barrage"},{default:l(s=>[o(n,{placement:"top",width:"auto",trigger:"hover",visible:s.row.popoverVisible},{reference:l(()=>[a("div",{style:{cursor:"pointer"},onTouchstart:v=>ee(s.row),onTouchend:v=>te(s.row)},[a("span",we,f(s.row.barrage),1)],40,ke)]),default:l(()=>[a("div",Te,[(i(!0),b(U,null,A(G(s.row.tags),(v,E)=>(i(),b("div",{key:E,style:{"margin-right":"8px"}},[o(y,{round:"",effect:"dark",style:{fontSize:"16px",cursor:"pointer"}},{default:l(()=>[a("div",Ee,[v.iconUrl?(i(),b("img",{key:0,src:v.iconUrl,style:{width:"22px",height:"22px","object-fit":"cover","vertical-align":"middle"}},null,8,De)):q("",!0),a("span",Ve,f(v.label),1)])]),_:2},1024)]))),128)),a("span",Me,"投稿时间: "+f(le(s.row.submitTime)),1)])]),_:2},1032,["visible"])]),_:1}),o(m,{label:"",align:"center",width:"85"},{default:l(()=>[o(u,{type:"primary"},{default:l(()=>[...e[4]||(e[4]=[c("复制",-1)])]),_:1})]),_:1})]),_:1},8,["data"])),[[de,z.value]])])]),a("div",Be,[a("div",null,[a("span",null,[e[11]||(e[11]=c(" 可选标签 ",-1)),o(n,{width:300},{reference:l(()=>[o(T,{size:"16"},{default:l(()=>[o(M)]),_:1})]),default:l(()=>[e[5]||(e[5]=c(" 为解决烂梗分栏不足和分类不清晰问题。 ",-1)),e[6]||(e[6]=a("br",null,null,-1)),e[7]||(e[7]=a("b",null,"点击标签即可添加",-1))]),_:1}),o(u,{link:"",type:"success",style:{"margin-left":"50%"}},{default:l(()=>[e[10]||(e[10]=c(" 投稿标签 ",-1)),o(n,{width:300},{reference:l(()=>[o(T,{size:"16"},{default:l(()=>[o(j)]),_:1})]),default:l(()=>[e[8]||(e[8]=a("b",null,"请在上方(建议/提交)问卷投稿。",-1)),e[9]||(e[9]=a("br",null,null,-1))]),_:1})]),_:1})]),a("div",Ie,[a("div",Re,[(i(!0),b(U,null,A(C.value,(s,v)=>(i(),B(y,{round:"",key:v,closable:"",onClose:E=>L(s),onClick:E=>L(s),style:{padding:"15px",cursor:"pointer","font-size":"16px"},type:"primary"},{default:l(()=>[a("div",Se,[s.iconUrl?(i(),b("img",{key:0,src:s.iconUrl,style:{width:"22px",height:"22px","object-fit":"cover","vertical-align":"middle"}},null,8,Ue)):q("",!0),a("span",Ae,f(s.label),1)])]),_:2},1032,["onClose","onClick"]))),128))])]),a("span",null,[e[13]||(e[13]=c(" 已选标签 ",-1)),o(n,{width:250},{reference:l(()=>[o(T,{size:"16"},{default:l(()=>[o(M)]),_:1})]),default:l(()=>[e[12]||(e[12]=a("b",null,"最少一个标签，最多五个标签。",-1))]),_:1})]),a("div",ze,[(i(!0),b(U,null,A(k.value,(s,v)=>(i(),B(y,{round:"",key:v,closable:"",onClick:E=>P(s),onClose:E=>P(s),style:{padding:"15px",cursor:"pointer","font-size":"16px"},effect:"dark"},{default:l(()=>[c(f(s.label),1)]),_:2},1032,["onClick","onClose"]))),128))]),o(se,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=s=>g.value=s),maxlength:"255",autocomplete:"off",autosize:{minRows:2,maxRows:4},"show-word-limit":"",type:"textarea",placeholder:" 烂梗...."},null,8,["modelValue"]),a("div",Ne,[a("div",Pe,[o(ne,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=s=>V.value=s),disabled:!r.value,class:"match-checkbox-home"},{default:l(()=>[e[14]||(e[14]=c(" 关联赛事库 ",-1)),o(T,{color:"#3db302ff",size:"16"},{default:l(()=>[o(j)]),_:1})]),_:1},8,["modelValue","disabled"]),r.value?(i(),b("div",Le,[a("div",$e,[a("img",{src:r.value.matchesImg,class:"match-image-home",alt:r.value.matchesName},null,8,Fe),a("span",je,f(r.value.matchesName),1)]),a("div",Oe,f(r.value.startTime)+" 至 "+f(r.value.endTime),1)])):(i(),b("div",We,"当前无正在进行的大型赛事")),o(u,{class:"saveBnt",type:"primary",onClick:K},{default:l(()=>[...e[15]||(e[15]=[c("投稿",-1)])]),_:1})])])]),o(re,{right:50,bottom:50})]),o(ue,{class:"ChatRoom card"}),e[19]||(e[19]=a("div",{class:"card sixth-card"},[c(" 友情链接 "),a("a",{href:"https://dgq63136.cn",target:"_blank"},"dgq63136.cn"),c("     "),a("a",{href:"https://sb6657.cn/#/Starrysky",target:"_blank"},"星空背景")],-1)),a("div",qe,[a("span",He,[e[16]||(e[16]=c(" 搜索词云 ",-1)),o(T,{size:"20",style:{cursor:"pointer",animation:"rotating 4s linear infinite reverse"},onClick:e[2]||(e[2]=s=>oe())},{default:l(()=>[o(ie)]),_:1})]),(i(),B(ge,null,{default:l(()=>[o(fe(ae),{ref_key:"wordCloudRef",ref:F},null,512)]),fallback:l(()=>[...e[17]||(e[17]=[a("div",{style:{height:"270px",width:"300px"}},"词云加载中...",-1)])]),_:1}))])])}}},mt=ce(Qe,[["__scopeId","data-v-5aa3b3aa"]]);export{mt as default};
