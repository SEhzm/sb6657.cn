import{n as v,a as Se,b as De,f as Me,g as Ie,h as Ve,o as Ue,p as $e,v as Pe,q as ie,E as Re,d as ze,e as Be,r as Fe}from"./element-plus.K7C1HgYT.js";import{o as r,c as p,r as c,f as Oe,X as Le,a as o,L as d,P as n,H as a,I as Y,G as V,u as ue,a5 as Ne,Q as Ae,O as T,a4 as U,K as F,M as b,V as Qe,ag as K}from"./@vue.BkZGu_Ap.js";import{_ as G,h,A,C as We}from"./index.BXJMGjwm.js";import{M as je}from"./@element-plus.imH8POSc.js";import{_ as He}from"./favicon.CJfgpdIL.js";import{f as qe,c as Ye,t as Ke,l as Ge,a as Xe}from"./like-num.vue_vue_type_style_index_0_scoped_e71cc133_lang.gl3u9Y7u.js";import{i as Je}from"./echarts.CQAimccO.js";import"./echarts-wordcloud.DVMGN1VD.js";import"./lodash-es.C-zDejYo.js";import"./@vueuse.B3BMR0ps.js";import"./@popperjs.D9SI2xQl.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.DXEKZA6n.js";import"./async-validator.DKvM95Vc.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.B6fDCfyv.js";import"./@floating-ui.8uccrNCM.js";import"./axios.CCb-kr4I.js";import"./vue-router.CJ_8Ucol.js";import"./zrender.C4y2rr7x.js";import"./tslib.BDyQ-Jie.js";const Ze={},et={src:He,alt:"",style:{width:"30px"}};function tt(X,O){return r(),p("img",et)}const ot=G(Ze,[["render",tt]]),lt={__name:"wordCloud",setup(X,{expose:O}){const _=c(null),E=[];Oe(()=>{$()});function $(){h.get("/machine/WordCloud").then(S=>{E.value=S,x()}).catch(S=>{console.error(S)})}function x(){_.value&&Je(_.value,"macarons").setOption({tooltip:{show:!0,borderColor:"#fe9a8bb3",borderWidth:1,padding:[5,5,5,5],confine:!0,backgroundColor:"rgba(255, 255, 255, .9)",textStyle:{color:"hotpink",lineHeight:16},extraCssText:"box-shadow: 0 4px 20px -4px rgba(199, 206, 215, 1);border-radius: 4px;"},series:[{type:"wordCloud",shape:"pentagon",left:"center",top:"center",width:"100%",height:"100%",right:null,bottom:null,sizeRange:[16,30],rotationRange:[-20,20],rotationStep:25,gridSize:15,drawOutOfBound:!1,layoutAnimation:!0,textStyle:{fontFamily:"PingFangSC-Semibold",fontWeight:600,color:function(P){return["#0d3555","#58D5FF","#0093c4","#0d3555","#0093c4","#0d3555","#73DDFF","#58D5FF","#ff0000","#00ff00","#ff0000","#00ff00","#1a721a","#1a721a","#1a721a"][parseInt(Math.random()*15)]}},emphasis:{focus:"none"},data:E.value}]})}return O({getData:$}),(S,P)=>(r(),p("div",{ref_key:"wordCloud",ref:_,style:{height:"270px",width:"300px"}},null,512))}},nt=G(lt,[["__scopeId","data-v-c5985664"]]),at={class:"home"},rt={class:"card third-card"},st=["onTouchstart","onTouchend"],it={class:"barrage-text"},ut={style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},dt=["src"],ct={style:{"vertical-align":"middle"}},pt={class:"card fourth-card"},mt={style:{display:"flex"}},vt={class:"added-tags"},ft={class:"preset-tags-container"},gt={class:"preset-tags"},yt=["src"],_t={style:{"vertical-align":"middle"}},bt={style:{cursor:"pointer"}},ht={class:"barrage-text"},xt={style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},Ct=["src"],wt={style:{"vertical-align":"middle"}},kt={class:"card fifth-card"},Tt={class:"preset-tags-container"},Et={class:"preset-tags"},St=["src"],Dt={style:{"vertical-align":"middle"}},Mt={class:"added-tags"},It={class:"wordCloudDiv"},Vt={style:{"background-color":"white","border-radius":"25px",padding:"5px"}},Ut="custom-popover",$t={__name:"Home",setup(X){const O=()=>{const t=document.getElementById("diaocha");t?t.click():console.error('Element with id "diaocha" not found')},_=c(!0),E=c(!1),$=c("æ•°æ®ä¸ºç©º"),x=Le({getRandOne:[],filteredItems:[],tableData:[],table:"",barrage:""});(()=>{sessionStorage.getItem("firstOpening")||h.get("https://api.vvhan.com/api/visitor.info").then(t=>{const e=t;localStorage.setItem("ip",t.ip),v({icon:ot,dangerouslyUseHTMLString:!0,title:"ä½ å¥½",message:`
            <p>
                æ¬¢è¿æ¥è‡ª<b>${e.location||"åœ°çƒ"}</b>çš„æœ‹å‹<br/>  
                ${e.system||"å¤–æ˜Ÿæ“ä½œç³»ç»Ÿ"} ${e.browser||"ç‰›é€¼æµè§ˆå™¨"}<br/>
                IP: ${e.ip||"åœ°çƒ"}
            </p>
            `,offset:50,customClass:"myClass",duration:1e3}),sessionStorage.setItem("firstOpening",1)})})();const P=c([]),J=()=>{h.get("/machine/dictList").then(t=>{t.code==="200"&&(P.value=t.data,g.value=t.data.map(e=>({iconUrl:e.iconUrl,label:e.dictLabel,value:e.dictValue})))}).catch(t=>{console.error("è·å–å­—å…¸æ•°æ®å¤±è´¥",t)})},Z=t=>{if(!t||t.trim()==="")return[];const e=Array.from(new Set(t.split(",").map(i=>i.trim())));if(!P.value)return e.map(()=>({label:"",iconUrl:""}));const u=new Map(P.value.map(i=>[String(i.dictValue).trim(),i]));return e.map(i=>{const m=u.get(i);return m?{label:m.dictLabel,iconUrl:m.iconUrl}:{label:"",iconUrl:""}})};J();const R=c(""),Q=c(!1),L=c(""),D=c(""),g=c([]),z=c([]),C=c([]),M=c([]),I=c([]),ee=t=>{z.value=z.value.filter(e=>e.value!==t.value),M.value=M.value.filter(e=>e!==t.value),g.value.push(t)},te=t=>{if(M.value.length>=5){v.info("æœ€å¤š5ä¸ªæ ‡ç­¾");return}z.value.some(e=>e.value===t.value)||(z.value.push(t),M.value.push(t.value),g.value=g.value.filter(e=>e.value!==t.value))},de=()=>{if(M.value.length===0||D.value===""||D.value===null)v.error("è¯·é€‰æ‹©æ ‡ç­¾æˆ–è¾“å…¥å¼¹å¹•");else{if(M.value.length>5){v.error("æœ€å°‘ä¸€ä¸ªæ ‡ç­¾ï¼Œæœ€å¤šäº”ä¸ªæ ‡ç­¾ã€‚");return}h.post(A.SUBMIT_MEME,{tags:I.value.join(","),barrage:D.value}).then(t=>{D.value="",t.code==="200"?v.success("æŠ•ç¨¿æˆåŠŸï¼Œå¾…å®¡æ ¸(ä¸€å¤©å†…)"):t.code==="500"?v.error("çƒ‚æ¢—å·²ç»æœ‰äº†ï¼Œå‹¿é‡å¤æäº¤"):v.error("è¯·æ±‚å¤±è´¥")}).catch(t=>{console.error("æŠ•ç¨¿å¤±è´¥",t),v.error("è¯·æ±‚å¤±è´¥")})}},W=t=>{C.value=C.value.filter(e=>e.value!==t.value),I.value=I.value.filter(e=>e!==t.value),g.value.push(t)},oe=t=>{if(I.value.length>=5){v.info("æœ€å¤š5ä¸ªæ ‡ç­¾");return}C.value.some(e=>e.value===t.value)||(C.value.push(t),I.value.push(t.value),g.value=g.value.filter(e=>e.value!==t.value))};function ce(){for(L.value=[];C.value.length>0;)W(C.value[0])}const pe=t=>t.getTime()<new Date("2024-09-24").getTime(),j=()=>{(R==null||R.value=="")&&($.value="è¯·è¾“å…¥æœç´¢è¯..."),h.post(A.SEARCH_MEME,{tags:I.value.join(","),barrage:R.value,submitTime:L.value}).then(t=>{E.value=!0,_.value=!1,x.filteredItems=t.data||[]})};var me=c("æœç´¢çƒ‚æ¢—...");const le=()=>{h.get(A.GET_RAND_ONE_MEME).then(t=>{x.tableData=[t.data],_.value=!1}).catch(t=>{console.error("éšæœºå¤±è´¥")})};le();const ve=()=>{ie({message:"å¤åˆ¶æˆåŠŸ",type:"success"})},fe=()=>{ie({message:"å¤åˆ¶å¤±è´¥ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦ç¦ç”¨navigator.clipboardå¯¹è±¡æˆ–æ‰‹åŠ¨å¤åˆ¶,è¯·å‹¿ä½¿ç”¨å¤¸å…‹æµè§ˆå™¨",type:"error"})};let H=0,B=null,N=0;const ne=t=>{const e=new Date().getTime(),u={x:event.clientX,y:event.clientY};if(B&&B.x===u.x&&B.y===u.y?(N++,console.log(N),N>4&&Re.alert("ğŸ˜¡ğŸ˜¡ğŸ˜¡ä½ åœ¨åˆ·æ¬¡æ•°ğŸ˜¡ğŸ˜¡ğŸ˜¡","è¯·å‹¿ä½¿ç”¨è¿ç‚¹å™¨",{confirmButtonText:"å¥½å§ï¼Œæˆ‘é”™äº†"})):N=0,e-H<1500){v({title:"è¯·å‹¿åˆ·æ¬¡æ•°",message:"å¤åˆ¶æˆåŠŸï¼Œä½†æ¬¡æ•°æ²¡æœ‰å¢åŠ ",type:"warning"});const m=t.barrage;let w=document.createElement("input");w.value=m,document.body.appendChild(w),w.select();try{document.execCommand("Copy")}catch(k){v({title:"å¤åˆ¶å¤±è´¥",message:"å¤åˆ¶æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",type:"error"}),console.error("å¤åˆ¶å¤±è´¥:",k)}document.body.removeChild(w),H=e,B=u;return}B=u,H=e;const y=t.barrage;let i=document.createElement("input");i.value=y,document.body.appendChild(i),i.select();try{document.execCommand("Copy"),ve(),console.log("å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"),h.get(`/machine/addCnt/${t.id}`).then(()=>{})}catch(m){v({title:"å¤åˆ¶å¤±è´¥",message:"å¤åˆ¶æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",type:"error"}),console.error("å¤åˆ¶å¤±è´¥:",m),fe()}document.body.removeChild(i)},ge=()=>{x.filteredItems=[],E.value=!1},ye=t=>{t.touchStartTime=Date.now()},_e=t=>{Date.now()-t.touchStartTime>200&&(t.popoverVisible=!0,setTimeout(()=>{t.popoverVisible=!1},1500))},be=Ke(Xe,Ge,2e3);async function he(t){const e=t.barrage,u=be(e);!u||u==="limitedSuccess"||(h.get(A.INCREASE_COPY_COUNT+"/"+t.id),Ye(),j())}const q=c(null);function xe(){q.value&&q.value.getData()}return(t,e)=>{const u=Se,y=ze,i=De,m=Be,w=Me,k=Ie,ae=Ve,Ce=Ue,we=$e,re=K("Warning"),ke=K("QuestionFilled"),Te=Fe,Ee=K("Refresh"),se=Pe;return r(),p(T,null,[e[28]||(e[28]=o("div",{class:"boomouder"},[o("img",{src:"https://gcore.jsdelivr.net/gh/9WiSHao/AnythingStorage/img/6657boom.webp",alt:"6657boom",class:"boom6657"})],-1)),o("div",at,[e[26]||(e[26]=o("div",{class:"card first-card"},[o("div",null,[o("b",null,[o("p",{class:"announcement"}," æ–°å¢æ—¶å…‰ç›¸å†Œ(å¯è¯„è®º)ï¼Œæ–°å¢åœ¨çº¿æŠ•ç¨¿å¼¹å¹•ã€‚ç©ç¥ç…§ç‰‡å¯ä»¥åœ¨ä¸Šæ–¹ä¸Šä¼ ç…§ç‰‡ä¸Šä¼ è‡³ç›¸å†Œ ")])])],-1)),o("div",{class:"card second-card"},[o("p",null,[e[6]||(e[6]=d(" è¿™æ˜¯ä¸€ä¸ªæ”¶é›†6657çƒ‚æ¢—çš„ç½‘ç«™: ")),e[7]||(e[7]=o("span",{class:"dgq63136"},[o("a",{href:"https://sb6657.cn"},"sb6657.cn")],-1)),e[8]||(e[8]=d(" å°½æƒ…æ¬£èµä½ ä»¬çš„çƒ‚æ¢—å§ã€‚ å¦å¯»å‡ ä½ç©ç¥è€è§‚ä¼—(21çº§ç‰Œå­æˆ–3000hè§‚çœ‹æ—¶é•¿)ï¼Œè·å¾—åå°å®¡æ ¸å’Œè®°å½•çš„èµ„æ ¼ï¼ï¼ ")),o("b",null,[e[5]||(e[5]=d("é”æ„åˆ›æ–°ï¼š")),o("span",{style:{color:"blue",cursor:"pointer"},onClick:O},"ç”¨æˆ·è°ƒç ”")])])]),o("div",rt,[o("div",null,[n(u,{type:"primary",onClick:le},{default:a(()=>e[9]||(e[9]=[d("ç‚¹æˆ‘éšæœºä¸€æ¡å¼¹å¹•")])),_:1}),Y((r(),V(w,{data:x.tableData,class:"barrage-table",onRowClick:ne},{default:a(()=>[n(m,{prop:"barrage"},{default:a(l=>[n(i,{placement:"top",width:"auto",trigger:"hover",visible:l.row.popoverVisible},{reference:a(()=>[o("div",{style:{cursor:"pointer"},onTouchstart:s=>ye(l.row),onTouchend:s=>_e(l.row)},[o("span",it,b(l.row.barrage),1)],40,st)]),default:a(()=>[o("div",ut,[(r(!0),p(T,null,U(Z(l.row.tags),(s,f)=>(r(),p("div",{key:f,style:{"margin-right":"8px"}},[n(y,{round:"",effect:"dark",style:{fontSize:"16px",cursor:"pointer"}},{default:a(()=>[s.iconUrl?(r(),p("img",{key:0,src:s.iconUrl,style:{width:"22px",height:"22px","object-fit":"cover","vertical-align":"middle"}},null,8,dt)):F("",!0),o("span",ct,b(s.label),1)]),_:2},1024)]))),128))])]),_:2},1032,["visible"])]),_:1}),n(m,{label:"",align:"center",width:"85"},{default:a(()=>[n(u,{type:"primary"},{default:a(()=>e[10]||(e[10]=[d("å¤åˆ¶")])),_:1})]),_:1})]),_:1},8,["data"])),[[se,_.value]])])]),o("div",pt,[o("div",null,[o("div",mt,[n(ae,{modelValue:R.value,"onUpdate:modelValue":e[0]||(e[0]=l=>R.value=l),placeholder:ue(me),onKeydown:Ne(j,["enter"]),clearable:"",class:"search-input",onInput:ge},{append:a(()=>[n(u,{type:"primary",onClick:j},{default:a(()=>[n(k,null,{default:a(()=>[n(ue(je))]),_:1})]),_:1})]),_:1},8,["modelValue","placeholder"]),n(Ce,{modelValue:Q.value,"onUpdate:modelValue":e[1]||(e[1]=l=>Q.value=l),label:"é«˜çº§æ£€ç´¢ >",onChange:ce,style:{"margin-left":"10px"}},null,8,["modelValue"])]),Y(o("div",null,[o("div",null,[e[11]||(e[11]=o("span",{style:{display:"block",color:"var(--el-text-color-secondary)","font-size":"14px"}},"çƒ‚æ¢—æ”¶é›†æ—¶é—´èŒƒå›´(å¯é€‰)",-1)),n(we,{modelValue:L.value,"onUpdate:modelValue":e[2]||(e[2]=l=>L.value=l),type:"daterange","range-separator":"åˆ°","value-format":"YYYY-MM-DD","start-placeholder":"èµ·å§‹","end-placeholder":"ç»“æŸ","disabled-date":pe},null,8,["modelValue"]),e[12]||(e[12]=o("span",{style:{display:"block",color:"var(--el-text-color-secondary)","font-size":"14px"}},"çƒ‚æ¢—åŒ…å«æ ‡ç­¾(å¯é€‰)",-1)),o("div",vt,[(r(!0),p(T,null,U(C.value,(l,s)=>(r(),V(y,{round:"",key:s,closable:"",onClick:f=>W(l),onClose:f=>W(l),style:{padding:"15px",cursor:"pointer","font-size":"16px"},effect:"dark"},{default:a(()=>[d(b(l.label),1)]),_:2},1032,["onClick","onClose"]))),128))])]),o("div",ft,[o("div",gt,[(r(!0),p(T,null,U(g.value,(l,s)=>(r(),V(y,{round:"",key:s,closable:"",onClose:f=>oe(l),onClick:f=>oe(l),style:{padding:"15px",cursor:"pointer","font-size":"16px"},type:"primary"},{default:a(()=>[l.iconUrl?(r(),p("img",{key:0,src:l.iconUrl,style:{width:"22px",height:"22px","object-fit":"cover","vertical-align":"middle"}},null,8,yt)):F("",!0),o("span",_t,b(l.label),1)]),_:2},1032,["onClose","onClick"]))),128))])])],512),[[Ae,Q.value]]),E.value?Y((r(),V(w,{key:0,data:x.filteredItems,stripe:"",onRowClick:ne,"empty-text":$.value,"cell-style":{cursor:"Pointer",fontSize:"large"}},{default:a(()=>[n(m,{prop:"barrage"},{default:a(l=>[n(i,{placement:"top",width:"auto",trigger:"hover","popper-class":Ut},{reference:a(()=>[o("div",bt,[o("span",ht,b(l.row.barrage),1)])]),default:a(()=>[o("div",xt,[(r(!0),p(T,null,U(Z(l.row.tags),(s,f)=>(r(),p("div",{key:f,style:{"margin-right":"8px"}},[n(y,{round:"",effect:"dark",style:{fontSize:"16px",cursor:"pointer"}},{default:a(()=>[s.iconUrl?(r(),p("img",{key:0,src:s.iconUrl,style:{width:"22px",height:"22px","object-fit":"cover","vertical-align":"middle"}},null,8,Ct)):F("",!0),o("span",wt,b(s.label),1)]),_:2},1024)]))),128))])]),_:2},1024)]),_:1}),n(m,{align:"center",width:"100"},{default:a(l=>[n(u,{type:"primary",class:"copy-btn",onClick:Qe(s=>he(l.row),["stop"])},{default:a(()=>[e[13]||(e[13]=d("å¤åˆ¶ ğŸˆ")),n(qe,{num:l.row.cnt},null,8,["num"])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","empty-text"])),[[se,_.value]]):F("",!0)])]),o("div",kt,[o("div",null,[o("span",null,[e[21]||(e[21]=d("å¯é€‰æ ‡ç­¾")),n(i,{width:300},{reference:a(()=>[n(k,{size:"16"},{default:a(()=>[n(re)]),_:1})]),default:a(()=>[e[14]||(e[14]=d(" ä¸ºè§£å†³çƒ‚æ¢—åˆ†æ ä¸è¶³å’Œåˆ†ç±»ä¸æ¸…æ™°é—®é¢˜ã€‚")),e[15]||(e[15]=o("br",null,null,-1)),e[16]||(e[16]=o("b",null,"ç‚¹å‡»æ ‡ç­¾å³å¯æ·»åŠ ",-1))]),_:1}),n(u,{link:"",type:"success",style:{"margin-left":"50%"}},{default:a(()=>[e[20]||(e[20]=d("æŠ•ç¨¿æ ‡ç­¾ ")),n(i,{width:300},{reference:a(()=>[n(k,{size:"16"},{default:a(()=>[n(ke)]),_:1})]),default:a(()=>[e[17]||(e[17]=o("b",null,"åŠŸèƒ½å¾…å®Œå–„(åç»­æ›´æ–°å°†æ·»åŠ )ï¼Œè¯·åœ¨ä¸Šæ–¹(å»ºè®®/æäº¤)é—®å·æŠ•ç¨¿ï¼Œsryã€‚",-1)),e[18]||(e[18]=o("br",null,null,-1)),e[19]||(e[19]=o("b",null,"å®¡æ ¸å·¨ä¸¥æ ¼ï¼Œ(é‡å¤ï¼Œç›¸ä¼¼ç­‰)å°†ä¸é€šè¿‡",-1))]),_:1})]),_:1})]),o("div",Tt,[o("div",Et,[(r(!0),p(T,null,U(g.value,(l,s)=>(r(),V(y,{round:"",key:s,closable:"",onClose:f=>te(l),onClick:f=>te(l),style:{padding:"15px",cursor:"pointer","font-size":"16px"},type:"primary"},{default:a(()=>[l.iconUrl?(r(),p("img",{key:0,src:l.iconUrl,style:{width:"22px",height:"22px","object-fit":"cover","vertical-align":"middle"}},null,8,St)):F("",!0),o("span",Dt,b(l.label),1)]),_:2},1032,["onClose","onClick"]))),128))])]),o("span",null,[e[23]||(e[23]=d("å·²é€‰æ ‡ç­¾ ")),n(i,{width:250},{reference:a(()=>[n(k,{size:"16"},{default:a(()=>[n(re)]),_:1})]),default:a(()=>[e[22]||(e[22]=o("b",null,"æœ€å°‘ä¸€ä¸ªæ ‡ç­¾ï¼Œæœ€å¤šäº”ä¸ªæ ‡ç­¾ã€‚",-1))]),_:1})]),o("div",Mt,[(r(!0),p(T,null,U(z.value,(l,s)=>(r(),V(y,{round:"",key:s,closable:"",onClick:f=>ee(l),onClose:f=>ee(l),style:{padding:"15px",cursor:"pointer","font-size":"16px"},effect:"dark"},{default:a(()=>[d(b(l.label),1)]),_:2},1032,["onClick","onClose"]))),128))]),n(ae,{modelValue:D.value,"onUpdate:modelValue":e[3]||(e[3]=l=>D.value=l),maxlength:"255",autocomplete:"off",autosize:{minRows:2,maxRows:4},"show-word-limit":"",type:"textarea",placeholder:" çƒ‚æ¢—...."},null,8,["modelValue"]),n(u,{class:"saveBnt",type:"primary",onClick:de},{default:a(()=>e[24]||(e[24]=[d("æŠ•ç¨¿")])),_:1})]),n(Te,{right:50,bottom:50})]),n(We,{class:"ChatRoom card"}),e[27]||(e[27]=o("div",{class:"card sixth-card"},[d(" å‹æƒ…é“¾æ¥ "),o("a",{href:"https://dgq63136.cn",target:"_blank"},"dgq63136.cn"),d("Â Â Â  "),o("a",{href:"https://sb6657.cn/#/Starrysky",target:"_blank"},"æ˜Ÿç©ºèƒŒæ™¯")],-1)),o("div",It,[o("span",Vt,[e[25]||(e[25]=d("æœç´¢è¯äº‘")),n(k,{size:"20",style:{cursor:"pointer",animation:"rotating 4s linear infinite reverse"},onClick:e[4]||(e[4]=l=>xe())},{default:a(()=>[n(Ee)]),_:1})]),n(nt,{ref_key:"wordCloudRef",ref:q},null,512)])])],64)}}},to=G($t,[["__scopeId","data-v-dd17b3d4"]]);export{to as default};
