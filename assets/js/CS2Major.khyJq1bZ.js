import{v as pe,c as re,a as H,M as fe,e as _e,N as be,n as Te,L as ke}from"./element-plus.BPmODNcd.js";import{d as G,r as v,w as se,c as f,o as p,a as s,Q as w,u as D,I as _,D as M,O as y,P as ie,a6 as le,V as R,n as he,k as ee,i as oe,J as ye,M as K,K as V,W as ge,H as we,S as Ce}from"./@vue.Ca5AQEsS.js";import{d as B}from"./vuedraggable.DT4yJUdD.js";import{_ as Y,h as Q,u as $e}from"./index.D5zUv94Z.js";import{u as Ve}from"./vue-router.DhOS9MZH.js";import{R as Pe,v as Ie}from"./@element-plus.De7neK-R.js";import{h as Me}from"./html2canvas.BfYXEYrK.js";import{S as Se,P as Le,W as qe,A as De,O as Ee,a as xe,D as me,b as Be,c as ze,R as Ae,G as Re,M as We,B as Ue,V as ve}from"./three.BX7nTO8R.js";import"./lodash-es.S0Y0Up6J.js";import"./@vueuse.BFkoDYlQ.js";import"./@popperjs.D_chPuIy.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.DcnvBwdO.js";import"./async-validator.9PlIezaS.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.BQoi3Ox2.js";import"./@floating-ui.58V2siOx.js";import"./vue.CP_DfUbm.js";import"./sortablejs.YiSzADr_.js";import"./pinia.Dz8zdBJG.js";import"./axios.xsH4HHeE.js";import"./js-cookie.Cz0CWeBA.js";const Fe={class:"major-predict-root"},je={class:"team-pool"},Ne=["src","alt"],He={class:"team-name"},Oe={class:"predict-area"},Ge={class:"predict-row"},Ke={class:"predict-block"},Ze={class:"predict-label"},Je=["src","alt"],Qe={class:"team-name"},Ye=["onClick","disabled"],Xe={class:"predict-block"},es={class:"predict-label"},ss=["src","alt"],ts={class:"team-name"},as=["onClick","disabled"],os={class:"predict-row advance-row"},is={class:"advance-label"},ls=["src","alt"],ns={class:"team-name"},ds=["onClick","disabled"],rs=G({name:"MatchPredictionBase"}),cs=G({...rs,props:{teams:{},firstLabel:{},secondLabel:{},advanceLabel:{},maxAdvance:{},isTimeValid:{type:Boolean}},setup(W,{expose:j}){const b=W,z={name:"teams"},r=v([]),c=v([]),d=v([]),h=v([]);se(()=>b.teams,a=>{r.value=[...a]},{immediate:!0});function $(a){const o=a.draggedContext.element;return a.from&&!a.from.classList.contains("team-list")&&a.to.classList.contains("predict-slot")?!0:!(S(o.id)||c.value.length>=2)}function T(a){const o=a.draggedContext.element;return a.from&&!a.from.classList.contains("team-list")&&a.to.classList.contains("predict-slot")?!0:!(S(o.id)||d.value.length>=2)}function k(a){const o=a.draggedContext.element;return!I(a.from)&&a.to.classList.contains("predict-slot")?!0:!S(o.id)}function I(a){return a&&a.classList&&a.classList.contains("team-list")}function S(a){return c.value.some(o=>o.id===a)||d.value.some(o=>o.id===a)||h.value.some(o=>o.id===a)}function L(a){if(a.added){const o=a.added.element,i=a.added.newIndex??0;if(a.from&&!a.from.classList.contains("team-list")){const n=c.value[i];n&&(c.value.splice(i,1),c.value.splice(i,0,o),r.value.some(g=>g.id===n.id)||r.value.push(n))}else if(c.value.length>=2){const n=c.value[i];n&&(c.value.splice(i,1),c.value.splice(i,0,o),r.value.some(g=>g.id===n.id)||r.value.push(n))}else c.value.splice(i,0,o);c.value.length>2&&c.value.splice(2).forEach(g=>{r.value.some(C=>C.id===g.id)||r.value.push(g)}),d.value=d.value.filter(n=>n.id!==o.id),h.value=h.value.filter(n=>n.id!==o.id)}u()}function x(a){if(a.added){const o=a.added.element,i=a.added.newIndex??0;if(a.from&&!a.from.classList.contains("team-list")){const n=d.value[i];n&&(d.value.splice(i,1),d.value.splice(i,0,o),r.value.some(g=>g.id===n.id)||r.value.push(n))}else if(d.value.length>=2){const n=d.value[i];n&&(d.value.splice(i,1),d.value.splice(i,0,o),r.value.some(g=>g.id===n.id)||r.value.push(n))}else d.value.splice(i,0,o);d.value.length>2&&d.value.splice(2).forEach(g=>{r.value.some(C=>C.id===g.id)||r.value.push(g)}),c.value=c.value.filter(n=>n.id!==o.id),h.value=h.value.filter(n=>n.id!==o.id)}u()}function A(a){if(a.added){const o=a.added.element;if(!a.from.classList.contains("team-list")&&a.added.newIndex!==void 0){const i=h.value[a.added.newIndex];i&&(h.value.splice(a.added.newIndex,1),h.value.splice(a.added.newIndex,0,o),r.value.some(n=>n.id===i.id)||r.value.push(i))}else if(h.value.length>b.maxAdvance){const i=a.added.newIndex??0,n=h.value[i];n&&(h.value.splice(i,1),h.value.splice(i,0,o),r.value.some(g=>g.id===n.id)||r.value.push(n))}c.value=c.value.filter(i=>i.id!==o.id),d.value=d.value.filter(i=>i.id!==o.id)}u()}function E(a,o){let i;a==="first"?i=c.value.splice(o,1):i=d.value.splice(o,1),r.value.push(...i),u()}function U(a){const o=h.value.splice(a,1);r.value.push(...o),u()}function u(){he(()=>{const a=[...c.value.map(o=>o.id),...d.value.map(o=>o.id),...h.value.map(o=>o.id)];r.value=r.value.filter(o=>!a.includes(o.id))})}return j({firstTeam:c,secondTeam:d,advanceTeams:h}),(a,o)=>(p(),f("div",Fe,[s("div",je,[w(D(B),{list:r.value,group:z,sort:!1,"item-key":"id",class:"team-list","ghost-class":"ghost",disabled:!a.isTimeValid},{item:_(({element:i})=>[(p(),f("div",{class:M(["team-card",{disabled:!a.isTimeValid}]),key:i.id},[s("img",{src:i.logo,alt:i.name,class:"team-logo"},null,8,Ne),s("div",He,y(i.name),1)],2))]),_:1},8,["list","disabled"])]),s("div",Oe,[s("div",Ge,[s("div",Ke,[s("div",Ze,y(a.firstLabel),1),w(D(B),{list:c.value,group:z,sort:!1,"item-key":"id",class:"predict-slot big","ghost-class":"ghost",move:$,onChange:L,disabled:!a.isTimeValid},{item:_(({element:i,index:n})=>[(p(),f("div",{class:M(["team-card selected big",{disabled:!a.isTimeValid}]),key:i.id},[s("img",{src:i.logo,alt:i.name,class:"team-logo big"},null,8,Je),s("div",Qe,y(i.name),1),s("button",{class:"remove-btn",onClick:R(g=>E("first",n),["stop"]),disabled:!a.isTimeValid},"×",8,Ye)],2))]),footer:_(()=>[(p(!0),f(ie,null,le(Math.max(0,2-c.value.length),i=>(p(),f("div",{key:i,class:"empty-slot big"},"?"))),128))]),_:1},8,["list","disabled"])]),s("div",Xe,[s("div",es,y(a.secondLabel),1),w(D(B),{list:d.value,group:z,sort:!1,"item-key":"id",class:"predict-slot big","ghost-class":"ghost",move:T,onChange:x,disabled:!a.isTimeValid},{item:_(({element:i,index:n})=>[(p(),f("div",{class:M(["team-card selected big",{disabled:!a.isTimeValid}]),key:i.id},[s("img",{src:i.logo,alt:i.name,class:"team-logo big"},null,8,ss),s("div",ts,y(i.name),1),s("button",{class:"remove-btn",onClick:R(g=>E("second",n),["stop"]),disabled:!a.isTimeValid},"×",8,as)],2))]),footer:_(()=>[(p(!0),f(ie,null,le(Math.max(0,2-d.value.length),i=>(p(),f("div",{key:i,class:"empty-slot big"},"?"))),128))]),_:1},8,["list","disabled"])])]),s("div",os,[s("div",is,y(a.advanceLabel),1),w(D(B),{list:h.value,group:z,sort:!0,"item-key":"id",class:"predict-slot multi big","ghost-class":"ghost",move:k,onChange:A,disabled:!a.isTimeValid},{item:_(({element:i,index:n})=>[(p(),f("div",{class:M(["team-card selected big",{disabled:!a.isTimeValid}]),key:i.id},[s("img",{src:i.logo,alt:i.name,class:"team-logo big"},null,8,ls),s("div",ns,y(i.name),1),s("button",{class:"remove-btn",onClick:R(g=>U(n),["stop"]),disabled:!a.isTimeValid},"×",8,ds)],2))]),footer:_(()=>[(p(!0),f(ie,null,le(Math.max(0,a.maxAdvance-h.value.length),i=>(p(),f("div",{key:i,class:"empty-slot big"},"?"))),128))]),_:1},8,["list","disabled"])])])]))}}),us=Y(cs,[["__scopeId","data-v-951e29ba"]]),ne={getMatchTeams(W,j){return Q.get(`/machine/matches/${W}/teams`,{params:{phase:j}})},submitPrediction(W){return Q.post("/machine/prediction/submit",W)},getUserPredictions(W){return Q.get("/machine/prediction/records",{params:{matchId:W.matchId,phase:W.phase}})}},ms={class:"major-phase","element-loading-text":"加载队伍数据中..."},vs={class:"title"},hs={class:"save-button"},gs=G({name:"MajorPhase"}),ps=G({...gs,props:{isTimeValid:{type:Boolean},matchId:{},phase:{}},setup(W,{expose:j}){const b=W,z=ee(()=>({onePhase:"第一阶段",twoPhase:"第二阶段",threePhase:"第三阶段"})[b.phase]),r=$e(),c=v(),d=v([]),h=v([]),$=v([]),T=v([]),k=v(!1),I=v(!1),L=((u,a)=>{let o=null;return function(...i){o&&clearTimeout(o),o=setTimeout(()=>{u.apply(this,i),o=null},a)}})(()=>{b.isTimeValid&&(console.log("触发防抖保存..."),U())},300);se(c,u=>{u&&se([()=>u.firstTeam,()=>u.secondTeam,()=>u.advanceTeams],([a,o,i])=>{d.value=[...a],h.value=[...o],$.value=[...i],!k.value&&!I.value&&b.isTimeValid&&L()},{deep:!0})},{immediate:!0});const x=async()=>{try{k.value=!0,console.log(`获取${z.value}队伍数据，matchId:`,b.matchId);const u=await ne.getMatchTeams(b.matchId,b.phase);console.log("获取到的原始数据:",u.data),T.value=u.data.map(a=>({id:a.id,name:a.teamName,logo:a.teamImgUrl})),console.log("处理后的队伍数据:",T.value)}catch(u){console.error("获取队伍数据失败:",u),H.error("获取队伍数据失败")}finally{k.value=!1}},A=async()=>{var u;if(!b.matchId){console.warn("matchId未设置，跳过获取预测数据");return}try{I.value=!0,k.value=!0,T.value.length===0&&await x();const a=await ne.getUserPredictions({matchId:b.matchId,phase:b.phase,userId:r.userId});if(a.data){let o=Array.isArray(a.data)?a.data[0]:a.data;const i=new Set;if(o.sl){const n=o.sl.split(","),g=T.value.filter(C=>n.includes(C.id.toString()));d.value=g,g.forEach(C=>i.add(C.id.toString()))}if(o.ls){const n=o.ls.split(","),g=T.value.filter(C=>n.includes(C.id.toString()));h.value=g,g.forEach(C=>i.add(C.id.toString()))}if(o.advance){const n=o.advance.split(","),g=T.value.filter(C=>n.includes(C.id.toString()));$.value=g,g.forEach(C=>i.add(C.id.toString()))}T.value=T.value.filter(n=>!i.has(n.id.toString())),c.value&&(c.value.firstTeam=[...d.value],c.value.secondTeam=[...h.value],c.value.advanceTeams=[...$.value])}else console.log("未找到用户之前的预测数据")}catch(a){if(((u=a.response)==null?void 0:u.status)===401){console.log("用户未登录，跳过获取预测数据");return}console.error("获取预测数据失败:",a),H.error("获取预测数据失败")}finally{k.value=!1,setTimeout(()=>{I.value=!1},100)}},E=()=>{const u=[];return d.value.length!==2&&u.push("请选择2支3-0队伍"),h.value.length!==2&&u.push("请选择2支0-3队伍"),$.value.length!==6&&u.push("请选择6支晋级队伍"),u},U=async()=>{var a;const u=E();u.length>0&&H.warning(u.join(`
`));try{const o={matchId:b.matchId,phase:b.phase,s_l:d.value.map(n=>n.id.toString()).join(","),l_s:h.value.map(n=>n.id.toString()).join(","),advance:$.value.map(n=>n.id)},i=await ne.submitPrediction(o);H.success("预测数据保存成功")}catch(o){if(((a=o.response)==null?void 0:a.status)===401){H.warning("请先登录后再进行预测");return}console.error("保存预测数据失败:",o),H.error("保存预测数据失败")}};return oe(async()=>{b.matchId&&(await x(),await A())}),j({getPredictData(){return{firstTeam:d.value,secondTeam:h.value,advanceTeams:$.value}},fetchTeams:x,fetchUserPrediction:A,validateAndSavePrediction:U}),(u,a)=>{const o=re,i=pe;return ye((p(),f("div",ms,[s("h2",vs,y(z.value)+"竞猜作业",1),w(us,{ref_key:"predictRef",ref:c,teams:T.value,"first-label":"3-0","second-label":"0-3","advance-label":"3-2或3-1晋级的6支队伍","max-advance":6,isTimeValid:u.isTimeValid,"onUpdate:firstTeam":a[0]||(a[0]=n=>d.value=n),"onUpdate:secondTeam":a[1]||(a[1]=n=>h.value=n),"onUpdate:advanceTeams":a[2]||(a[2]=n=>$.value=n)},null,8,["teams","isTimeValid"]),s("div",hs,[w(o,{onClick:U,disabled:!u.isTimeValid},{default:_(()=>a[3]||(a[3]=[K("保存预测")])),_:1,__:[3]},8,["disabled"])])])),[[i,k.value]])}}}),de=Y(ps,[["__scopeId","data-v-7353871b"]]),fs={class:"major-champion"},_s={class:"bracket-container"},bs={class:"bracket-stage"},Ts={class:"matches"},ks={class:"match"},ys=["src","alt"],ws={class:"team-name"},Cs=["onClick","disabled"],$s={key:0,class:"empty-slot"},Vs=["src","alt"],Ps={class:"team-name"},Is=["onClick","disabled"],Ms={key:0,class:"empty-slot"},Ss={class:"match"},Ls=["src","alt"],qs={class:"team-name"},Ds=["onClick","disabled"],Es={key:0,class:"empty-slot"},xs=["src","alt"],Bs={class:"team-name"},zs=["onClick","disabled"],As={key:0,class:"empty-slot"},Rs={class:"match"},Ws=["src","alt"],Us={class:"team-name"},Fs=["onClick","disabled"],js={key:0,class:"empty-slot"},Ns=["src","alt"],Hs={class:"team-name"},Os=["onClick","disabled"],Gs={key:0,class:"empty-slot"},Ks={class:"match"},Zs=["src","alt"],Js={class:"team-name"},Qs=["onClick","disabled"],Ys={key:0,class:"empty-slot"},Xs=["src","alt"],et={class:"team-name"},st=["onClick","disabled"],tt={key:0,class:"empty-slot"},at={class:"bracket-stage"},ot={class:"matches"},it={class:"match"},lt=["src","alt"],nt={class:"team-name"},dt=["onClick","disabled"],rt={key:0,class:"empty-slot"},ct=["src","alt"],ut={class:"team-name"},mt=["onClick","disabled"],vt={key:0,class:"empty-slot"},ht={class:"match"},gt=["src","alt"],pt={class:"team-name"},ft=["onClick","disabled"],_t={key:0,class:"empty-slot"},bt=["src","alt"],Tt={class:"team-name"},kt=["onClick","disabled"],yt={key:0,class:"empty-slot"},wt={class:"bracket-stage"},Ct={class:"matches"},$t={class:"match"},Vt=["src","alt"],Pt={class:"team-name"},It=["onClick","disabled"],Mt={key:0,class:"empty-slot"},St=["src","alt"],Lt={class:"team-name"},qt=["onClick","disabled"],Dt={key:0,class:"empty-slot"},Et={class:"bracket-stage champion-stage"},xt={class:"matches"},Bt=["src","alt"],zt={class:"team-name"},At=["onClick","disabled"],Rt={key:0,class:"empty-slot champion-empty"},Wt=G({name:"MajorChampion"}),Ut=G({...Wt,props:{isTimeValid:{type:Boolean}},setup(W,{expose:j}){const b={name:"teams"},z=v(),r=v([]),c=v([]),d=v([]),h=v([]),$=v([]),T=v([]),k=v([]),I=v([]),S=v([]),L=v([]),x=v([]),A=v([]),E=v([]),U=v([]),u=v([]),a=v([]),o=v([]),i=v([]),n=l=>{switch(l){case"quarters1":return h;case"quarters2":return $;case"quarters3":return T;case"quarters4":return k;case"quarters5":return I;case"quarters6":return S;case"quarters7":return L;case"quarters8":return x;case"semis1":return A;case"semis2":return E;case"semis3":return U;case"semis4":return u;case"finals1":return a;case"finals2":return o;case"champion":return i;default:return v([])}},g=l=>{const t=l.from.parentElement.id,e=l.to.parentElement.id;if(!t||!e)return!1;if(t===e)return!0;if(t.startsWith("quarters")&&e.startsWith("semis")){const m=parseInt(t.replace("quarters","")),P=parseInt(e.replace("semis",""));if(Math.ceil(m/2)===P)return!0}if(t.startsWith("semis")&&e.startsWith("finals")){const m=parseInt(t.replace("semis","")),P=parseInt(e.replace("finals",""));if(Math.ceil(m/2)===P)return!0}return!!(t.startsWith("finals")&&e==="champion"||e.startsWith("quarters"))},C=(l,t)=>{const e=n(t);if(l.added){const m=l.added.element;[h,$,T,k,I,S,L,x,A,E,U,u,a,o,i].forEach(F=>{if(F!==e){const N=F.value.findIndex(J=>J.id===m.id);N!==-1&&F.value.splice(N,1)}})}};function q(l,t){const e=n(l),m=e.value.findIndex(P=>P.id===t);m!==-1&&e.value.splice(m,1)}const Z=()=>{const l=z.value;l&&(r.value=[...l.firstTeam],c.value=[...l.secondTeam],d.value=[...l.advanceTeams])};return j({getPredictData(){return Z(),{firstTeam:r.value,secondTeam:c.value,advanceTeams:d.value}}}),(l,t)=>(p(),f("div",fs,[t[22]||(t[22]=s("h2",{class:"title"},"冠军竞猜",-1)),s("div",_s,[s("div",bs,[t[15]||(t[15]=s("div",{class:"stage-title"},"四分之一决赛",-1)),s("div",Ts,[s("div",ks,[w(D(B),{id:"quarters1",list:h.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:t[0]||(t[0]=e=>C(e,"quarters1")),move:g,max:1,disabled:!l.isTimeValid},{item:_(({element:e})=>[s("div",{class:M(["team-card selected",{disabled:!l.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,ys),s("div",ws,y(e.name),1),s("button",{class:"remove-btn",onClick:R(m=>q("quarters1",e.id),["stop"]),disabled:!l.isTimeValid},"×",8,Cs)],2)]),footer:_(()=>[h.value.length===0?(p(),f("div",$s,"待定")):V("",!0)]),_:1},8,["list","disabled"]),w(D(B),{id:"quarters2",list:$.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:t[1]||(t[1]=e=>C(e,"quarters2")),move:g,max:1,disabled:!l.isTimeValid},{item:_(({element:e})=>[s("div",{class:M(["team-card selected",{disabled:!l.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,Vs),s("div",Ps,y(e.name),1),s("button",{class:"remove-btn",onClick:R(m=>q("quarters2",e.id),["stop"]),disabled:!l.isTimeValid},"×",8,Is)],2)]),footer:_(()=>[$.value.length===0?(p(),f("div",Ms,"待定")):V("",!0)]),_:1},8,["list","disabled"])]),s("div",Ss,[w(D(B),{id:"quarters3",list:T.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:t[2]||(t[2]=e=>C(e,"quarters3")),move:g,max:1,disabled:!l.isTimeValid},{item:_(({element:e})=>[s("div",{class:M(["team-card selected",{disabled:!l.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,Ls),s("div",qs,y(e.name),1),s("button",{class:"remove-btn",onClick:R(m=>q("quarters3",e.id),["stop"]),disabled:!l.isTimeValid},"×",8,Ds)],2)]),footer:_(()=>[T.value.length===0?(p(),f("div",Es,"待定")):V("",!0)]),_:1},8,["list","disabled"]),w(D(B),{id:"quarters4",list:k.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:t[3]||(t[3]=e=>C(e,"quarters4")),move:g,max:1,disabled:!l.isTimeValid},{item:_(({element:e})=>[s("div",{class:M(["team-card selected",{disabled:!l.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,xs),s("div",Bs,y(e.name),1),s("button",{class:"remove-btn",onClick:R(m=>q("quarters4",e.id),["stop"]),disabled:!l.isTimeValid},"×",8,zs)],2)]),footer:_(()=>[k.value.length===0?(p(),f("div",As,"待定")):V("",!0)]),_:1},8,["list","disabled"])]),s("div",Rs,[w(D(B),{id:"quarters5",list:I.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:t[4]||(t[4]=e=>C(e,"quarters5")),move:g,max:1,disabled:!l.isTimeValid},{item:_(({element:e})=>[s("div",{class:M(["team-card selected",{disabled:!l.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,Ws),s("div",Us,y(e.name),1),s("button",{class:"remove-btn",onClick:R(m=>q("quarters5",e.id),["stop"]),disabled:!l.isTimeValid},"×",8,Fs)],2)]),footer:_(()=>[I.value.length===0?(p(),f("div",js,"待定")):V("",!0)]),_:1},8,["list","disabled"]),w(D(B),{id:"quarters6",list:S.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:t[5]||(t[5]=e=>C(e,"quarters6")),move:g,max:1,disabled:!l.isTimeValid},{item:_(({element:e})=>[s("div",{class:M(["team-card selected",{disabled:!l.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,Ns),s("div",Hs,y(e.name),1),s("button",{class:"remove-btn",onClick:R(m=>q("quarters6",e.id),["stop"]),disabled:!l.isTimeValid},"×",8,Os)],2)]),footer:_(()=>[S.value.length===0?(p(),f("div",Gs,"待定")):V("",!0)]),_:1},8,["list","disabled"])]),s("div",Ks,[w(D(B),{id:"quarters7",list:L.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:t[6]||(t[6]=e=>C(e,"quarters7")),move:g,max:1,disabled:!l.isTimeValid},{item:_(({element:e})=>[s("div",{class:M(["team-card selected",{disabled:!l.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,Zs),s("div",Js,y(e.name),1),s("button",{class:"remove-btn",onClick:R(m=>q("quarters7",e.id),["stop"]),disabled:!l.isTimeValid},"×",8,Qs)],2)]),footer:_(()=>[L.value.length===0?(p(),f("div",Ys,"待定")):V("",!0)]),_:1},8,["list","disabled"]),w(D(B),{id:"quarters8",list:x.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:t[7]||(t[7]=e=>C(e,"quarters8")),move:g,max:1,disabled:!l.isTimeValid},{item:_(({element:e})=>[s("div",{class:M(["team-card selected",{disabled:!l.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,Xs),s("div",et,y(e.name),1),s("button",{class:"remove-btn",onClick:R(m=>q("quarters8",e.id),["stop"]),disabled:!l.isTimeValid},"×",8,st)],2)]),footer:_(()=>[x.value.length===0?(p(),f("div",tt,"待定")):V("",!0)]),_:1},8,["list","disabled"])])])]),t[19]||(t[19]=s("div",{class:"connector-column"},[s("div",{class:"connector-gap"})],-1)),s("div",at,[t[16]||(t[16]=s("div",{class:"stage-title"},"半决赛",-1)),s("div",ot,[s("div",it,[w(D(B),{id:"semis1",list:A.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:t[8]||(t[8]=e=>C(e,"semis1")),move:g,max:1,disabled:!l.isTimeValid},{item:_(({element:e})=>[s("div",{class:M(["team-card selected",{disabled:!l.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,lt),s("div",nt,y(e.name),1),s("button",{class:"remove-btn",onClick:R(m=>q("semis1",e.id),["stop"]),disabled:!l.isTimeValid},"×",8,dt)],2)]),footer:_(()=>[A.value.length===0?(p(),f("div",rt,"待定")):V("",!0)]),_:1},8,["list","disabled"]),w(D(B),{id:"semis2",list:E.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:t[9]||(t[9]=e=>C(e,"semis2")),move:g,max:1,disabled:!l.isTimeValid},{item:_(({element:e})=>[s("div",{class:M(["team-card selected",{disabled:!l.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,ct),s("div",ut,y(e.name),1),s("button",{class:"remove-btn",onClick:R(m=>q("semis2",e.id),["stop"]),disabled:!l.isTimeValid},"×",8,mt)],2)]),footer:_(()=>[E.value.length===0?(p(),f("div",vt,"待定")):V("",!0)]),_:1},8,["list","disabled"])]),s("div",ht,[w(D(B),{id:"semis3",list:U.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:t[10]||(t[10]=e=>C(e,"semis3")),move:g,max:1,disabled:!l.isTimeValid},{item:_(({element:e})=>[s("div",{class:M(["team-card selected",{disabled:!l.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,gt),s("div",pt,y(e.name),1),s("button",{class:"remove-btn",onClick:R(m=>q("semis3",e.id),["stop"]),disabled:!l.isTimeValid},"×",8,ft)],2)]),footer:_(()=>[U.value.length===0?(p(),f("div",_t,"待定")):V("",!0)]),_:1},8,["list","disabled"]),w(D(B),{id:"semis4",list:u.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:t[11]||(t[11]=e=>C(e,"semis4")),move:g,max:1,disabled:!l.isTimeValid},{item:_(({element:e})=>[s("div",{class:M(["team-card selected",{disabled:!l.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,bt),s("div",Tt,y(e.name),1),s("button",{class:"remove-btn",onClick:R(m=>q("semis4",e.id),["stop"]),disabled:!l.isTimeValid},"×",8,kt)],2)]),footer:_(()=>[u.value.length===0?(p(),f("div",yt,"待定")):V("",!0)]),_:1},8,["list","disabled"])])])]),t[20]||(t[20]=s("div",{class:"connector-column"},[s("div")],-1)),s("div",wt,[t[17]||(t[17]=s("div",{class:"stage-title"},"总决赛",-1)),s("div",Ct,[s("div",$t,[w(D(B),{id:"finals1",list:a.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:t[12]||(t[12]=e=>C(e,"finals1")),move:g,max:1,disabled:!l.isTimeValid},{item:_(({element:e})=>[s("div",{class:M(["team-card selected",{disabled:!l.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,Vt),s("div",Pt,y(e.name),1),s("button",{class:"remove-btn",onClick:R(m=>q("finals1",e.id),["stop"]),disabled:!l.isTimeValid},"×",8,It)],2)]),footer:_(()=>[a.value.length===0?(p(),f("div",Mt,"待定")):V("",!0)]),_:1},8,["list","disabled"]),w(D(B),{id:"finals2",list:o.value,group:b,"item-key":"id",class:"slot","ghost-class":"ghost",onChange:t[13]||(t[13]=e=>C(e,"finals2")),move:g,max:1,disabled:!l.isTimeValid},{item:_(({element:e})=>[s("div",{class:M(["team-card selected",{disabled:!l.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,St),s("div",Lt,y(e.name),1),s("button",{class:"remove-btn",onClick:R(m=>q("finals2",e.id),["stop"]),disabled:!l.isTimeValid},"×",8,qt)],2)]),footer:_(()=>[o.value.length===0?(p(),f("div",Dt,"待定")):V("",!0)]),_:1},8,["list","disabled"])])])]),t[21]||(t[21]=s("div",{class:"connector-column third"},null,-1)),s("div",Et,[t[18]||(t[18]=s("div",{class:"stage-title"},"冠军",-1)),s("div",xt,[w(D(B),{id:"champion",list:i.value,group:b,"item-key":"id",class:"slot champion-slot","ghost-class":"ghost",onChange:t[14]||(t[14]=e=>C(e,"champion")),move:g,max:1,disabled:!l.isTimeValid},{item:_(({element:e})=>[s("div",{class:M(["team-card selected",{disabled:!l.isTimeValid}])},[s("img",{src:e.logo,alt:e.name,class:"team-logo"},null,8,Bt),s("div",zt,y(e.name),1),s("button",{class:"remove-btn",onClick:R(m=>q("champion",e.id),["stop"]),disabled:!l.isTimeValid},"×",8,At)],2)]),footer:_(()=>[i.value.length===0?(p(),f("div",Rt,"待定")):V("",!0)]),_:1},8,["list","disabled"])])])])]))}}),Ft=Y(Ut,[["__scopeId","data-v-526dd3fb"]]),jt={class:"coin-buttons"},Nt={key:0,class:"debug-info"},Ht=G({__name:"MatchCoinBase",props:{debug:{type:Boolean}},emits:["update:coinType","loading","model-loaded","progress"],setup(W,{emit:j}){const b=W,z=v(b.debug!==void 0?b.debug:!0);console.log("MatchCoinBase - debugInfo:",z.value);const r=v(""),c=v("初始化中..."),d=v(null);let h,$,T,k;const I=j,S={bronze:"#B08D57",silver:"#696969",gold:"#81FF08",diamond:"#BFD8EF"},L=v("gold"),x=o=>{L.value=o,A()},A=()=>{if(!h)return;const o=S[L.value];h.traverse(i=>{i.isMesh&&i.material&&(i.material.color.set(o),i.material.needsUpdate=!0)})},E=()=>{if(d.value){const o=d.value.getBoundingClientRect();r.value=`宽度: ${o.width}px, 高度: ${o.height}px`}},U=()=>{try{if(c.value="创建场景...",h=new Se,console.log("场景创建成功"),c.value="创建相机...",$=new Le(75,d.value?d.value.clientWidth/d.value.clientHeight:1,.1,1e3),$.position.set(0,0,5),console.log("相机创建成功"),c.value="创建渲染器...",T=new qe({antialias:!0}),!d.value)throw new Error("容器元素不存在");const o=d.value.clientWidth,i=d.value.clientHeight;T.setSize(o,i),T.setPixelRatio(window.devicePixelRatio),d.value.appendChild(T.domElement),console.log("渲染器创建成功，尺寸:",o,i),T.toneMapping=De,T.toneMappingExposure=1,k=new Ee($,T.domElement),k.enableDamping=!0,k.dampingFactor=.05,console.log("控制器创建成功");const n=new xe(16777215,1);h.add(n);const g=new me(16777215,1);g.position.set(5,5,5),h.add(g);const C=new me(16777215,.8);C.position.set(-5,5,-5).normalize(),h.add(C);const q=new Be(16777215,1,100);q.position.set(0,2,0),h.add(q),console.log("灯光移除，将使用环境贴图提供照明");const Z=new ze(T);Z.compileEquirectangularShader(),c.value="加载环境贴图...",new Ae().load("https://dl.polyhaven.org/file/ph-assets/HDRIs/hdr/1k/the_sky_is_on_fire_1k.hdr",e=>{const m=Z.fromEquirectangular(e).texture;Z.dispose(),e.dispose(),h.environment=m,h.background=m,console.log("环境贴图加载并应用成功"),c.value="环境贴图加载成功"},void 0,e=>{console.error("加载环境贴图错误:",e),c.value="环境贴图加载失败: "+(e instanceof Error?e.message:String(e))}),c.value="开始加载模型...";const t=new Re;console.log("开始加载模型..."),t.load("/b.glb",e=>{console.log("模型加载成功"),c.value="模型加载成功",I("loading",c.value),h.add(e.scene);const m=new We({metalness:1,roughness:0,color:S[L.value]});h.traverse(O=>{O.isMesh&&(console.log("检查到网格对象:",O.name),O.material=m,console.log("已为网格对象应用 MeshStandardMaterial"),(O.material.isMeshStandardMaterial||O.material.isMeshPhysicalMaterial)&&h.environment&&(O.material.envMap=h.environment,O.material.needsUpdate=!0,console.log("已为标准/物理材质设置环境贴图")))});const P=new Ue().setFromObject(e.scene),F=P.getCenter(new ve),N=P.getSize(new ve),J=Math.max(N.x,N.y,N.z),te=$.fov*(Math.PI/180);let ae=Math.abs(J/Math.sin(te/2))*.8;$.position.set(F.x-ae,F.y,F.z),$.lookAt(F),k.target.copy(F),k.update(),console.log("相机位置调整完成"),setTimeout(()=>{console.log("发送模型加载完成事件"),I("model-loaded")},100)},e=>{const m=e.loaded/e.total*100;console.log("加载进度:",m.toFixed(2)+"%"),c.value=`模型加载进度: ${m.toFixed(0)}%`,I("loading",c.value),I("progress",m)},e=>{console.error("模型加载错误:",e),c.value="模型加载失败: "+(e instanceof Error?e.message:String(e)),I("loading",c.value)}),E()}catch(o){console.error("初始化场景失败:",o),c.value="初始化失败: "+o.message}},u=()=>{requestAnimationFrame(u),k==null||k.update(),T==null||T.render(h,$)},a=()=>{if(!d.value||!$||!T)return;const o=d.value.clientWidth,i=d.value.clientHeight;console.log("handleResize - 容器尺寸:",o,i),$.aspect=d.value?o/i:$.aspect,$.updateProjectionMatrix(),T.setSize(o,i),E(),console.log("handleResize - 相机宽高比更新为:",$.aspect)};return oe(()=>{console.log("组件挂载，容器元素:",d.value),window.addEventListener("resize",a),c.value="初始化场景...",he(()=>{var o,i;E(),console.log("nextTick - 容器尺寸:",(o=d.value)==null?void 0:o.clientWidth,(i=d.value)==null?void 0:i.clientHeight),d.value&&console.log("nextTick - 相机宽高比:",d.value.clientWidth/d.value.clientHeight),U(),u()})}),ge(()=>{window.removeEventListener("resize",a),d.value&&T&&d.value.removeChild(T.domElement),T==null||T.dispose(),h&&h.traverse(o=>{if(o.geometry&&o.geometry.dispose(),o.material)if(Array.isArray(o.material))for(const i of o.material)i.dispose();else o.material.dispose();o.texture&&o.texture.dispose()})}),(o,i)=>(p(),f("div",{class:"model-container",ref_key:"container",ref:d},[s("div",jt,[s("button",{onClick:i[0]||(i[0]=n=>x("bronze")),class:M({active:L.value==="bronze"})},"铜币",2),s("button",{onClick:i[1]||(i[1]=n=>x("silver")),class:M({active:L.value==="silver"})},"银币",2),s("button",{onClick:i[2]||(i[2]=n=>x("gold")),class:M({active:L.value==="gold"})},"金币",2),s("button",{onClick:i[3]||(i[3]=n=>x("diamond")),class:M({active:L.value==="diamond"})},"钻石币",2)]),z.value?(p(),f("div",Nt,[s("p",null,"容器尺寸: "+y(r.value),1),s("p",null,"加载状态: "+y(c.value),1)])):V("",!0)],512))}}),Ot=Y(Ht,[["__scopeId","data-v-a136c79c"]]),Gt={class:"coin-preview-container"},Kt={key:0,class:"loading-overlay"},Zt={class:"loading-text"},Jt={class:"dialog-footer"},Qt=G({__name:"CoinPreviewDialog",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(W,{emit:j}){const b=W,z=j,r=ee({get:()=>b.modelValue,set:u=>z("update:modelValue",u)}),c=v("gold"),d=v(!1),h=ee(()=>d.value?"100%":"80%"),$=ee(()=>d.value?"80vh":"70vh"),T=v(!0),k=v(0),I=v("初始化..."),S=()=>{d.value=window.innerWidth<=768},L=u=>{c.value=u},x=u=>{I.value=u,console.log("加载状态:",u)},A=u=>{k.value=Math.floor(u),k.value>=100&&(I.value="加载完成...")},E=()=>{console.log("收到模型加载完成事件"),setTimeout(()=>{T.value=!1,k.value=100,I.value="加载完成",console.log("加载叠加层应已隐藏")},300)},U=()=>{T.value=!0,k.value=0,I.value="初始化...",c.value="gold"};return oe(()=>{S(),window.addEventListener("resize",S)}),ge(()=>{window.removeEventListener("resize",S)}),se(r,u=>{console.log("对话框状态变化:",u),u&&(T.value=!0,k.value=0,I.value="初始化...")}),(u,a)=>{const o=re,i=_e;return p(),we(i,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=n=>r.value=n),title:"3D预览奖章,加载约30秒左右",width:h.value,fullscreen:!d.value,draggable:"","destroy-on-close":"",onClosed:U,"close-on-click-modal":!1},{footer:_(()=>[s("div",Jt,[w(o,{onClick:a[0]||(a[0]=n=>r.value=!1)},{default:_(()=>a[2]||(a[2]=[K("关闭")])),_:1,__:[2]})])]),default:_(()=>[s("div",Gt,[w(Ot,{ref:"coinViewer",debug:!1,"initial-coin-type":c.value,"container-height":$.value,"onUpdate:coinType":L,onLoading:x,onModelLoaded:E,onProgress:A},null,8,["initial-coin-type","container-height"]),T.value||k.value<100?(p(),f("div",Kt,[w(D(fe),{type:"circle",percentage:k.value,width:d.value?90:100,"stroke-width":10,color:"#409eff"},null,8,["percentage","width"]),s("div",Zt,y(I.value),1)])):V("",!0)])]),_:1},8,["modelValue","width","fullscreen"])}}}),Yt=Y(Qt,[["__scopeId","data-v-3b0f8ad8"]]),Xt={class:"cs2-major-root"},ea={class:"major-container"},sa={key:0,class:"loading-container"},ta={key:1,class:"prediction-content"},aa={class:"tab-buttons"},oa={key:0,class:"countdown"},ia={key:0,class:"countdown"},la={key:0,class:"countdown"},na={key:0,class:"countdown"},da={class:"major-content"},ra={class:"match-info-panel"},ca={class:"match-header"},ua=["src","alt"],ma={class:"match-name"},va={class:"match-details"},ha={class:"info-item"},ga={class:"value"},pa={class:"info-item"},fa={class:"value"},_a={class:"info-item"},ba={class:"value"},Ta={class:"match-footer"},ka={class:"button-group"},ya={key:0,class:"major-section"},wa={class:"time-info"},Ca={key:1,class:"major-section"},$a={class:"time-info"},Va={key:2,class:"major-section"},Pa={class:"time-info"},Ia={key:3,class:"major-section"},Ma={class:"time-info"},Sa={key:2,class:"no-match"},La=G({__name:"CS2Major",setup(W,{expose:j}){Ve();const b=v(0),z=v(!0),r=v("onePhase"),c=v(),d=v(),h=v(),$=v(),T=v(null),k=v(null),I=v(!1),S=v({}),L=v({onePhase:{start:new Date,end:new Date},twoPhase:{start:new Date,end:new Date},threePhase:{start:new Date,end:new Date},champion:{start:new Date,end:new Date}}),x=ee(()=>Object.keys(S.value).length>0),A=l=>new Date(l).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",timeZone:"Asia/Shanghai"}).replace(/\//g,"年").replace(",","日"),E=l=>{const{start:t,end:e}=L.value[l];return`${A(t.toISOString())}日 ${t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",hour12:!1})} - ${A(e.toISOString())}日 ${e.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",hour12:!1})}`},U=async()=>{try{z.value=!0;const l=await Q.get("/machine/matches");if(l.data&&l.data.length>0){const t=l.data;t.length>0?(t.forEach(e=>{S.value[e.phase]=e}),S.value[r.value]||(r.value=Object.keys(S.value)[0]),u(r.value),t.forEach(e=>{const m=e.phase;m in L.value&&(L.value[m]={start:new Date(e.predictStartTime),end:new Date(e.predictEndTime)})}),console.log("比赛信息:",t),console.log("时间限制设置:",L.value)):H.error("未找到可用赛事")}else H.error("未找到可用赛事")}catch(l){console.error("获取赛事ID失败:",l),H.error("获取赛事ID失败")}finally{z.value=!1}},u=l=>{const t=S.value[l];t?(b.value=t.id||0,k.value=t):(b.value=0,k.value=null)},a=l=>{const t=new Date(new Date().toLocaleString("en-US",{timeZone:"Asia/Shanghai"})),{start:e,end:m}=L.value[l];return t>=e&&t<=m},o=l=>{const t=new Date,{start:e,end:m}=L.value[l];if(t<e){const P=e.getTime()-t.getTime();return`距离开始还有 ${i(P)}`}else{if(t>m)return"竞猜已结束";{const P=m.getTime()-t.getTime();return`距离结束还有 ${i(P)}`}}},i=l=>{const t=Math.floor(l/864e5),e=Math.floor(l%(1e3*60*60*24)/(1e3*60*60)),m=Math.floor(l%(1e3*60*60)/(1e3*60)),P=Math.floor(l%(1e3*60)/1e3);return`${t}天${e}小时${m}分${P}秒`},n=()=>{r.value=r.value};se(r,l=>{var t,e,m,P;if(u(l),b.value)switch(l){case"onePhase":(t=c.value)==null||t.fetchTeams();break;case"twoPhase":(e=d.value)==null||e.fetchTeams();break;case"threePhase":(m=h.value)==null||m.fetchTeams();break;case"champion":(P=$.value)==null||P.fetchTeams();break}}),oe(async()=>{await U(),T.value=window.setInterval(n,1e3)}),Ce(()=>{T.value&&clearInterval(T.value)}),j({getPredictData(){var l,t,e,m;return{onePhase:(l=c.value)==null?void 0:l.getPredictData(),twoPhase:(t=d.value)==null?void 0:t.getPredictData(),threePhase:(e=h.value)==null?void 0:e.getPredictData(),champion:(m=$.value)==null?void 0:m.getPredictData()}}});const g=l=>{const t=document.createElement("canvas");t.width=l.width,t.height=l.height+60;const e=t.getContext("2d");if(!e)return l;e.drawImage(l,0,0),e.font="bold 36px Microsoft YaHei",e.textAlign="center",e.textBaseline="bottom";const m="竞猜作业来源：sb6657.cn",P=t.width/2,F=t.height-20,N=e.measureText(m).width;return e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(P-N/2-10,F-40,N+20,40),e.fillStyle="#ffffff",e.fillText(m,P,F),t},C=async()=>{const l="玩机器烂梗库官方比赛作业，地址sb6657.cn";try{await navigator.clipboard.writeText(l)}catch(t){console.error("复制失败:",t)}try{I.value=!0;const t=document.querySelector(".major-section");if(!t)throw new Error("未找到要截图的元素");const e=await Me(t,{backgroundColor:"#ffffff",scale:1.5,logging:!1,useCORS:!0,allowTaint:!0}),m=g(e),P=document.createElement("a");P.download=`sb6657.cn_CS2Major预测_${new Date().toLocaleDateString()}.jpg`,P.href=m.toDataURL("image/jpeg",1),P.click(),H.success("截图已保存"),Q.get("/machine/shareMatch")}catch(t){console.error("截图失败:",t),H.error("截图失败，请重试")}finally{I.value=!1}},q=v(!1);function Z(){q.value=!0,Q.get("/machine/matchCoin")}return(l,t)=>{var N,J,te,ae,O,ce,ue;const e=be,m=Te,P=re,F=ke;return p(),f("div",Xt,[s("div",ea,[z.value?(p(),f("div",sa,[w(e,{rows:3,animated:""})])):x.value?(p(),f("div",ta,[s("div",aa,[S.value.onePhase?(p(),f("button",{key:0,class:M({active:r.value==="onePhase"}),onClick:t[0]||(t[0]=X=>r.value="onePhase")},[t[5]||(t[5]=K(" 第一阶段 ")),r.value==="onePhase"?(p(),f("div",oa,y(o("onePhase")),1)):V("",!0)],2)):V("",!0),S.value.twoPhase?(p(),f("button",{key:1,class:M({active:r.value==="twoPhase"}),onClick:t[1]||(t[1]=X=>r.value="twoPhase")},[t[6]||(t[6]=K(" 第二阶段 ")),r.value==="twoPhase"?(p(),f("div",ia,y(o("twoPhase")),1)):V("",!0)],2)):V("",!0),S.value.threePhase?(p(),f("button",{key:2,class:M({active:r.value==="threePhase"}),onClick:t[2]||(t[2]=X=>r.value="threePhase")},[t[7]||(t[7]=K(" 第三阶段 ")),r.value==="threePhase"?(p(),f("div",la,y(o("threePhase")),1)):V("",!0)],2)):V("",!0),S.value.champion?(p(),f("button",{key:3,class:M({active:r.value==="champion"}),onClick:t[3]||(t[3]=X=>r.value="champion")},[t[8]||(t[8]=K(" 冠军组 ")),r.value==="champion"?(p(),f("div",na,y(o("champion")),1)):V("",!0)],2)):V("",!0)]),s("div",da,[s("div",ra,[s("div",ca,[s("img",{src:(N=k.value)==null?void 0:N.matchesImg,alt:(J=k.value)==null?void 0:J.matchesName,class:"match-logo"},null,8,ua),s("h2",ma,y((te=k.value)==null?void 0:te.matchesName),1)]),s("div",va,[s("div",ha,[t[9]||(t[9]=s("span",{class:"label"},"赛事等级：",-1)),s("span",ga,y((ae=k.value)==null?void 0:ae.level),1)]),s("div",pa,[t[10]||(t[10]=s("span",{class:"label"},"比赛地点：",-1)),s("span",fa,y((O=k.value)==null?void 0:O.matchesLocation),1)]),s("div",_a,[t[11]||(t[11]=s("span",{class:"label"},"比赛时间：",-1)),s("span",ba,y(A((ce=k.value)==null?void 0:ce.startTime))+"日 - "+y(A((ue=k.value)==null?void 0:ue.endTime))+"日",1)])]),s("div",Ta,[t[14]||(t[14]=s("div",{class:"reward-info"},"竞猜会获得平台虚拟奖章，目前正在做",-1)),s("div",ka,[w(P,{type:"primary",onClick:C,loading:I.value},{default:_(()=>[w(m,null,{default:_(()=>[w(D(Pe))]),_:1}),t[12]||(t[12]=K(" 截图分享预测 "))]),_:1,__:[12]},8,["loading"]),w(P,{type:"success",onClick:Z},{default:_(()=>[w(m,null,{default:_(()=>[w(D(Ie))]),_:1}),t[13]||(t[13]=K(" 预览3D奖章 "))]),_:1,__:[13]})])])]),r.value==="onePhase"?(p(),f("div",ya,[s("div",wa,[s("p",null,"竞猜时间："+y(E("onePhase")),1)]),w(de,{ref_key:"onePhaseRef",ref:c,isTimeValid:a("onePhase"),matchId:b.value,phase:"onePhase"},null,8,["isTimeValid","matchId"])])):V("",!0),r.value==="twoPhase"?(p(),f("div",Ca,[s("div",$a,[s("p",null,"竞猜时间："+y(E("twoPhase")),1)]),w(de,{ref_key:"twoPhaseRef",ref:d,isTimeValid:a("twoPhase"),matchId:b.value,phase:"twoPhase"},null,8,["isTimeValid","matchId"])])):V("",!0),r.value==="threePhase"?(p(),f("div",Va,[s("div",Pa,[s("p",null,"竞猜时间："+y(E("threePhase")),1)]),w(de,{ref_key:"threePhaseRef",ref:h,isTimeValid:a("threePhase"),matchId:b.value,phase:"threePhase"},null,8,["isTimeValid","matchId"])])):V("",!0),r.value==="champion"?(p(),f("div",Ia,[s("div",Ma,[s("p",null,"竞猜时间："+y(E("champion")),1)]),w(Ft,{ref_key:"championRef",ref:$,isTimeValid:a("champion"),matchId:b.value},null,8,["isTimeValid","matchId"])])):V("",!0)])])):(p(),f("div",Sa,[w(F,{description:"暂无可用赛事"})]))]),w(Yt,{modelValue:q.value,"onUpdate:modelValue":t[4]||(t[4]=X=>q.value=X)},null,8,["modelValue"])])}}}),eo=Y(La,[["__scopeId","data-v-303ffd19"]]);export{eo as default};
