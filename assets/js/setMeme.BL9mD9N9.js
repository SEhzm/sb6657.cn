import{h as l,A as u,M as g}from"./index.D2Wq063l.js";import{k as i}from"./element-plus.C3kSHAgf.js";async function f(t,e){var r,n;try{const o=await l.get(t);return(n=(r=o==null?void 0:o.data)==null?void 0:r[0])!=null&&n.barrage?o.data.map(s=>({content:s.barrage,category:s.tableName,id:`${s.barrageId}`,copyCount:s.cnt})):(console.log(`获取${e}烂梗失败`,o),!1)}catch(o){return console.log(`获取${e}烂梗失败`,o),!1}}function h(){return f(u.GET_HOT_MEME_24h,"24h热门")}function M(){return f(u.GET_HOT_MEME_7D,"七天热门")}async function b(t){console.log(`搜索词: ${t}`);try{const e=await l.post(u.SEARCH_MEME,{QueryBarrage:t});return e.data.length===0?(console.log("未搜索到烂梗"),"notfound"):e.data.map(n=>({content:n.barrage,category:"allbarrage",id:n.id,copyCount:+n.cnt}))}catch(e){return console.log("搜索烂梗失败",e),!1}}async function C(t,e,r){var n,o,a;console.log(`请求烂梗分类: ${t}, 页数: ${e}, 每页烂梗数: ${r}`);try{const s=(n=g.find(c=>c.category===t))==null?void 0:n.api;if(!s)throw new Error("未找到此分类");const m=await l.get(s,{params:{pageNum:e,pageSize:r}});if(((a=(o=m.data)==null?void 0:o.list)==null?void 0:a.length)<=0)throw new Error("请求到的烂梗列表为空");return{memeArr:m.data.list.map(c=>({content:c.barrage,id:c.id,category:t,copyCount:+c.cnt})),total:m.data.total}}catch(s){return console.error("请求烂梗列表失败",s),!1}}function w(t,e,r){let n=null;return(...o)=>{if(n)return e();{const a=t(...o);return n=setTimeout(()=>{n=null},r),a}}}function d(t){i({title:"复制失败",message:`复制操作失败，请稍后重试。
                可能你的浏览器不支持被动写入剪贴板，请换用其他浏览器`,type:"error"}),console.error("复制失败:",t)}function A(){i({message:"复制成功",type:"success"})}function _(){return i({title:"请勿刷次数",message:"复制成功，但次数没有增加",type:"warning"}),"limitedSuccess"}function $(t){const e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select();try{document.execCommand("Copy")}catch(r){return d(r),!1}return document.body.removeChild(e),!0}async function T(t,e,r,n,o){try{const a=await l.post(u.INCREASE_COPY_COUNT,{table:t,id:e,...r?{PageNum:r}:{},...n?{PageSize:50}:{},...o?{sortOrder:o}:{}});return console.log("弹幕复制次数+1成功",a),!0}catch(a){return console.error("弹幕复制次数+1失败",a),!1}}function H(){i({title:"复制成功",message:"但是复制次数没有增加，可能是网络有问题",type:"warning"})}async function N(t,e){console.log(`烂梗投稿
 所属分类: ${t} 
烂梗内容: ${e}`);try{return(await l.post(u.SUBMIT_MEME,{table:t,barrage:e})).code!=="200"?(console.log("烂梗投稿失败"),!1):!0}catch(r){return console.error("烂梗投稿失败",r),!1}}export{T as a,$ as b,A as c,M as d,N as e,C as f,h as g,_ as l,H as p,b as s,w as t};
