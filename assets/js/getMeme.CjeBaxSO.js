import{M as f,h as i,A as l}from"./index.BfSMFBz2.js";async function g(r,e){var o,n;try{const t=await i.get(r);return(n=(o=t==null?void 0:t.data)==null?void 0:o[0])!=null&&n.barrage?t.data.map(s=>({tags:s.tags,content:s.barrage,id:`${s.barrageId}`,copyCount:s.cnt,submitTime:s.submitTime})):(console.log(`获取${e}烂梗失败`,t),!1)}catch(t){return console.log(`获取${e}烂梗失败`,t),!1}}function E(){return g(l.GET_HOT_MEME_24h,"24h热门")}function b(){return g(l.GET_HOT_MEME_7D,"七天热门")}async function T(r,e,o){if(console.log(`搜索词: ${r}, 标签: ${e}, 投稿时间: ${o}`),r==null||r=="")return!1;try{const n=await i.post(l.SEARCH_MEME,{tags:(e==null?void 0:e.join(","))||"",submitTime:o||[],barrage:r});return n.data.length===0?(console.log("未搜索到烂梗"),"notfound"):n.data.map(a=>({tags:a.tags,content:a.barrage,id:`${a.id}`,copyCount:Number(a.cnt),submitTime:a.submitTime}))}catch(n){return console.log("搜索烂梗失败",n),!1}}async function h(r,e,o,n){var t,a,s;console.log(`请求烂梗分类: ${r}, 页数: ${e}, 每页烂梗数: ${o}`);try{const u=(t=f.find(c=>c.category===r))==null?void 0:t.api;if(!u)throw new Error("未找到此分类");const m=await i.get(u,{params:{tags:n,pageNum:e,pageSize:o}});if(((s=(a=m.data)==null?void 0:a.list)==null?void 0:s.length)<=0)throw new Error("请求到的烂梗列表为空");return{memeArr:m.data.list.map(c=>({tags:c.tags,content:c.barrage,id:c.id,category:r,copyCount:+c.cnt,likes:+c.likes,submitTime:c.submitTime})),total:m.data.total}}catch(u){return console.error("请求烂梗列表失败",u),!1}}async function p(){const r=await i.get(l.GET_MEME_TAGS);if(r.code!==200)throw new Error(r.msg);return r.data}export{E as a,b,h as c,p as g,T as s};
