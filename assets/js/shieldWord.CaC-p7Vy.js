import{h as c,_ as Y}from"./index.Bc-SuezR.js";import{a as n}from"./element-plus.Devhffg8.js";import{d as Z,h as s,j as ee,f as te,al as d,ar as oe,c as b,o as v,a as r,R as l,K as $,O as i,J as a,Q as B,a6 as le,I as ae,P as f}from"./@vue.BltuATdo.js";import"./pinia.DfSVr1RC.js";import"./axios.ngrFHoWO.js";import"./js-cookie.Cz0CWeBA.js";import"./vue-router.BFvkXMb7.js";import"./@element-plus.GoM0nurT.js";import"./lodash-es.CDeyng3v.js";import"./@vueuse.BO4JNAXw.js";import"./@popperjs.D_chPuIy.js";import"./@ctrl.r5W6hzzQ.js";import"./dayjs.BKG3DVjA.js";import"./async-validator.9PlIezaS.js";import"./memoize-one.BdPwpGay.js";import"./normalize-wheel-es.BQoi3Ox2.js";import"./@floating-ui.D0iZPv2f.js";const se={class:"card main"},re={class:"header-section"},ne={class:"title"},ie={class:"card-list"},de={class:"word"},ue={class:"time"},pe={class:"btn-group"},me={class:"pagination"},ge={class:"dialog-footer"},ce={class:"pagination",style:{"margin-top":"20px"}},ve={class:"dialog-footer"},fe=Z({__name:"shieldWord",setup(_e){const R=t=>{switch(t){case"1":return"success";case"2":return"danger";default:return"info"}},F=t=>{switch(t){case"1":return"已通过";case"2":return"未通过";default:return"待审核"}},N=s([]),w=s(!1),S=s(1),k=s(50),T=s(0),_=s(!1),C=s(!1),y=s(),m=s({shieldWord:""}),g=s(!1),L=s([]),z=s(!1),h=s(1),x=s(20),U=s(0),E={shieldWord:[{required:!0,message:"请输入屏蔽词",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}]},p=async()=>{w.value=!0;try{const t=await c.get("/machine/getShieldWordList",{params:{pageNum:S.value,pageSize:k.value}});t.code===200?(N.value=t.data.list,T.value=t.data.total):n.error(t.msg||"加载失败")}catch{n.error("请求失败，请检查接口连接")}finally{w.value=!1}},j=async t=>{try{const e=await c.get("/machine/addIsShieldWord",{params:{id:t}});e.code===200?(n.success("提交成功 ✅"),p()):n.error(e.msg||"提交失败")}catch{n.error("请求失败")}},q=async t=>{try{const e=await c.get("/machine/addNotShieldWord",{params:{id:t}});e.code===200?(n.success("提交成功 ✅"),p()):n.error(e.msg||"提交失败")}catch{n.error("请求失败")}},J=async()=>{y.value&&await y.value.validate(async t=>{if(t){C.value=!0;try{const e=await c.get("/machine/addShieldWord",{params:{shieldWord:m.value.shieldWord.trim()}});e.code===200?(n.success("投稿成功 ✅"),P(),p()):n.error(e.msg||"投稿失败")}catch(e){console.error("投稿失败:",e),n.error("请求失败，请检查网络连接")}finally{C.value=!1}}})},P=()=>{var t;_.value=!1,m.value.shieldWord="",(t=y.value)==null||t.resetFields()},V=async()=>{z.value=!0;try{const t=await c.get("/machine/getMyShieldWordList",{params:{pageNum:h.value,pageSize:x.value}});t.code===200?(L.value=t.data.list,U.value=t.data.total):t.code===401&&n.error(t.msg||"请先登录")}catch{n.error("请先登录")}finally{z.value=!1}};return ee(g,t=>{t&&(h.value=1,V())}),te(()=>{p()}),(t,e)=>{const u=d("el-button"),D=d("el-pagination"),K=d("el-backtop"),O=d("el-input"),Q=d("el-form-item"),A=d("el-form"),I=d("el-dialog"),W=d("el-table-column"),G=d("el-tag"),H=d("el-table"),M=oe("loading");return v(),b(B,null,[r("div",se,[r("div",re,[r("h2",ne,[e[11]||(e[11]=i("屏蔽词收集列表 ",-1)),l(u,{style:{"margin-left":"10px"},type:"primary",onClick:e[0]||(e[0]=o=>_.value=!0)},{default:a(()=>[...e[10]||(e[10]=[i(" 屏蔽词投稿 ",-1)])]),_:1}),e[12]||(e[12]=r("h6",null,"将会在您复制烂梗时提示是否包含屏蔽词(包含屏蔽词烂梗可能不能在直播间发送)",-1))]),l(u,{onClick:e[1]||(e[1]=o=>g.value=!0)},{default:a(()=>[...e[13]||(e[13]=[i("我投稿的屏蔽词",-1)])]),_:1})]),$((v(),b("div",ie,[(v(!0),b(B,null,le(N.value,o=>(v(),b("div",{class:"card shield-card",key:o.id},[r("div",null,[e[14]||(e[14]=i("屏蔽词：",-1)),r("span",de,f(o.shieldWord),1)]),r("div",ue,"投稿时间："+f(o.submitTime),1),r("div",pe,[l(u,{type:"success",onClick:X=>j(o.id)},{default:a(()=>[e[15]||(e[15]=i(" 这是屏蔽词：",-1)),r("span",null,f(o.isWordNum),1)]),_:2},1032,["onClick"]),l(u,{type:"danger",onClick:X=>q(o.id)},{default:a(()=>[e[16]||(e[16]=i(" 这不是屏蔽词：",-1)),r("span",null,f(o.notWordNum),1)]),_:2},1032,["onClick"])])]))),128))])),[[M,w.value]]),r("div",me,[l(D,{"current-page":S.value,"onUpdate:currentPage":e[2]||(e[2]=o=>S.value=o),"page-size":k.value,"onUpdate:pageSize":e[3]||(e[3]=o=>k.value=o),"page-sizes":[10,20,50,100],background:"",layout:"prev, pager, next, sizes, total",total:T.value,onCurrentChange:p,onSizeChange:p},null,8,["current-page","page-size","total"])])]),l(K,{right:50,bottom:50},{default:a(()=>[...e[17]||(e[17]=[i("UP",-1)])]),_:1}),l(I,{modelValue:_.value,"onUpdate:modelValue":e[5]||(e[5]=o=>_.value=o),title:"屏蔽词投稿",width:"500px","close-on-click-modal":!1},{footer:a(()=>[r("div",ge,[l(u,{onClick:P},{default:a(()=>[...e[19]||(e[19]=[i("取消",-1)])]),_:1}),l(u,{type:"primary",onClick:J,loading:C.value},{default:a(()=>[...e[20]||(e[20]=[i(" 提交 ",-1)])]),_:1},8,["loading"])])]),default:a(()=>[l(A,{model:m.value,rules:E,ref_key:"formRef",ref:y,"label-width":"65px"},{default:a(()=>[l(Q,{label:"屏蔽词",prop:"shieldWord"},{default:a(()=>[l(O,{modelValue:m.value.shieldWord,"onUpdate:modelValue":e[4]||(e[4]=o=>m.value.shieldWord=o),placeholder:"请输入要投稿的屏蔽词",maxlength:"10","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1}),e[18]||(e[18]=r("span",null,"⁕由于屏蔽词是某个词语，故限制长度为10",-1))]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(I,{modelValue:g.value,"onUpdate:modelValue":e[9]||(e[9]=o=>g.value=o),title:"我投稿的屏蔽词",width:"710px"},{footer:a(()=>[r("div",ve,[l(u,{onClick:e[8]||(e[8]=o=>g.value=!1)},{default:a(()=>[...e[21]||(e[21]=[i("关闭",-1)])]),_:1})])]),default:a(()=>[$((v(),ae(H,{data:L.value,stripe:"",style:{width:"100%"}},{default:a(()=>[l(W,{prop:"shieldWord",label:"屏蔽词",width:"200"}),l(W,{prop:"submitTime",label:"投稿时间",width:"180"}),l(W,{prop:"reviewTime",label:"审核时间",width:"180"}),l(W,{prop:"state",label:"状态",width:"120"},{default:a(o=>[l(G,{type:R(o.row.state)},{default:a(()=>[i(f(F(o.row.state)),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])),[[M,z.value]]),r("div",ce,[l(D,{"current-page":h.value,"onUpdate:currentPage":e[6]||(e[6]=o=>h.value=o),"page-size":x.value,"onUpdate:pageSize":e[7]||(e[7]=o=>x.value=o),"page-sizes":[10,20,50,100],background:"",layout:"prev, pager, next, sizes, total",total:U.value,onCurrentChange:V,onSizeChange:V},null,8,["current-page","page-size","total"])])]),_:1},8,["modelValue"])],64)}}}),Ie=Y(fe,[["__scopeId","data-v-7ff70b92"]]);export{Ie as default};
