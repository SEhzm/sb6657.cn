import{h as u,A as f,M as i}from"./index.C_NblXT8.js";async function d(n,r){var s,t;try{const a=await u.get(n);return(t=(s=a==null?void 0:a.data)==null?void 0:s[0])!=null&&t.barrage?a.data.map(e=>({tags:e.tags,content:e.barrage,category:e.tableName,id:`${e.barrageId}`,copyCount:e.cnt,likes:e.likes})):(console.log(`获取${r}烂梗失败`,a),!1)}catch(a){return console.log(`获取${r}烂梗失败`,a),!1}}function h(){return d(f.GET_HOT_MEME_24h,"24h热门")}function p(){return d(f.GET_HOT_MEME_7D,"七天热门")}async function E(n){console.log(`搜索词: ${n}`);try{const r=await u.post(f.SEARCH_MEME,{barrage:n});return r.data.length===0?(console.log("未搜索到烂梗"),"notfound"):r.data.map(t=>({tags:t.tags,content:t.barrage,category:"allbarrage",id:t.id,copyCount:+t.cnt,likes:+t.likes}))}catch(r){return console.log("搜索烂梗失败",r),!1}}async function y(n,r,s,t){var a,l,e;console.log(`请求烂梗分类: ${n}, 页数: ${r}, 每页烂梗数: ${s}`);try{const c=(a=i.find(o=>o.category===n))==null?void 0:a.api;if(!c)throw new Error("未找到此分类");const g=await u.get(c,{params:{tags:t,pageNum:r,pageSize:s}});if(((e=(l=g.data)==null?void 0:l.list)==null?void 0:e.length)<=0)throw new Error("请求到的烂梗列表为空");return{memeArr:g.data.list.map(o=>({tags:o.tags,content:o.barrage,id:o.id,category:n,copyCount:+o.cnt,likes:+o.likes})),total:g.data.total}}catch(c){return console.error("请求烂梗列表失败",c),!1}}export{p as a,y as b,h as g,E as s};
